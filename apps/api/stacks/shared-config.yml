# Shared Configuration for all LEGO API Stacks
# This file is referenced by all serverless.yml files in the stacks directory
#
# Usage in other files:
#   custom:
#     shared: ${file(../shared-config.yml)}

# Stage-specific configurations
stages:
  dev:
    logLevel: debug
    memorySize: 256
    timeout: 30
    rds:
      instanceClass: db.t4g.micro
      allocatedStorage: 20
      maxAllocatedStorage: 50
    opensearch:
      instanceType: t3.small.search
      instanceCount: 1
  staging:
    logLevel: info
    memorySize: 512
    timeout: 30
    rds:
      instanceClass: db.t4g.small
      allocatedStorage: 50
      maxAllocatedStorage: 100
    opensearch:
      instanceType: t3.medium.search
      instanceCount: 2
  production:
    logLevel: warn
    memorySize: 1024
    timeout: 30
    rds:
      instanceClass: db.r6g.large
      allocatedStorage: 100
      maxAllocatedStorage: 500
    opensearch:
      instanceType: r6g.large.search
      instanceCount: 3

# Stack naming convention
# All stacks follow: lego-{component}-{stage}
# Examples: lego-network-dev, lego-database-dev, lego-api-gallery-dev
stackPrefix: lego

# AWS Tags (applied to all resources)
tags:
  Project: lego-api
  ManagedBy: Serverless
  CostCenter: Engineering
  Owner: engineering@bricklink.com

# VPC CIDR configuration
vpc:
  cidrBlock: 10.0.0.0/24
  publicSubnet1Cidr: 10.0.0.0/27
  publicSubnet2Cidr: 10.0.0.32/27
  privateSubnet1Cidr: 10.0.0.64/26
  privateSubnet2Cidr: 10.0.0.128/26

# Database configuration
database:
  name: legoapidb
  port: 5432
  engine: aurora-postgresql
  engineVersion: '15.8'
  minCapacity: 0.5
  maxCapacity: 2
  backupRetention: 7

# OpenSearch configuration
opensearch:
  engineVersion: OpenSearch_2.13
  volumeSize: 20
  volumeType: gp3

# Cognito configuration
cognito:
  userPoolName: lego-moc-users
  passwordMinLength: 8
  accessTokenValidity: 60
  idTokenValidity: 60
  refreshTokenValidity: 43200
