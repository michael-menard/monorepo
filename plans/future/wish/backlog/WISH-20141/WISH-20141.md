---
doc_type: story
title: "WISH-20141: AppSelect Icon & Tooltip Support for Smart Sort Dropdown"
story_id: WISH-20141
story_prefix: WISH
status: backlog
e2e_required: false
phase: 4
created_at: "2026-02-09T00:00:00-07:00"
updated_at: "2026-02-09T00:00:00-07:00"
depends_on: [WISH-2014]
follow_up_from: WISH-2014
estimated_points: 2
sizing_warning: false
---

# WISH-20141: AppSelect Icon & Tooltip Support for Smart Sort Dropdown

## Context

Deferred from WISH-2014 (Smart Sorting Algorithms) AC8 and AC9. The AppSelect component currently supports only `value`, `label`, and `disabled` per option. WISH-2014 added three smart sort modes (Best Value, Expiring Soon, Hidden Gems) to the dropdown but could not render icons or tooltips because AppSelect doesn't support them.

**Deferred ACs from WISH-2014:**
- **AC8**: Sort dropdown uses icons from lucide-react: TrendingDown, Clock, Gem
- **AC9**: Sort options include tooltips explaining each mode

## Goal

Enhance the `AppSelect` component in `@repo/app-component-library` to support optional icon and tooltip props per option, then wire them into the wishlist smart sorting dropdown.

## Non-goals

- Changing sort algorithm behavior (already implemented in WISH-2014)
- Adding new sort modes
- Modifying backend sort logic
- Making icons/tooltips required (must remain optional for backward compatibility)

## Scope

### Packages Affected

1. **Component Library**: `packages/core/app-component-library/src/inputs/AppSelect.tsx`
   - Extend `AppSelectOption` interface with optional `icon` and `tooltip` props
   - Render icon inline with label in `SelectItem`
   - Wrap option with `Tooltip` primitive when tooltip text provided

2. **Frontend**: `apps/web/app-wishlist-gallery/src/pages/main-page.tsx`
   - Wire icon and tooltip props into `wishlistSortOptions` for smart sort entries
   - Icons: TrendingDown (Best Value), Clock (Expiring Soon), Gem (Hidden Gems)
   - Tooltips: "Sort by lowest price per piece", "Sort by oldest release dates", "Discover overlooked valuable sets"

### Database Impact
- None

## Acceptance Criteria

**AC1**: Extend `AppSelectOption` with optional `icon` prop
- Type: `React.ComponentType<{ className?: string }>` (lucide-react compatible)
- Renders inline before label text with `h-4 w-4 mr-2` sizing
- Backward compatible: options without icon render as before

**AC2**: Extend `AppSelectOption` with optional `tooltip` prop
- Type: `string`
- Wraps SelectItem content in Tooltip primitive when present
- Tooltip appears on hover with standard delay
- Backward compatible: options without tooltip render as before

**AC3**: Smart sort dropdown shows icons
- Best Value: TrendingDown icon
- Expiring Soon: Clock icon
- Hidden Gems: Gem icon
- Non-smart-sort options render without icons (unchanged)

**AC4**: Smart sort dropdown shows tooltips
- "Best Value": "Sort by lowest price per piece"
- "Expiring Soon": "Sort by oldest release dates"
- "Hidden Gems": "Discover overlooked valuable sets"

**AC5**: AppSelect unit tests cover icon/tooltip rendering
- Test: option with icon renders icon element
- Test: option without icon renders label only (backward compat)
- Test: option with tooltip wraps in Tooltip
- Test: option without tooltip renders without Tooltip
- Minimum: 4 tests

**AC6**: Wishlist smart-sorting test updated for icons
- Test verifies icon elements present in dropdown options
- Test verifies tooltip content accessible

**AC7**: Accessibility maintained
- Icons have `aria-hidden="true"` (decorative)
- Tooltip content accessible to screen readers
- Keyboard navigation unchanged

**AC8**: TypeScript compilation passes
- No new type errors introduced
- Backward compatible with all existing AppSelect usages

## Reuse Plan

### Existing Components
- `AppSelect` from `@repo/app-component-library` (extended)
- `Tooltip` / `TooltipTrigger` / `TooltipContent` from `@repo/app-component-library/_primitives`
- lucide-react icons (TrendingDown, Clock, Gem)

## Implementation Notes

### AppSelect Enhancement

```typescript
// Extended option interface
export interface AppSelectOption {
  value: string
  label: string
  disabled?: boolean
  icon?: React.ComponentType<{ className?: string }>  // NEW
  tooltip?: string  // NEW
}
```

### SelectItem Rendering

```tsx
<SelectItem key={option.value} value={option.value} disabled={option.disabled}>
  {option.icon && <option.icon className="h-4 w-4 mr-2 inline-block" aria-hidden="true" />}
  {option.label}
</SelectItem>
```

### Tooltip Wrapping

When `option.tooltip` is present, wrap the SelectItem content in a Tooltip component from primitives.

## Risks & Mitigations

1. **Tooltip inside Select dropdown** - Radix UI Select may interfere with Tooltip positioning. Mitigation: test in browser, fallback to `title` attribute if needed.
2. **Backward compatibility** - All props are optional, existing usages unchanged.

## Definition of Done

- [ ] AppSelect supports icon and tooltip props
- [ ] Wishlist smart sort dropdown shows icons and tooltips
- [ ] 4+ AppSelect unit tests pass
- [ ] Existing AppSelect tests still pass
- [ ] TypeScript compilation passes
- [ ] ESLint passes
