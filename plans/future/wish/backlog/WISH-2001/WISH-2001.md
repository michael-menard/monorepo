---
doc_type: story
title: "WISH-2001: Gallery MVP"
story_id: WISH-2001
story_prefix: WISH
status: Ready for Review
phase: 2
created_at: "2026-01-24T02:00:00-07:00"
updated_at: "2026-01-24T02:00:00-07:00"
depends_on: [WISH-2000, WISH-2007]
estimated_points: 8
sizing_warning: true
---

# WISH-2001: Gallery MVP

## Goal

Deliver read-only gallery view to validate UX and API integration end-to-end.

## Feature

Vertical slice with GET endpoints, RTK Query hooks, WishlistCard component, gallery page with store filters, search, and sorting.

## Phase

Phase 2: Gallery MVP (Vertical Slice)

## Sizing Warning

⚠️ This story spans multiple domains (Backend API + Frontend Gallery UI + RTK Integration). Monitor scope carefully during elaboration.

## Acceptance Criteria

- [ ] GET `/api/wishlist` endpoint returns paginated list with filters (store, search)
- [ ] GET `/api/wishlist/:id` endpoint returns single item
- [ ] `WishlistCard` component renders: image, title, store badge, price, piece count, priority
- [ ] Gallery page has store filter tabs (All, LEGO, Barweer, Other)
- [ ] Search by title/set number works
- [ ] Sort by date, price, piece count, priority works
- [ ] RTK Query hooks: `useGetWishlistQuery`, `useGetWishlistItemQuery`
- [ ] Hover action menu: View, Edit, Remove, Got It (placeholder)
- [ ] Loading skeleton states match card layout

## Risk Notes

First vertical slice; integration issues between API and frontend likely.

## Technical Details

### Backend (API)

**Locations:**
- `apps/api/endpoints/wishlist/list/handler.ts`
- `apps/api/endpoints/wishlist/get/handler.ts`

**GET /api/wishlist**

Query params:
- `store` (optional): Filter by store
- `search` (optional): Search title/setNumber
- `sortBy` (optional): date|price|pieces|priority (default: date DESC)
- `page` (optional): Pagination (default: 1)
- `limit` (optional): Items per page (default: 20)

Response:
```json
{
  "items": [...],
  "total": 42,
  "page": 1,
  "limit": 20
}
```

**GET /api/wishlist/:id**

Returns single wishlist item with all fields.

### Frontend (React)

**Locations:**
- `apps/web/app-wishlist-gallery/src/pages/GalleryPage.tsx`
- `apps/web/app-wishlist-gallery/src/pages/ItemDetailPage.tsx`
- `apps/web/app-wishlist-gallery/src/components/WishlistCard.tsx`
- `apps/web/app-wishlist-gallery/src/components/GalleryHeader.tsx`
- `apps/web/app-wishlist-gallery/src/components/StoreTabs.tsx`

**WishlistCard Component**

Displays:
- Item image (thumbnail or placeholder)
- Store badge (colored)
- Title
- Price (with currency)
- Piece count
- Priority indicator
- Hover menu (View, Edit, Remove, Got It)

**Gallery Page Features**

- Store filter tabs: All, LEGO, Barweer, Cata, BrickLink, Other
- Search input: searches title and setNumber
- Sort dropdown: date, price, pieces, priority
- Pagination: prev/next buttons
- Empty state: "No items in your wishlist yet"
- Loading state: skeleton cards

### RTK Query Integration

**Location:** `packages/core/api-client/src/rtk/wishlist-api.ts`

Hooks:
- `useGetWishlistQuery(filters)` - List with pagination/filtering/sorting
- `useGetWishlistItemQuery(id)` - Single item detail

Cache tags for invalidation on mutations (WISH-2002, WISH-2003, WISH-2004).

## Dependencies

- **Depends On:** WISH-2000 (schema), WISH-2007 (migration)
- **Unblocks:** WISH-2002, WISH-2003, WISH-2004

## Reuse Plan

- Use `@repo/app-component-library` for card, badge, button primitives
- Use RTK Query patterns from Sets gallery (SETS-2001)
- Use Tailwind CSS utility classes for styling
- Leverage existing gallery layout from Sets gallery if applicable

## Test Coverage

**Backend Tests:**
- List endpoint with various filters/sorts
- Pagination boundary cases
- Get single item
- Error handling (invalid ID, unauthorized user)

**Frontend Tests:**
- WishlistCard renders with props
- GalleryPage filters/sorts/paginates
- Loading/empty states
- Accessibility (ARIA labels, keyboard nav planned for WISH-2006)

**E2E Tests:**
- User can view their wishlist
- User can filter by store
- User can search items
- User can view item detail

## Definition of Done

- [ ] API endpoints deployed and tested
- [ ] RTK Query hooks working
- [ ] Gallery page renders correctly
- [ ] All filter/sort/search features working
- [ ] Skeleton loading states visible
- [ ] Empty state message displays
- [ ] Code reviewed
- [ ] Ready for WISH-2002/WISH-2003/WISH-2004

## Token Budget

### Phase Summary

| Phase | Estimated | Actual | Delta | Notes |
|-------|-----------|--------|-------|-------|
| Story Gen | ~8k | — | — | Large story |
| Elaboration | ~15k | — | — | Multiple domains |
| Implementation | ~35k | — | — | Full-stack |
| Code Review | ~12k | — | — | Multiple PRs |
| **Total** | ~70k | — | — | Larger story |

### Actual Measurements

| Date | Phase | Before | After | Delta | Notes |
|------|-------|--------|-------|-------|-------|

## Agent Log

Append-only.

| Timestamp (America/Denver) | Agent | Action | Outputs |
|---|---|---|---|
| 2026-01-24 02:00 | pm-bootstrap-generation-leader | Created story file | WISH-2001.md |
