---
doc_type: story
title: "WISH-20172b: FilterPanel Playwright E2E Tests"
story_id: WISH-20172b
story_prefix: WISH
status: backlog
follow_up_from: WISH-20172
phase: 6
created_at: "2026-02-09T00:00:00-07:00"
updated_at: "2026-02-09T00:00:00-07:00"
depends_on: [WISH-20172]
estimated_points: 2
---

# WISH-20172b: FilterPanel Playwright E2E Tests

## Follow-up Context

This story captures the deferred AC14 from WISH-20172 (Frontend Filter Panel UI). The FilterPanel component was fully implemented with 43 passing unit/integration tests, but Playwright E2E tests were deferred because they require full app startup with live backend.

- **Source:** WISH-20172 AC14 (deferred)
- **Reason deferred:** Requires full app startup, dev server, live backend, screenshot capture
- **Parent AC:** AC14: Playwright E2E test covers combined filter + sort flow

## User Story

As a developer, I want Playwright E2E tests covering the FilterPanel so that filter + sort combinations are verified end-to-end against a live backend.

## Acceptance Criteria

### AC1: Combined filter + sort E2E test (store filter + Best Value sort)

**Criterion**: Playwright test applies a store filter and Best Value sort, verifies results
- Navigate to wishlist gallery page
- Open FilterPanel, select a store checkbox (e.g., LEGO)
- Apply filters
- Select Best Value sort
- Verify displayed items match the filter + sort criteria
- Capture screenshot evidence

**Verification**: Test passes, screenshot captured

---

### AC2: Combined filter + sort E2E test (priority range + Hidden Gems sort)

**Criterion**: Playwright test applies priority range filter and Hidden Gems sort
- Open FilterPanel, set priority range (e.g., min: 3, max: 5)
- Apply filters
- Select Hidden Gems sort
- Verify displayed items match criteria

**Verification**: Test passes, screenshot captured

---

### AC3: All filters + sort combined E2E test

**Criterion**: Playwright test applies all filter types simultaneously with sort
- Open FilterPanel
- Select store filter(s)
- Set priority range
- Set price range
- Apply filters
- Apply a sort option
- Verify results match all criteria

**Verification**: Test passes, screenshot captured

---

### AC4: Clear filters E2E test

**Criterion**: Playwright test clears all filters and verifies reset
- Apply multiple filters (store + priority + price)
- Verify filtered results displayed
- Click Clear All in FilterPanel
- Verify all items restored (unfiltered state)
- Verify filter badge count resets to 0

**Verification**: Test passes, screenshot captured

---

### AC5: Filter badge count E2E verification

**Criterion**: Playwright test verifies the filter badge shows correct active count
- Apply 1 filter -> badge shows "1"
- Apply 2nd filter -> badge shows "2"
- Clear one filter -> badge updates
- Clear all -> badge hidden

**Verification**: Test passes

---

### AC6: Empty result set E2E test

**Criterion**: Playwright test verifies empty state when no items match filters
- Apply a filter combination that returns no results
- Verify empty state message displayed
- Verify "Clear Filters" action is available
- Click clear, verify items return

**Verification**: Test passes, screenshot captured

## Technical Notes

- Test file location: `apps/web/playwright/tests/wishlist/filter-panel.spec.ts`
- Config: `apps/web/playwright/playwright.gallery-mvp.config.ts`
- Requires live backend at `http://localhost:9000` and frontend at `http://localhost:3000`
- Use existing auth fixture pattern from `tests/wishlist/helpers/auth-fixture`
- Capture screenshots for evidence (same pattern as `drag-preview.spec.ts`)
- Capture network HAR files showing correct API request parameters

## Test Plan

- 6 Playwright E2E tests covering all filter interactions against live backend
- Screenshots captured for visual evidence
- HAR files verify correct API query parameters sent

## Definition of Done

- [ ] All 6 Playwright E2E tests pass against live backend
- [ ] Screenshots captured as evidence
- [ ] HAR files confirm correct API parameters
- [ ] No regressions in existing wishlist E2E tests
