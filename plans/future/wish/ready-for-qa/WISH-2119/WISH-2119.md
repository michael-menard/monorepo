---
doc_type: story
title: "WISH-2119: Flag scheduling (auto-enable/disable at scheduled times)"
story_id: WISH-2119
story_prefix: WISH
status: ready-for-qa
phase: 3
created_at: "2026-01-28T00:00:00-07:00"
updated_at: "2026-01-31T04:59:55+00:00"
depends_on: [WISH-2009]
follow_up_from: WISH-2009
estimated_points: 2
sizing_warning: false
---

# WISH-2119: Flag scheduling (auto-enable/disable at scheduled times)

## Goal

Enable automatic feature flag updates at predetermined times through scheduled flag infrastructure, eliminating manual intervention for timed feature rollouts and rollbacks.

## Feature

Scheduled flag updates infrastructure with admin endpoints for creating, listing, and cancelling schedules. Cron job processes pending schedules every 1 minute, applying flag updates atomically with cache invalidation.

## Phase

Phase 3 - Infrastructure

## Context

Feature flags (WISH-2009) currently require manual updates to change rollout state. Common use cases like holiday promotions, timed releases, A/B test windows, and maintenance windows require admins to manually enable/disable flags at specific times. This creates operational burden and risks human error (forgotten flag changes, incorrect timing).

Scheduled flag updates automate these operations by allowing admins to pre-configure flag state changes with a scheduled execution time. A cron job processes pending schedules and applies flag updates automatically, with full audit trail and error handling.

## Non-goals

- **Recurring schedules** (cron-like syntax) - one-time schedules only in MVP
- **Schedule preview** (simulate flag state after schedule applies) - defer to future story
- **Bulk schedule creation** (multiple schedules in single API call) - defer to future story
- **Automatic retry for failed schedules** - manual intervention required for failures in MVP
- **Schedule audit logging** (track which admin created/cancelled schedules) - defer to WISH-2019
- **Real-time schedule notifications** (WebSocket/push) - CloudWatch logs only in MVP

## Scope

### Endpoints Affected

**New Endpoints:**
- `POST /api/admin/flags/:flagKey/schedule` - Create scheduled flag update (admin only)
- `GET /api/admin/flags/:flagKey/schedule` - List all schedules for flag (admin only)
- `DELETE /api/admin/flags/:flagKey/schedule/:scheduleId` - Cancel pending schedule (admin only)

**Reused from WISH-2009:**
- Admin auth middleware for authorization checks
- `POST /api/admin/flags/:flagKey` - Flag update logic reused by cron job
- Redis cache invalidation on flag updates

### Packages Affected

1. **Backend - Config Domain**: `apps/api/lego-api/domains/config/`
   - `application/schedule-service.ts` - Schedule CRUD logic (new)
   - `adapters/schedule-repository.ts` - Database adapter for schedules (new)
   - `routes.ts` - Schedule endpoints (extend existing)
   - `types.ts` - Schedule Zod schemas (extend existing)

2. **Backend - Cron Job**: `apps/api/lego-api/jobs/`
   - `process-flag-schedules.ts` - Cron job handler for schedule processing (new)

3. **Database Schema**: `packages/backend/database-schema/`
   - `src/schema/feature-flags.ts` - feature_flag_schedules table (extend existing)
   - `src/migrations/app/` - Migration for schedules table (new)

4. **Shared Schemas**: `packages/core/api-client/src/schemas/`
   - `feature-flags.ts` - Schedule schemas shared with frontend (extend existing)

### Infrastructure Impact

**Database Schema:**
```sql
CREATE TABLE feature_flag_schedules (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  flag_id UUID NOT NULL REFERENCES feature_flags(id) ON DELETE CASCADE,
  scheduled_at TIMESTAMP WITH TIME ZONE NOT NULL,
  status VARCHAR(20) DEFAULT 'pending' CHECK (status IN ('pending', 'applied', 'failed', 'cancelled')),
  updates JSONB NOT NULL,
  applied_at TIMESTAMP WITH TIME ZONE,
  error_message TEXT,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

CREATE INDEX idx_schedules_flag_id ON feature_flag_schedules(flag_id);
CREATE INDEX idx_schedules_scheduled_at ON feature_flag_schedules(scheduled_at);
CREATE INDEX idx_schedules_status ON feature_flag_schedules(status);
```

**Cron Job Configuration:**
- Lambda function triggered by EventBridge rule
- Schedule expression: `rate(1 minute)`
- Lambda timeout: 2 minutes
- Lambda memory: 512 MB
- Environment: Reuse DATABASE_URL, REDIS_URL from WISH-2009

**Cache Invalidation:**
- Schedules trigger same cache invalidation as manual flag updates
- Redis cache keys: `feature_flags:{environment}` and `feature_flags:{environment}:{flagKey}`
- 5-minute TTL maintained (from WISH-2009)

## Acceptance Criteria

### Backend - Schedule Service

**AC1**: Create schedule endpoint validation
- Endpoint: `POST /api/admin/flags/:flagKey/schedule`
- Request body validated with Zod: `{ scheduledAt: ISO8601, updates: { enabled?: boolean, rolloutPercentage?: number } }`
- scheduledAt must be in future (validation error if past)
- updates must contain at least one property (enabled or rolloutPercentage)
- rolloutPercentage range: 0-100 (validation error if out of range)
- Response: 201 Created with schedule ID, status = 'pending'
- Zod schema: `CreateScheduleRequestSchema`, `ScheduleResponseSchema`

**AC2**: Create schedule database persistence
- Schedule saved to feature_flag_schedules table
- Foreign key validates flagKey exists in feature_flags table
- Returns 404 if flag does not exist
- Default status = 'pending'
- Timestamps: created_at, updated_at auto-populated

**AC3**: List schedules endpoint
- Endpoint: `GET /api/admin/flags/:flagKey/schedule`
- Returns array of all schedules for flag (all statuses)
- Each schedule includes: id, flagKey, scheduledAt, status, updates, createdAt, appliedAt (if applied), errorMessage (if failed)
- Response: 200 OK
- Zod schema: `ScheduleListResponseSchema`

**AC4**: Cancel schedule endpoint
- Endpoint: `DELETE /api/admin/flags/:flagKey/schedule/:scheduleId`
- Updates schedule status to 'cancelled'
- Returns 404 if schedule not found
- Returns 400 if schedule already applied/failed (cannot cancel)
- Response: 200 OK with updated schedule
- Zod schema: `ScheduleResponseSchema`

**AC5**: Admin authorization enforcement
- All schedule endpoints require admin role
- Reuse auth middleware from WISH-2009 (`apps/api/lego-api/middleware/auth.ts`)
- Verify JWT contains admin role before allowing CRUD operations
- Return 403 Forbidden for non-admin users
- Integration test: non-admin user receives 403

### Backend - Cron Job Processing

**AC6**: Cron job configuration
- Lambda function triggered by EventBridge rule
- Schedule expression: `rate(1 minute)` (runs every 1 minute)
- Lambda timeout: 2 minutes (allows 1 minute processing + buffer)
- Lambda memory: 512 MB
- Environment: DATABASE_URL, REDIS_URL from WISH-2009

**AC7**: Process pending schedules
- Query schedules WHERE status = 'pending' AND scheduled_at <= NOW()
- Order by scheduled_at ASC (chronological order)
- Limit: 100 schedules per execution (prevent timeout)
- Use row-level locking: `FOR UPDATE SKIP LOCKED` (prevent double-processing)

**AC8**: Apply flag updates atomically
- For each pending schedule:
  - Update flag in feature_flags table with schedule.updates
  - Invalidate Redis cache for flag
  - Set schedule status = 'applied' with applied_at timestamp
  - All operations in database transaction (atomic)

**AC9**: Error handling and failed schedules
- Wrap flag update in try-catch block
- On success: Set schedule status = 'applied', log success to CloudWatch
- On failure: Set schedule status = 'failed' with error_message, log error to CloudWatch
- Failed schedules do NOT block processing of other schedules (error isolation)
- CloudWatch structured logs: `{ message: "Schedule applied", scheduleId, flagKey }` or `{ level: "error", message: "Failed to apply schedule", scheduleId, error }`

**AC10**: Concurrent cron execution safety
- Row-level locking (`FOR UPDATE SKIP LOCKED`) prevents two cron executions from processing same schedule
- Each schedule processed exactly once (even if two cron jobs run simultaneously)
- Integration test: Create 5 pending schedules, invoke cron job concurrently, assert each processed once

### Schema & Types

**AC11**: Zod schemas for schedules
- `CreateScheduleRequestSchema`: Validation for POST request body
- `ScheduleSchema`: Core schedule type
- `ScheduleResponseSchema`: API response format
- `ScheduleListResponseSchema`: Array response format
- All types inferred from Zod: `type Schedule = z.infer<typeof ScheduleSchema>`

**AC12**: Schedule updates validation schema
- updates object validated: `{ enabled?: boolean, rolloutPercentage?: number }`
- At least one property required (error if empty object)
- rolloutPercentage validation: integer, min 0, max 100
- Zod schema: `ScheduleUpdatesSchema`

**AC13**: Frontend/backend schema alignment
- Backend schemas defined in `apps/api/lego-api/domains/config/types.ts`
- Schemas re-exported in `packages/core/api-client/src/schemas/feature-flags.ts`
- Frontend imports from `@repo/api-client`
- Alignment test verifies schemas match

### Database & Migration

**AC14**: feature_flag_schedules table created
- Migration creates table with schema defined in Infrastructure Impact section
- Indexes on flag_id, scheduled_at, status
- Foreign key: flag_id references feature_flags(id) ON DELETE CASCADE
- Status constraint: CHECK (status IN ('pending', 'applied', 'failed', 'cancelled'))
- Migration applied before deploying cron job

**AC15**: Schedule retention policy
- Applied schedules: Retain for 90 days (audit trail)
- Failed schedules: Retain indefinitely (manual review required)
- Cancelled schedules: Retain for 30 days
- No automatic cleanup in MVP (manual database cleanup or future cron job)

**AC16**: Schedule conflict handling
- Multiple schedules for same flag allowed (no uniqueness constraint)
- Schedules processed in chronological order (ORDER BY scheduled_at ASC)
- Last schedule to execute wins (overwrites previous flag state)
- Document in API: "Overlapping schedules may cause unexpected flag states; avoid scheduling concurrent updates"

### Testing

**AC17**: Backend unit tests (minimum 10 tests)
- Schedule service: Create, list, cancel schedule
- Schedule validation: Past scheduledAt rejected, empty updates rejected, invalid rolloutPercentage rejected
- Cron job: Process pending schedules, skip cancelled schedules, handle failed updates
- Authorization: Non-admin receives 403
- Zod schema validation tests

**AC18**: Backend integration tests (HTTP file)
- File: `__http__/feature-flag-scheduling.http`
- Test: Create schedule (assert 201, schedule ID, status = 'pending')
- Test: List schedules (assert 200, array with schedule)
- Test: Cancel schedule (assert 200, status = 'cancelled')
- Test: Unauthorized access (assert 403 for non-admin)
- Test: Invalid flag (assert 404 for non-existent flag)
- Test: Invalid scheduledAt (assert 400 for past time)
- Test: Invalid rolloutPercentage (assert 400 for out-of-range value)

**AC19**: Cron job integration tests
- Test: Create schedule with past scheduled_at, invoke cron handler, assert schedule applied and flag updated
- Test: Row locking - create 5 pending schedules, invoke cron concurrently, assert each processed once
- Test: Failed update - simulate database error, assert schedule status = 'failed'

## Reuse Plan

### Existing Components (Extended)
- Auth middleware from `apps/api/lego-api/middleware/auth.ts` (admin role validation)
- Feature flag service from WISH-2009 (flag update logic, cache invalidation)
- Redis cache from WISH-2009 (cache invalidation on flag updates)
- Database client from `packages/backend/database-schema/`
- Zod schema patterns from existing schemas

### New Components
- `schedule-service.ts` - Schedule CRUD logic
- `schedule-repository.ts` - Database/cache adapter for schedules
- `process-flag-schedules.ts` - Cron job handler

### Existing Patterns
- Hexagonal architecture (ports & adapters)
- Zod-first type definitions
- Hono routes with middleware
- CloudWatch structured logging
- PostgreSQL row-level locking

## Architecture Notes (Ports & Adapters)

### Hexagonal Architecture Compliance

**Domain Layer** (Business Logic):
- `apps/api/lego-api/domains/config/application/schedule-service.ts`
  - Schedule CRUD operations
  - Validation logic
  - Pure business logic - no HTTP/database coupling

**Adapter Layer** (Infrastructure):
- `apps/api/lego-api/domains/config/adapters/schedule-repository.ts`
  - Database adapter for schedule persistence
  - Row-level locking for concurrent access
  - Schedule status updates

**Port Layer** (Contracts):
- `apps/api/lego-api/domains/config/types.ts`
  - Define `Schedule`, `CreateScheduleRequest` types
  - Define Zod schemas for validation

**Cron Job Layer**:
- `apps/api/lego-api/jobs/process-flag-schedules.ts`
  - Invokes schedule service and flag service
  - Error handling and logging
  - No direct database access (uses repositories)

**No Architecture Violations:** Story extends existing config domain following established patterns from WISH-2009.

## Infrastructure Notes

### Lambda Cron Job

**Trigger:**
- EventBridge rule: `rate(1 minute)`
- Invokes Lambda function: `process-flag-schedules`

**Configuration:**
- Runtime: Node.js (same as API Lambda)
- Timeout: 2 minutes
- Memory: 512 MB
- Environment: DATABASE_URL, REDIS_URL (shared with API)

**Permissions:**
- Database read/write access (RDS IAM)
- Redis cache access
- CloudWatch logs write access

**Monitoring:**
- CloudWatch metric: SchedulesProcessedCount (count per execution)
- CloudWatch metric: SchedulesFailedCount (errors per execution)
- CloudWatch alarm: ScheduleBacklogExceeded (pending count > 500)

### Database Indexes

Indexes optimize cron job query performance:
- `idx_schedules_flag_id` - Fast lookup by flag
- `idx_schedules_scheduled_at` - Fast range query for pending schedules
- `idx_schedules_status` - Filter by status (pending/applied/failed/cancelled)

### Cache Invalidation

Schedule application triggers same cache invalidation as manual flag updates:
1. Update flag in database
2. Invalidate Redis key: `feature_flags:{environment}:{flagKey}`
3. Invalidate Redis key: `feature_flags:{environment}` (all flags)
4. Next API request fetches fresh flag state from database

## HTTP Contract Plan

### POST /api/admin/flags/:flagKey/schedule

**Request:**
```json
{
  "scheduledAt": "2026-01-30T15:00:00Z",
  "updates": {
    "enabled": true,
    "rolloutPercentage": 100
  }
}
```

**Response (201 Created):**
```json
{
  "id": "a1b2c3d4-...",
  "flagKey": "wishlist-gallery",
  "scheduledAt": "2026-01-30T15:00:00Z",
  "status": "pending",
  "updates": {
    "enabled": true,
    "rolloutPercentage": 100
  },
  "createdAt": "2026-01-28T10:00:00Z"
}
```

**Error Responses:**
- 400 Bad Request: Invalid scheduledAt (past time) or invalid updates (empty object, out-of-range rolloutPercentage)
- 403 Forbidden: Non-admin user
- 404 Not Found: Flag does not exist

---

### GET /api/admin/flags/:flagKey/schedule

**Response (200 OK):**
```json
[
  {
    "id": "a1b2c3d4-...",
    "flagKey": "wishlist-gallery",
    "scheduledAt": "2026-01-30T15:00:00Z",
    "status": "applied",
    "updates": {
      "enabled": true,
      "rolloutPercentage": 100
    },
    "createdAt": "2026-01-28T10:00:00Z",
    "appliedAt": "2026-01-30T15:00:30Z"
  },
  {
    "id": "e5f6g7h8-...",
    "flagKey": "wishlist-gallery",
    "scheduledAt": "2026-02-01T09:00:00Z",
    "status": "pending",
    "updates": {
      "enabled": false
    },
    "createdAt": "2026-01-28T12:00:00Z"
  }
]
```

**Error Responses:**
- 403 Forbidden: Non-admin user
- 404 Not Found: Flag does not exist

---

### DELETE /api/admin/flags/:flagKey/schedule/:scheduleId

**Response (200 OK):**
```json
{
  "id": "e5f6g7h8-...",
  "flagKey": "wishlist-gallery",
  "scheduledAt": "2026-02-01T09:00:00Z",
  "status": "cancelled",
  "updates": {
    "enabled": false
  },
  "createdAt": "2026-01-28T12:00:00Z"
}
```

**Error Responses:**
- 400 Bad Request: Cannot cancel schedule with status 'applied' or 'failed'
- 403 Forbidden: Non-admin user
- 404 Not Found: Schedule does not exist

## Seed Requirements

No seed data required. Schedules are created dynamically via admin API.

## Test Plan

_(Synthesized from `_pm/TEST-PLAN.md`)_

### Scope Summary
- **Endpoints:** 3 admin endpoints (POST, GET, DELETE schedule)
- **UI Touched:** No (backend only)
- **Data/Storage:** Yes (feature_flag_schedules table, feature_flags updates, Redis cache)
- **Infrastructure:** Cron job (Lambda + EventBridge), row-level locking

### Happy Path Tests

1. **Create one-time schedule**: POST schedule for 2 minutes in future, assert 201 status and pending status
2. **Cron job processes schedule**: Wait for cron execution, assert schedule applied and flag updated
3. **List schedules for flag**: GET schedules, assert array contains created schedule
4. **Cancel pending schedule**: DELETE schedule, assert status changed to 'cancelled'

### Error Cases

1. **Unauthorized access**: Non-admin user POST schedule, assert 403 Forbidden
2. **Invalid flag key**: POST schedule for non-existent flag, assert 404 Not Found
3. **Invalid scheduledAt**: POST schedule with past time, assert 400 Bad Request
4. **Invalid rolloutPercentage**: POST schedule with value > 100, assert 400 Bad Request
5. **Cancel non-existent schedule**: DELETE with invalid ID, assert 404 Not Found
6. **Cron job handles failed update**: Simulate database error, assert schedule status = 'failed'

### Edge Cases

1. **Concurrent cron execution**: Create 5 pending schedules, trigger cron twice, assert each processed once (row locking)
2. **Schedule at minute boundary**: Create schedule at exact minute, verify processed within 60 seconds
3. **Cancel already-applied schedule**: Attempt DELETE on applied schedule, assert 400 Bad Request
4. **Large batch of schedules**: Create 100 pending schedules, verify cron processes all within timeout
5. **Schedule updates multiple properties**: Create schedule with both enabled and rolloutPercentage, verify both updated atomically
6. **Empty updates object**: POST schedule with empty updates, assert 400 Bad Request

### Required Tooling Evidence

**Backend HTTP Tests (`__http__/feature-flag-scheduling.http`):**
- Minimum 7 HTTP requests covering CRUD operations and error cases
- Assert status codes: 201, 200, 400, 403, 404
- Assert schedule properties: id, flagKey, scheduledAt, status, updates

**Backend Integration Tests:**
- Cron job processing: Create schedule, invoke handler, assert applied
- Row locking: Concurrent cron execution, assert no duplicates
- Failed updates: Simulate errors, assert failed status

**Frontend Tests:**
- N/A (no user-facing UI)

## UI/UX Notes

_(Synthesized from `_pm/UIUX-NOTES.md`)_

**Verdict:** SKIPPED - This story does not touch user-facing UI.

**Justification:** WISH-2119 implements backend infrastructure only (admin API endpoints, cron job, database schema). No user-facing components or pages created. All endpoints require admin authentication.

**Future UI/UX:** Admin dashboard for schedule management deferred to Phase 3+ (per WISH-2009 follow-up stories). Future UI may include calendar view, timeline visualization, and bulk operations.

## Risks & Mitigations

_(Synthesized from `_pm/DEV-FEASIBILITY.md`)_

### MVP-Critical Risks

1. **Cron job timing precision**
   - Risk: Schedules may execute up to 60 seconds after scheduled_at time (cron runs every 1 minute)
   - Mitigation: Document acceptable delay window (±60 seconds) in API docs
   - Severity: Low (acceptable for MVP use cases)

2. **Failed flag update handling**
   - Risk: Failed schedules require manual intervention (no automatic retry)
   - Mitigation: Log detailed errors to CloudWatch, document manual retry process
   - Severity: Medium (admin must monitor failed schedules)

3. **Concurrent schedule creation**
   - Risk: Two admins create overlapping schedules for same flag, causing unexpected flag state
   - Mitigation: Document admin best practices (check existing schedules first)
   - Severity: Low (admin coordination expected)

4. **Cache invalidation lag**
   - Risk: Users may see stale flag state for up to 5 minutes after schedule applies (Redis TTL)
   - Mitigation: Accept 5-minute lag (matches WISH-2009 design), document in API
   - Severity: Low (acceptable for MVP)

5. **No audit trail**
   - Risk: Cannot determine which admin created/cancelled schedules
   - Mitigation: Log schedule CRUD to CloudWatch structured logs, defer audit table to WISH-2019
   - Severity: Low (workaround via CloudWatch logs)

## Open Questions

None - all decisions finalized for MVP scope.

## Definition of Done

- [ ] All 19 Acceptance Criteria pass
- [ ] Backend: 10+ unit tests pass (schedule service, cron job handler)
- [ ] Backend: HTTP integration tests pass (`.http` file with 7+ requests)
- [ ] Backend: Cron job integration tests pass (schedule processing, row locking, error handling)
- [ ] Database migration created and applied (feature_flag_schedules table)
- [ ] Cron job Lambda deployed with EventBridge trigger (rate(1 minute))
- [ ] Schema alignment test passes (frontend ↔ backend)
- [ ] TypeScript compilation passes
- [ ] ESLint passes
- [ ] Code review approved

## Follow-up Stories (Future)

### Phase 4+
- Recurring schedules (cron-like syntax)
- Schedule preview endpoint (simulate flag state)
- Bulk schedule creation (multiple schedules in single API call)
- Automatic retry for failed schedules (exponential backoff)
- Schedule cleanup cron job (retention policy enforcement)

### Integration with WISH-2019
- Audit logging: Track which admin created/cancelled schedules
- Add created_by / cancelled_by columns to schedules table

## Token Budget

### Phase Summary

| Phase | Estimated | Actual | Delta | Notes |
|-------|-----------|--------|-------|-------|
| Story Generation | ~12k | — | — | Worker coordination + synthesis |
| Elaboration | ~10k | — | — | Standard infrastructure story |
| Implementation | ~15k | — | — | Backend + cron job + migration + tests |
| Code Review | ~5k | — | — | Infrastructure story |
| **Total** | ~42k | — | — | Medium-sized story |

## Agent Log

| Timestamp (America/Denver) | Agent | Action | Outputs |
|---|---|---|---|
| 2026-01-28 00:00 | pm-story-generation-leader | Generated story from index entry | WISH-2119.md, _pm/*.md |

---

## Source

Follow-up from QA Elaboration of WISH-2009 (Items Marked Out-of-Scope)

**Original Finding:** "Flag scheduling (auto-enable/disable at scheduled times) - Manual only in MVP. Scheduling would allow flags to auto-enable/disable at specified times (e.g., holiday promotions)."

**Category:** Enhancement Opportunity

**Impact:** Low (convenience feature for Phase 3+)

**Effort:** Low (1-2 points)

**Use Cases:**
- Holiday promotions (auto-enable Dec 1, auto-disable Jan 1)
- Timed releases (auto-enable at 9am on release day)
- A/B test windows (auto-enable for 2 weeks, then disable)
- Maintenance windows (auto-disable during maintenance)

---

## QA Discovery Notes (for PM Review)

_Added by QA Elaboration on 2026-01-31_

### Gaps Identified

| # | Finding | User Decision | Notes |
|---|---------|---------------|-------|
| — | No gaps identified | Not Reviewed | Core journey is complete: Admin creates schedule → Cron job processes → Flag updated automatically |

### Enhancement Opportunities

| # | Finding | User Decision | Notes |
|---|---------|---------------|-------|
| 1 | Recurring schedules (cron-like syntax) | Not Reviewed | Deferred to Phase 4+ follow-up story |
| 2 | Schedule preview endpoint (simulate flag state) | Not Reviewed | Deferred to Phase 4+ follow-up story |
| 3 | Bulk schedule creation | Not Reviewed | Deferred to Phase 4+ follow-up story |
| 4 | Automatic retry for failed schedules | Not Reviewed | Deferred to Phase 4+ follow-up story |
| 5 | Schedule audit logging with admin tracking | Not Reviewed | Deferred to WISH-2019 integration story |
| 6 | Admin dashboard for schedule management | Not Reviewed | Deferred to Phase 3+ follow-up story |

### Follow-up Stories Suggested

- [x] Schedule UI/UX (admin dashboard for schedule management, calendar view, timeline visualization) → WISH-20220
- [ ] Recurring schedules (cron-like syntax for automated recurring flag updates)
- [x] Schedule preview endpoint (simulate flag state before schedule applies) → WISH-20240
- [x] Bulk schedule creation (multiple schedules in single API call) → WISH-20250
- [x] Automatic retry mechanism (exponential backoff for failed schedules) → WISH-20260
- [x] Schedule cleanup cron job (retention policy enforcement, automatic purging of old schedules) → WISH-20270
- [x] Integration with WISH-2019 (audit logging: track which admin created/cancelled schedules) → WISH-20280

### Items Marked Out-of-Scope

- Recurring schedules: One-time schedules only in MVP, cron-like syntax deferred to future iterations
- Real-time notifications: CloudWatch logs only in MVP, WebSocket/push deferred
- Automatic retry: Manual intervention required for failed schedules in MVP
