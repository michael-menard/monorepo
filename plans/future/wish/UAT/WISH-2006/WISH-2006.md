---
doc_type: story
title: "WISH-2006: Accessibility"
story_id: WISH-2006
story_prefix: WISH
status: ready-for-qa
e2e_required: true
phase: 5
created_at: "2026-01-30T15:00:00-07:00"
updated_at: "2026-01-31T22:45:00-07:00"
depends_on: [WISH-2005]
estimated_points: 5
---

# WISH-2006: Accessibility

## Context

The wishlist gallery (built in WISH-2005) currently relies on mouse interaction for all user actions. This creates a significant barrier for users who:
- Cannot use a mouse (motor disabilities)
- Rely on keyboard-only navigation
- Use screen readers (blind or low vision users)
- Need WCAG AA compliance for institutional/legal requirements

This story adds a comprehensive accessibility layer on top of the existing wishlist UI, ensuring all functionality is available via keyboard navigation, properly announced to screen readers, and meets WCAG 2.1 AA standards.

---

## Goal

Enable full keyboard-only navigation and screen reader support for the wishlist gallery, ensuring WCAG AA compliance without requiring any mouse interaction.

**Success Criteria:**
- Users can browse gallery, add items, mark items as "Got It", and delete items using only keyboard
- Screen reader users receive clear announcements for all state changes
- All interactive elements have proper ARIA labels
- WCAG AA color contrast requirements are met (4.5:1 for normal text, 3:1 for large text)
- Automated accessibility tests pass (axe-core)

---

## Non-Goals

- WCAG AAA compliance (stricter 7:1 contrast) - defer to future story
- Voice control support - defer to future story
- Custom keyboard shortcut configuration - defer to future story
- Automated screen reader testing (@guidepup) - manual testing sufficient for MVP
- Advanced ARIA features (landmarks, skip links, heading hierarchy) - defer to future story
- High contrast theme or forced colors mode - defer to future story

---

## Scope

### Packages Affected

**Frontend:**
- `apps/web/app-wishlist-gallery` - Add keyboard navigation and ARIA support to existing components

**No backend changes** - This is a frontend-only story.

### Components Modified

**Existing Components (enhance with accessibility):**
- `WishlistGallery` - Add roving tabindex keyboard navigation
- `WishlistCard` - Add ARIA labels and focus styles
- `AddItemModal` - Verify focus trap and ARIA announcements
- `EditItemModal` - Verify focus trap and ARIA announcements
- `DeleteConfirmModal` - Verify focus trap and ARIA announcements
- `GotItModal` - Verify focus trap and ARIA announcements

**New Utilities:**
- `src/hooks/useRovingTabIndex.ts` - Manages 2D grid keyboard navigation with arrow keys
- `src/hooks/useKeyboardShortcuts.ts` - Global keyboard shortcut manager
- `src/hooks/useAnnouncer.ts` - Screen reader live region manager
- `src/utils/a11y.ts` - ARIA label generators and accessibility helpers

### Infrastructure

**No infrastructure changes.**

**Testing:**
- New Playwright test suite: `e2e/accessibility.spec.ts`
- New unit tests for accessibility hooks
- axe-core integration in CI pipeline

---

## Acceptance Criteria

### Keyboard Navigation

- [ ] Arrow keys navigate gallery grid in 2D (Up, Down, Left, Right move between cards)
- [ ] Tab key enters gallery and focuses first or last-focused item
- [ ] Home key jumps to first item in gallery
- [ ] End key jumps to last item in gallery
- [ ] Only one item has `tabindex="0"` at a time (roving tabindex pattern)
- [ ] Focused item has visible focus indicator (ring with sufficient contrast)

### Keyboard Shortcuts

- [ ] `A` key opens Add Item modal (when gallery is focused)
- [ ] `Enter` key opens detail view for focused item
- [ ] `G` key opens Got It modal for focused item
- [ ] `Delete` key opens delete confirmation for focused item
- [ ] `Escape` key closes any open modal
- [ ] Shortcuts only activate when gallery container has focus (not in form inputs)

### Modal Focus Management

- [ ] Tab cycles through modal elements only (doesn't escape to page)
- [ ] Shift+Tab reverse cycles through modal elements
- [ ] First focusable element receives focus when modal opens
- [ ] Focus returns to trigger element when modal closes (Escape or button click)
- [ ] Focus fallback works when trigger element is deleted (moves to next item)

### Screen Reader Announcements

- [ ] Item focus announces: "[Title], [price], [pieces] pieces, priority [n] of [total]"
- [ ] Priority change announces: "Priority updated. [Item] is now priority 1 of [total]"
- [ ] Item deleted announces: "Item deleted. [Next Item] selected."
- [ ] Item added announces: "Item added to wishlist."
- [ ] Filter/sort change announces: "Showing [count] items sorted by [method]"
- [ ] Announcements use `aria-live="polite"` region with `role="status"` and `aria-atomic="true"`

### ARIA Labels

- [ ] All buttons have `aria-label` or visible text
- [ ] Gallery grid has `role="list"` with `aria-label="Wishlist items"`
- [ ] Each card has accessible name via `aria-label` or `aria-labelledby`
- [ ] Form inputs have associated labels (`<label>` or `aria-label`)
- [ ] Modal dialogs have `aria-labelledby` pointing to title

### WCAG AA Compliance

- [ ] All text meets 4.5:1 contrast ratio (normal text)
- [ ] Large text meets 3:1 contrast ratio
- [ ] Focus ring color meets contrast requirements on all backgrounds
- [ ] axe-core automated scan reports zero violations
- [ ] Focus ring uses design system token: `ring-2 ring-sky-500 ring-offset-2`

### Testing

- [ ] Playwright E2E tests pass for all keyboard interactions
- [ ] Unit tests pass for `useRovingTabIndex`, `useKeyboardShortcuts`, `useAnnouncer` hooks
- [ ] axe-core integration in CI passes
- [ ] Manual VoiceOver testing on macOS (if available - best effort)
- [ ] Manual NVDA testing on Windows (if available - best effort)

---

## Reuse Plan

### From Existing Packages

**`@repo/ui/_primitives`:**
- Use `Dialog` component (Radix UI) - has built-in focus trap and Escape handling
- Use `Button` component - already has focus styles
- Use `VisuallyHidden` component for sr-only announcements (if available)

**`@repo/accessibility` (if it exists):**
- Reuse focus management utilities
- Reuse ARIA helper functions
- Reuse WCAG contrast validation utilities

**If `@repo/accessibility` doesn't exist:**
- Create utilities in app-local `utils/a11y/`
- Plan to migrate to shared package in future story (when multiple apps need accessibility)

### New Utilities to Create

**Reusable Hooks (candidates for future `@repo/accessibility` package):**
- `useRovingTabIndex(items, options)` - 2D grid keyboard navigation
- `useKeyboardShortcuts(shortcuts)` - Global shortcut manager
- `useAnnouncer()` - Returns `announce(message, priority)` for screen reader
- `useFocusReturn(isOpen, triggerRef)` - Focus management for modals

**ARIA Utilities:**
- `generateAriaLabel(item)` - Generate accessible label for wishlist items
- `announceToScreenReader(message, priority)` - Helper for live regions

---

## Architecture Notes

### Roving Tabindex Pattern

Implements WAI-ARIA roving tabindex pattern for 2D grid navigation:

1. **Container** has `tabindex={0}` to receive initial focus
2. **Active item** has `tabindex={0}`, all others have `tabindex={-1}`
3. **Arrow keys** move focus and update tabindex values
4. **Only one focusable item** in tab order at any time

**Implementation:**

```typescript
function useRovingTabIndex(items: any[], options?: { columns?: number }) {
  const [activeIndex, setActiveIndex] = useState(0)

  const handleKeyDown = (e: KeyboardEvent) => {
    switch (e.key) {
      case 'ArrowUp':
        e.preventDefault()
        setActiveIndex(prev => Math.max(0, prev - columns))
        break
      case 'ArrowDown':
        e.preventDefault()
        setActiveIndex(prev => Math.min(items.length - 1, prev + columns))
        break
      case 'ArrowLeft':
        e.preventDefault()
        setActiveIndex(prev => (prev === 0 ? items.length - 1 : prev - 1))
        break
      case 'ArrowRight':
        e.preventDefault()
        setActiveIndex(prev => (prev === items.length - 1 ? 0 : prev + 1))
        break
      case 'Home':
        e.preventDefault()
        setActiveIndex(0)
        break
      case 'End':
        e.preventDefault()
        setActiveIndex(items.length - 1)
        break
    }
  }

  return { activeIndex, handleKeyDown, getTabIndex: (index) => index === activeIndex ? 0 : -1 }
}
```

**Column Detection:**
- Use `ResizeObserver` to detect column count changes on responsive layouts
- CSS Grid: `grid-template-columns: repeat(auto-fill, minmax(300px, 1fr))`
- Calculate columns from actual rendered element positions

---

### Keyboard Shortcut Manager

Global keyboard event listener with focus-aware activation:

```typescript
function useKeyboardShortcuts(shortcuts: Record<string, () => void>) {
  useEffect(() => {
    const handleKeyDown = (e: KeyboardEvent) => {
      // Only activate if gallery container has focus (not input fields)
      if (e.target instanceof HTMLInputElement || e.target instanceof HTMLTextAreaElement) {
        return // Ignore shortcuts in form inputs
      }

      const handler = shortcuts[e.key.toLowerCase()]
      if (handler) {
        e.preventDefault()
        handler()
      }
    }

    document.addEventListener('keydown', handleKeyDown)
    return () => document.removeEventListener('keydown', handleKeyDown)
  }, [shortcuts])
}
```

**Usage:**
```typescript
useKeyboardShortcuts({
  a: openAddModal,
  g: openGotItModal,
  delete: openDeleteModal,
  escape: closeModal,
  enter: openDetailView,
})
```

---

### Screen Reader Announcements

Live region component for dynamic announcements:

```typescript
function useAnnouncer() {
  const [announcement, setAnnouncement] = useState('')

  const announce = (message: string, priority: 'polite' | 'assertive' = 'polite') => {
    setAnnouncement(message)
    // Clear after announcement to allow same message to be announced again
    setTimeout(() => setAnnouncement(''), 100)
  }

  return { announcement, announce }
}
```

**Component:**
```jsx
<div
  role="status"
  aria-live="polite"
  aria-atomic="true"
  className="sr-only" // visually hidden
>
  {announcement}
</div>
```

---

### Modal Focus Trap

Radix Dialog (via shadcn) provides built-in focus trap:

```jsx
<Dialog
  open={isOpen}
  onOpenChange={setIsOpen}
  onOpenAutoFocus={(e) => {
    // Focus first input when modal opens
    const firstInput = e.currentTarget.querySelector('input')
    firstInput?.focus()
  }}
  onCloseAutoFocus={(e) => {
    // Return focus to trigger element
    // Radix handles this automatically unless overridden
  }}
>
  {/* modal content */}
</Dialog>
```

**Focus Return Edge Case:**
If trigger element is deleted (e.g., item is removed), fallback to next item:

```typescript
const handleDelete = async () => {
  const nextItem = getNextItem(currentIndex)
  await deleteItem(itemId)

  // After deletion, focus next item
  if (nextItem) {
    nextItem.focus()
  } else {
    // Gallery is empty, focus Add button
    addButtonRef.current?.focus()
  }
}
```

---

## HTTP Contract Plan

**No API changes** - This story is frontend-only.

---

## Seed Requirements

**No seed data changes** - Uses existing wishlist items for testing.

**Test Data:**
- Ensure test database has at least 9 items for 3x3 grid testing
- Include items with various priorities for reorder testing

---

## Test Plan

### Happy Path Tests

#### Test 1: Keyboard Navigation - Arrow Keys in Gallery Grid

**Setup:**
- Load wishlist gallery with at least 9 items (3x3 grid)
- Focus on first item in gallery

**Action:**
- Press Arrow Down → focus moves to item directly below
- Press Arrow Right → focus moves to next item in row
- Press Arrow Up → focus moves to item directly above
- Press Arrow Left → focus moves to previous item in row

**Expected:**
- Focus moves correctly in 2D grid
- Only one item has `tabindex="0"` at a time
- Focused item has visible focus ring
- Screen reader announces: "[Title], [price], [pieces] pieces, priority [n] of [total]"

**Evidence:**
- Playwright test captures focus state after each arrow key
- Screenshot showing focus ring on correct item
- Assertion: `await expect(page.locator('[data-testid="wishlist-card"]:nth-child(2)')).toBeFocused()`

---

#### Test 2: Keyboard Shortcuts - Add Item (A key)

**Setup:**
- Load wishlist gallery
- Focus anywhere in gallery

**Action:**
- Press 'A' key

**Expected:**
- Add Item modal opens
- Focus moves to first input field (Title)
- Modal has focus trap (Tab cycles through modal elements only)
- Screen reader announces: "Add Item. Enter set details."

**Evidence:**
- Playwright test: `await page.keyboard.press('a')`
- Assertion: `await expect(page.locator('[data-testid="add-item-modal"]')).toBeVisible()`
- Assertion: `await expect(page.locator('input[name="title"]')).toBeFocused()`

---

#### Test 3: Keyboard Shortcuts - Got It (G key)

**Setup:**
- Focus on a specific item using arrow keys

**Action:**
- Press 'G' key

**Expected:**
- "Got It" modal opens for the focused item
- Modal shows correct item details
- Focus moves to first input in modal
- Screen reader announces: "Mark [Item Title] as purchased"

**Evidence:**
- Playwright test verifies correct item is referenced in modal
- Assertion: modal title contains focused item's title

---

#### Test 4: Modal Focus Trap and Return

**Setup:**
- Open any modal (Add Item)

**Action:**
- Press Tab repeatedly to cycle through focusable elements
- Press Shift+Tab to reverse cycle
- Press Escape to close modal

**Expected:**
- Tab cycles through modal elements only (doesn't escape to page)
- Shift+Tab reverse cycles
- Escape closes modal and returns focus to trigger element
- Screen reader announces modal close

**Evidence:**
- Playwright test tracking `document.activeElement` during Tab
- Assertion: after Escape, focus returns to original trigger

---

#### Test 5: WCAG AA Color Contrast

**Setup:**
- Load wishlist gallery

**Action:**
- Run axe accessibility scan

**Expected:**
- No color contrast violations (WCAG AA: 4.5:1 for normal text, 3:1 for large text)
- All text elements meet contrast requirements

**Evidence:**
- axe-core integration: `await new AxeBuilder({ page }).analyze()`
- Assertion: `violations.length === 0` for contrast rules

---

### Error Cases

#### Error 1: Keyboard Navigation with Empty Gallery

**Setup:**
- Empty wishlist (no items)

**Action:**
- Press arrow keys

**Expected:**
- No JavaScript errors
- Screen reader announces: "Wishlist is empty. Press A to add an item."
- Arrow keys do nothing gracefully

**Evidence:**
- Console error check in Playwright
- Assertion on aria-live announcement

---

#### Error 2: Focus Lost After Item Deletion

**Setup:**
- Focus on item 5 of 10
- Delete that item

**Action:**
- Confirm deletion

**Expected:**
- Item is removed
- Focus moves to next item (previously item 6, now item 5)
- If last item deleted, focus moves to new last item
- Screen reader announces: "Item deleted. [Next Item Title] selected."

**Evidence:**
- Playwright checks `document.activeElement` after deletion
- Assertion: focus is on a valid item, not lost to body

---

### Edge Cases

#### Edge 1: Roving Tabindex with Single Item

**Setup:**
- Gallery with exactly 1 item

**Action:**
- Press all arrow keys (Up, Down, Left, Right)

**Expected:**
- Focus stays on the single item (no crashes)
- No console errors

**Evidence:**
- Playwright test with 1-item gallery
- Console error check

---

#### Edge 2: Multiple Rapid Keypress

**Setup:**
- Gallery is focused

**Action:**
- Rapidly press Arrow Down 10 times

**Expected:**
- Focus moves correctly through items
- No skipped items or race conditions
- Focus settles on correct item (10 items down, or last item if fewer)

**Evidence:**
- Playwright test with rapid keypresses
- Verify final focused item matches expected position

---

### Required Tooling Evidence

**Playwright Runs:**
- `apps/web/app-wishlist-gallery/e2e/accessibility.spec.ts`

**Assertions:**
- Arrow key navigation moves focus correctly (2D grid)
- Home/End keys work
- Shortcuts (A, G, Delete, Enter, Escape) trigger correct actions
- Modal focus trap: Tab doesn't escape modal
- Focus return: Escape returns focus to trigger element
- axe-core scan passes (no violations)
- aria-live regions announce state changes
- All interactive elements have accessible labels

**Artifacts:**
- Screenshots of focus states (visual regression)
- Accessibility tree snapshots (Playwright)
- axe report (JSON)
- Video recording of keyboard navigation flow

**Manual Testing (Best Effort):**
- VoiceOver on macOS: Full navigation flow
- NVDA on Windows: Full navigation flow
- Document which screen reader versions were tested

---

## UI/UX Notes

### Design System Compliance

**Focus Ring:**
- Use design system token: `ring-2 ring-sky-500 ring-offset-2`
- Verify contrast ratio: 4.5:1 on lightest background
- Offset: 2px to avoid overlap with card content

**Color Tokens:**
- All colors must use Tailwind design tokens (no hardcoded hex)
- Focus indicator: `ring-sky-500` (from sky/teal palette)

**Primitives Import:**
- All shadcn components imported from `@repo/ui/_primitives`
- `Dialog`, `Button`, `VisuallyHidden` (if available)

### Responsive Behavior

**Grid Column Detection:**
- Use CSS Grid auto-fill: `repeat(auto-fill, minmax(300px, 1fr))`
- Detect actual column count with ResizeObserver
- Update roving tabindex logic when column count changes
- Test with 3 columns (desktop), 2 columns (tablet), 1 column (mobile)

### Keyboard Shortcut Scope

**Decision:** Gallery-scoped activation
- Shortcuts only work when gallery container has focus
- User must Tab into gallery first, then use shortcuts
- Prevents conflicts with browser shortcuts
- Prevents shortcuts firing in form inputs

**Implementation:**
- Check `event.target` - if input/textarea, ignore shortcuts
- Document shortcuts in tooltips: "Add Item (A)"

---

## Infrastructure Notes

**No infrastructure changes.**

**CI/CD:**
- Add axe-core scan to CI pipeline
- Fail build on accessibility violations
- Run Playwright accessibility tests on every PR

---

## Risk Notes

### Roving Tabindex Grid Complexity

**Risk:** Calculating grid positions (row/column) for 2D arrow navigation is error-prone with responsive layouts.

**Mitigation:**
- Use ResizeObserver to detect column count changes
- Comprehensive unit tests for grid calculation logic
- Test with 1, 2, 3, 4, 5+ column layouts
- Consider using `react-aria` GridCollection if custom implementation is too complex

**Fallback:** Simplify to linear navigation (Left/Right only, ignore Up/Down) if 2D navigation proves too complex.

---

### Screen Reader Testing Coverage

**Risk:** Manual VoiceOver/NVDA testing requires specific hardware/software we may not have.

**Mitigation:**
- Use axe-core for automated ARIA/WCAG checks (must pass)
- Test aria-live regions programmatically (check DOM textContent)
- Document screen reader versions tested (if any)
- Consider cloud-based testing (Assistiv Labs) if budget allows

**MVP Acceptance:** Automated tests pass, manual testing is best-effort.

---

### Focus Return After Item Deletion

**Risk:** Returning focus to correct element after modal close is complex when item is deleted.

**Mitigation:**
- Store reference to next item before deletion
- Check if next item exists after delete, fallback to previous
- If gallery becomes empty, focus Add button
- Unit tests for all deletion scenarios

---

## Definition of Done

- [ ] All acceptance criteria met
- [ ] Roving tabindex implemented and tested (arrow keys, Home/End)
- [ ] All keyboard shortcuts working (A, G, Delete, Enter, Escape)
- [ ] Screen reader announcements working (aria-live regions)
- [ ] Modal focus trap implemented (Tab cycles, Escape returns focus)
- [ ] ARIA labels on all interactive elements
- [ ] Color contrast verified (axe-core passes)
- [ ] Playwright E2E tests pass (all keyboard interactions)
- [ ] Unit tests pass for hooks (useRovingTabIndex, useKeyboardShortcuts, useAnnouncer)
- [ ] axe-core integration in CI passes
- [ ] Manual VoiceOver/NVDA testing completed (if available - best effort)
- [ ] All tests passing (unit, integration, E2E)
- [ ] Code reviewed
- [ ] Design system compliance verified (token-only colors, _primitives imports)
- [ ] Documentation updated (keyboard shortcuts documented in UI)

---

## Token Budget

### Phase Summary

| Phase | Estimated | Actual | Delta | Notes |
|-------|-----------|--------|-------|-------|
| Story Gen | ~8k | — | — | PM artifacts + synthesis |
| Elaboration | ~10k | — | — | Complex accessibility patterns |
| Implementation | ~20k | — | — | Multiple hooks, utilities, component updates |
| Code Review | ~8k | — | — | Accessibility verification |
| Testing | ~10k | — | — | E2E tests + manual screen reader testing |
| **Total** | ~56k | — | — | — |

### Actual Measurements

| Date | Phase | Before | After | Delta | Notes |
|------|-------|--------|-------|-------|-------|

---

## QA Discovery Notes (for PM Review)

_Added by QA Elaboration on 2026-01-31_

### Gaps Identified

| # | Finding | User Decision | Notes |
|---|---------|---------------|-------|
| 1 | Missing decision: Responsive grid column detection strategy | Add as AC | CSS Grid auto-fill + ResizeObserver strategy specified in Architecture Notes |
| 2 | Missing decision: Keyboard shortcut activation scope | Add as AC | Gallery-scoped shortcuts specified in Architecture Notes (active only when gallery has focus) |
| 3 | @repo/accessibility package reuse not evaluated | Add as AC | Existing exports evaluated: drag-and-drop specific, don't cover this use case. New hooks (useRovingTabIndex, useKeyboardShortcuts, useAnnouncer) will be created app-local first. |

### Enhancement Opportunities

| # | Finding | User Decision | Notes |
|---|---------|---------------|-------|
| 1 | Migrate accessibility hooks to @repo/accessibility | Deferred to future | Once proven in production, migrate useRovingTabIndex, useKeyboardShortcuts, useAnnouncer to shared package |
| 2 | React Aria GridCollection integration | Deferred to future | Consider for more robust grid keyboard navigation if 2D grid proves complex |
| 3 | WCAG AAA compliance | Deferred to future | Consider future story if required by enterprise customers (currently WCAG AA only) |
| 4 | Automated screen reader testing (@guidepup) | Deferred to future | Manual testing sufficient for MVP. Consider once @guidepup library matures. |
| 5 | Advanced ARIA features (landmarks, skip links, heading hierarchy) | Deferred to future | Out of scope for MVP. Consider future story for semantic navigation enhancements. |
| 6 | Voice control support | Deferred to future | Out of scope. Consider if user research indicates demand. |
| 7 | Custom keyboard shortcut configuration | Deferred to future | Out of scope. Consider future story to allow user remapping. |
| 8 | High contrast theme / forced colors mode | Deferred to future | Out of scope. Consider future story for Windows High Contrast Mode support. |
| 9 | Keyboard navigation hints/tooltips | Deferred to future | Consider adding tooltips on first visit to improve shortcut discoverability |
| 10 | Reduced motion preference support | Deferred to future | Consider supporting `prefers-reduced-motion` media query |

### Follow-up Stories Suggested

- [x] Migrate accessibility hooks to @repo/accessibility (future) → WISH-20590
- [x] Add WCAG AAA compliance support (future) → WISH-20600
- [x] Implement automated screen reader testing with @guidepup (future) → WISH-20610
- [x] Add advanced ARIA features and semantic landmarks (future) → WISH-20620

### Items Marked Out-of-Scope

- WCAG AAA compliance: MVP targets WCAG AA. Stricter compliance deferred to future.
- Voice control: Deferred to future. MVP focuses on keyboard navigation.
- Custom shortcut configuration: Deferred to future. MVP uses fixed shortcuts.
- Automated screen reader testing: Manual testing sufficient for MVP.
- Advanced ARIA features: Out of scope. MVP focuses on basic navigation and labels.
- High contrast theme: Out of scope. MVP uses standard Tailwind theme.

---

## Architecture Notes (from QA Elaboration)

### Grid Column Detection Strategy

**Decision**: Use CSS Grid `auto-fill` with ResizeObserver for responsive column detection.

The gallery uses CSS Grid with `repeat(auto-fill, minmax(300px, 1fr))` for responsive column wrapping. A ResizeObserver monitors container width changes and calculates the actual column count by checking rendered element positions. The roving tabindex logic updates when the column count changes. This approach handles all responsive scenarios (3 columns on desktop, 2 on tablet, 1 on mobile) without hardcoded breakpoints.

### Keyboard Shortcut Activation Scope

**Decision**: Gallery-scoped activation (shortcuts only active when gallery container has focus).

Keyboard shortcuts (A, G, Delete, Enter, Escape) only activate when the gallery container has focus. Users must Tab into the gallery first, then use shortcuts. The implementation checks `event.target` and ignores shortcuts when focus is on input/textarea elements. This prevents conflicts with browser shortcuts and assistive technology while following standard accessibility patterns.

### @repo/accessibility Package Reuse

**Decision**: Existing @repo/accessibility exports are drag-and-drop specific and don't cover this use case.

Evaluation shows existing exports (`useKeyboardDragAndDrop`, `KeyboardDragDropArea`) are drag-and-drop specific. New hooks (`useRovingTabIndex`, `useKeyboardShortcuts`, `useAnnouncer`) are needed for roving tabindex grid navigation, global shortcuts, and screen reader announcements. These will be created app-local in `src/hooks/` first. Once proven in production and when reuse patterns emerge across apps, migration to shared `@repo/accessibility` package is planned as future work.

---

## Agent Log

Append-only.

| Timestamp (America/Denver) | Agent | Action | Outputs |
|---|---|---|---|
| 2026-01-30 15:00 | pm-story-generation-leader | Generated story with worker artifacts | WISH-2006.md, TEST-PLAN.md, UIUX-NOTES.md, DEV-FEASIBILITY.md, FUTURE-UIUX.md, FUTURE-RISKS.md |
| 2026-01-31 18:00 | elab-completion-leader | Elaboration complete. Applied user decisions. Created ELAB-WISH-2006.md. Updated story with Architecture Notes. | ELAB-WISH-2006.md, WISH-2006.md (appended QA notes and Architecture Notes), status: ready-to-work |

---
