---
doc_type: story
title: "WISH-2070: Fix Pre-existing TypeScript Errors in app-wishlist-gallery"
story_id: WISH-2070
story_prefix: WISH
status: backlog
e2e_required: false
phase: 5
created_at: "2026-02-09T00:00:00-07:00"
updated_at: "2026-02-09T00:00:00-07:00"
depends_on: []
estimated_points: 2
---

# WISH-2070: Fix Pre-existing TypeScript Errors in app-wishlist-gallery

## Context

`pnpm check-types` fails with 52 pre-existing TypeScript errors in `app-wishlist-gallery`. These errors are scattered across the app and shared packages, predate recent feature work, and block the CI quality gate for all in-flight stories (including WISH-2045 UAT).

## Goal

Fix all TypeScript errors so `pnpm check-types` passes with 0 errors for `app-wishlist-gallery`.

## Non-goals

- Not refactoring working code beyond what is needed to fix type errors
- Not adding new features or changing runtime behavior
- Not fixing warnings (only errors)

## Scope

### Category 1: `@repo/logger` missing type declarations (16 errors)

**Root Cause:** `packages/core/logger` does not emit `.d.ts` type declarations, causing TS7016 in all consumers.

**Files affected:**
- `apps/web/app-wishlist-gallery/src/components/FilterPanel/index.tsx`
- `apps/web/app-wishlist-gallery/src/components/ResponsiveImage/index.tsx`
- `apps/web/app-wishlist-gallery/src/hooks/useLocalStorage.ts`
- `apps/web/app-wishlist-gallery/src/main.tsx`
- `apps/web/app-wishlist-gallery/src/store/middleware/draftPersistenceMiddleware.ts`
- `apps/web/app-wishlist-gallery/src/store/middleware/__tests__/draftPersistenceMiddleware.test.ts`
- `packages/core/api-client/src/auth/cognito-integration.ts`
- `packages/core/api-client/src/config/environments.ts`
- `packages/core/api-client/src/retry/retry-logic.ts`
- `packages/core/api-client/src/rtk/base-query.ts`
- `packages/core/app-component-library/src/content/AppSafeContent.tsx`
- `packages/core/app-component-library/src/errors/error-boundary.tsx`
- `packages/core/app-component-library/src/forms/AppForm.tsx`
- `packages/core/app-component-library/src/inputs/AppInput.tsx`
- `packages/core/app-component-library/src/inputs/AppLabel.tsx`
- `packages/core/app-component-library/src/inputs/AppSelect.tsx`
- `packages/core/app-component-library/src/inputs/AppTextarea.tsx`
- `packages/core/gallery/src/hooks/useColumnOrder.ts`
- `packages/core/gallery/src/hooks/useFirstTimeHint.ts`

**Fix:** Either add `declaration: true` to `@repo/logger` tsconfig or add a `.d.ts` declaration file.

### Category 2: Unused imports in test files (4 errors)

- `src/contexts/__tests__/FeatureFlagContext.test.tsx` - unused `delay` (TS6133)
- `src/hooks/__tests__/useAnnouncer.test.tsx` - unused `waitFor` (TS6133)
- `src/hooks/__tests__/useFeatureFlag.test.tsx` - unused `vi` (TS6133)
- `src/hooks/__tests__/useKeyboardShortcuts.test.tsx` - unused `renderHook` (TS6133)

**Fix:** Remove the unused imports.

### Category 3: `CollectionPage` component type errors (2 errors)

- `src/pages/CollectionPage/index.tsx:113` - TS2739: Missing `label`/`onClick` properties
- `src/pages/CollectionPage/index.tsx:142` - TS2322: `itemTitle` prop doesn't exist on type

**Fix:** Update component usage to match current prop types.

### Category 4: `draftPersistenceMiddleware.test.ts` type errors (4 errors)

- `MockInstance` type incompatibility (TS2322)
- `unknown` not assignable to `string` (TS2345) x3

**Fix:** Add proper type annotations to mock instances.

### Category 5: `wishlistDraftSlice.test.ts` type errors (20+ errors)

- All errors are `unknown` not assignable to the expected state type (TS2345)
- Selector helper functions return `unknown` instead of typed state

**Fix:** Add proper type annotations to the state helper or use type assertions.

### Category 6: `AppToggleGroup` type mismatch (2 errors)

- `style` prop incompatible with Radix `ToggleGroupProps` (TS2430)
- `value` prop type mismatch (TS2322)

**Fix:** Update the `AppToggleGroupProps` interface to properly extend Radix types.

### Category 7: `api-client` unused imports (2 errors)

- `src/utils/authorization-errors.ts:1` - unused `z` (TS6133)
- `src/utils/authorization-errors.ts:7` - unused `AuthorizationErrorCode` (TS6133)

**Fix:** Remove unused imports.

## Acceptance Criteria

- [ ] `pnpm check-types` passes with 0 errors for `app-wishlist-gallery`
- [ ] No runtime behavior changes (types-only fixes)
- [ ] All existing tests continue to pass
- [ ] `@repo/logger` type declarations work for all consumer packages

## Test Plan

1. Run `pnpm check-types` and verify 0 errors
2. Run `pnpm test` to verify no regressions
3. Run `pnpm build` to verify production build succeeds

## Risks

- Category 1 (`@repo/logger`) fix may require rebuilding the logger package, which could affect other consumers
- Category 6 (`AppToggleGroup`) may need a Radix version check to ensure the fix is compatible
