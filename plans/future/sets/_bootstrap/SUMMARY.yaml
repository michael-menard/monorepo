schema: 2
feature_dir: "/Users/michaelmenard/Development/Monorepo/plans/future/sets"
prefix: "SETS"
phase: 2
phase_name: "Generation"
completed: "2026-01-25T23:58:00Z"

files_created:
  - path: "stories.index.md"
    stories: 17
  - path: "PLAN.meta.md"
  - path: "PLAN.exec.md"
  - path: "roadmap.md"

directories_created:
  - "backlog/"
  - "elaboration/"
  - "ready-to-work/"
  - "in-progress/"
  - "UAT/"

generation_summary:
  status: "GENERATION COMPLETE"
  total_stories: 17
  story_files_generated: 0
  index_files_generated: 4
  planning_documents_generated: 3

overview:
  total_stories: 17
  story_range: "SETS-1005 to SETS-1021"
  phases: 5
  critical_path_length: 4
  max_parallelization: 6
  sizing_warnings: 2

key_insights:
  - "Epic focuses on complete CRUD lifecycle for LEGO set collection management"
  - "Critical integration point with Wishlist epic for 'Got it' flow requires atomic transactions"
  - "Strong emphasis on optimistic UI updates and undo capabilities for build status and quantity"
  - "Accessibility and mobile responsiveness are first-class concerns throughout"
  - "Shared scraper service with Wishlist reduces duplication but creates dependency"
  - "MOC linking creates bidirectional relationship requiring careful state management"

phase_breakdown:
  phase_1_foundation:
    stories: ["SETS-1005", "SETS-1007", "SETS-1017"]
    description: "API endpoints, scraper integration, and UI scaffolding"
    complexity: "High (SETS-1007 has sizing warning)"

  phase_2_crud:
    stories: ["SETS-1006", "SETS-1009", "SETS-1010", "SETS-1011", "SETS-1012", "SETS-1013", "SETS-1014", "SETS-1015"]
    description: "Complete create/update/delete functionality with purchase tracking"
    complexity: "Medium to High (many parallel stories possible)"

  phase_3_integration:
    stories: ["SETS-1008", "SETS-1021"]
    description: "Wishlist 'Got it' flow with success experience"
    complexity: "High (SETS-1008 has sizing warning, transaction atomicity critical)"

  phase_4_advanced:
    stories: ["SETS-1018"]
    description: "Duplicate detection and intelligent quantity management"
    complexity: "Medium (UX complexity)"

  phase_5_polish:
    stories: ["SETS-1016", "SETS-1019", "SETS-1020"]
    description: "Stats, accessibility, and mobile optimization"
    complexity: "Medium (cross-cutting concerns)"

dependencies:
  critical_path:
    - story: "SETS-1007"
      reason: "Foundational API endpoints required by all CRUD features"
    - story: "SETS-1006"
      reason: "Purchase details form needed for Wishlist integration"
    - story: "SETS-1008"
      reason: "Core Wishlist integration enables primary use case"
    - story: "SETS-1021"
      reason: "Success UX completes the end-to-end flow"

  cross_epic:
    - epic: "Wishlist"
      stories: ["SETS-1008", "SETS-1021"]
      relationship: "Receives items via 'Got it' flow"
    - epic: "MOC Instructions"
      stories: ["SETS-1011"]
      relationship: "Bidirectional linking to track parts usage"
    - shared_service: "Scraper"
      stories: ["SETS-1005"]
      relationship: "Shared URL parsing and data extraction"

risks_summary:
  high_severity:
    - "RISK-001: Wishlist transaction atomicity (affects SETS-1008, SETS-1021)"

  medium_severity:
    - "RISK-002: Shared scraper dependency (affects SETS-1005)"
    - "RISK-003: Cross-epic coordination (affects SETS-1008, SETS-1011, SETS-1021)"
    - "RISK-004: Optimistic UI state management (affects SETS-1009, SETS-1010)"

  low_severity:
    - "RISK-005: Large collection performance (affects SETS-1007, SETS-1014, SETS-1016)"
    - "RISK-006: Duplicate detection UX confusion (affects SETS-1018)"

parallelization_strategy:
  group_1:
    stories: ["SETS-1005", "SETS-1007", "SETS-1017"]
    timing: "Start immediately"
    note: "Foundation work can proceed in parallel"

  group_2:
    stories: ["SETS-1006", "SETS-1013"]
    timing: "After group_1 (SETS-1005)"
    note: "Forms depend on add modal scaffolding"

  group_3:
    stories: ["SETS-1009", "SETS-1010", "SETS-1011", "SETS-1012", "SETS-1014", "SETS-1015"]
    timing: "After group_1 (SETS-1007)"
    note: "All CRUD features can proceed in parallel once API exists"

  group_4:
    stories: ["SETS-1008"]
    timing: "After group_2 (SETS-1006)"
    note: "Critical integration point - requires purchase details form"

  group_5:
    stories: ["SETS-1018"]
    timing: "After group_3 (SETS-1005, SETS-1010)"
    note: "Needs add modal and quantity management"

  group_6:
    stories: ["SETS-1016", "SETS-1019", "SETS-1020", "SETS-1021"]
    timing: "After groups 3-4"
    note: "Polish stories can mostly proceed in parallel"

story_categorization:
  backend_heavy:
    - "SETS-1007: Sets CRUD API Endpoints"
    - "SETS-1008: Wishlist 'Got it' Integration"
    - "SETS-1011: MOC Linking (backend portion)"

  frontend_heavy:
    - "SETS-1005: Add Modal with URL Scrape"
    - "SETS-1006: Purchase Details Form"
    - "SETS-1009: Build Status Toggle"
    - "SETS-1010: Quantity Stepper"
    - "SETS-1013: Manual Entry Form"
    - "SETS-1017: Empty States"
    - "SETS-1018: Duplicate Detection"
    - "SETS-1019: Keyboard & Accessibility"
    - "SETS-1020: Mobile Responsive"
    - "SETS-1021: Success Experience"

  full_stack:
    - "SETS-1011: MOC Linking Picker"
    - "SETS-1014: Sort & Filter"
    - "SETS-1015: Tag Management"
    - "SETS-1016: Collection Stats"

technical_notes:
  database:
    - "New table: sets (with full schema from data model)"
    - "New join table: set_moc_links (many-to-many)"
    - "Indexes needed: userId, setNumber for performance"

  shared_infrastructure:
    - "Scraper service (shared with Wishlist)"
    - "S3 image storage (shared)"
    - "Tag management system (shared)"
    - "Gallery package (shared sorting/filtering)"

  api_design:
    - "RESTful endpoints: /api/sets with CRUD operations"
    - "Specialized endpoints: /build-status, /quantity, /moc-links"
    - "Transaction endpoint: /from-wishlist"
    - "Query params for filtering: ?status=built&sort=purchaseDate"

  ux_patterns:
    - "Optimistic updates with rollback on failure"
    - "Toast notifications with undo actions (5 second window)"
    - "Celebration animations on milestone events (built status)"
    - "Segmented controls for status toggles"
    - "Stepper controls for quantity (+/- buttons + direct edit)"

recommended_order:
  sprint_1:
    - "SETS-1007: API foundation"
    - "SETS-1005: Add modal scaffolding"
    - "SETS-1017: Empty states (for testing)"

  sprint_2:
    - "SETS-1006: Purchase details"
    - "SETS-1012: Hard delete"
    - "SETS-1013: Manual entry"

  sprint_3:
    - "SETS-1009: Build status toggle"
    - "SETS-1010: Quantity stepper"
    - "SETS-1014: Sorting & filtering"

  sprint_4:
    - "SETS-1008: Wishlist integration (requires coordination)"
    - "SETS-1021: Success UX"

  sprint_5:
    - "SETS-1011: MOC linking (requires coordination)"
    - "SETS-1018: Duplicate detection"
    - "SETS-1015: Tag management"

  sprint_6:
    - "SETS-1019: Accessibility"
    - "SETS-1020: Mobile responsive"
    - "SETS-1016: Collection stats"

success_metrics:
  functionality:
    - "All 17 stories completed and tested"
    - "Wishlist integration working end-to-end"
    - "Zero data loss in 'Got it' transaction"
    - "Sub-100ms optimistic UI updates"

  quality:
    - "WCAG AA accessibility compliance"
    - "Mobile responsive on iOS and Android"
    - "Unit test coverage >80% for business logic"
    - "E2E tests for critical paths"

  user_experience:
    - "Celebration animation delights users"
    - "Undo actions prevent accidental data loss"
    - "Empty states guide new users effectively"
    - "Keyboard navigation fully functional"
