perspective: product
reviewer: product-agent
reviewed_at: "2026-01-25T23:00:00Z"
verdict: READY

executive_summary:
  status: "The SETS epic is well-structured, strategically aligned, and ready for implementation. The requirements are comprehensive, user-centric, and properly sequenced. MVP scope is appropriate and cross-epic dependencies are well-documented."
  key_strengths:
    - "Clear value proposition: enables collection management and transitions from Wishlist"
    - "Thoughtful MVP scope: core CRUD + essential features without over-engineering"
    - "Strong UX focus: optimistic updates, undo capabilities, delightful interactions"
    - "Comprehensive accessibility and mobile support from the ground up"
    - "Well-documented integration points with Wishlist and MOC Instructions"
  key_risks:
    - "High complexity in Wishlist integration (SETS-008) could block downstream features"
    - "Two stories marked with sizing warnings (SETS-007, SETS-008)"
    - "Shared scraper service reliability is critical path item"

findings:
  critical:
    - finding: "SETS-007 (API Endpoints) is the linchpin of 11 downstream stories. Any delays here will cascade significantly."
      impact: "Blocks Phase 3+ entirely. Critical path grows to 4+ stories."
      mitigation: "Front-load SETS-007, ensure schema finalization before implementation, parallel frontend work on UI structure (SETS-005, SETS-017)"
      story_id: "SETS-007"

    - finding: "SETS-008 (Wishlist 'Got it' Integration) requires atomic transaction handling and bidirectional coordination with Wishlist epic. Current Wishlist is in-progress, not complete."
      impact: "Risk of data loss during purchase transition; potential for split responsibility between epics."
      mitigation: "Align with Wishlist epic lead. Define transaction contract clearly (which system owns rollback logic?). SETS-008 should NOT start until Wishlist's POST /api/wishlist/:id/purchased is complete and tested."
      story_id: "SETS-008"

    - finding: "Shared scraper service is listed as dependency but not in scope for SETS epic. Assumes Wishlist epic will deliver or it already exists."
      impact: "SETS-005 and SETS-006 cannot proceed without working scraper. No fallback plan documented."
      mitigation: "Confirm scraper service status with architecture team. If not yet implemented, either add to SETS scope or explicitly defer SETS-005."
      story_id: "SETS-005"

  high:
    - finding: "Duplicate set detection (SETS-018) depends on both SETS-005 AND SETS-010, but the UX flow is complex. Users may be confused by 'add to quantity vs. create new entry' prompt."
      impact: "Could be implemented but with poor adoption if UX isn't clear. Increases cognitive load for power users."
      mitigation: "SETS-018 should include clear examples and explanatory text. Consider A/B testing this flow. May be better as Phase 5 (post-MVP) feature."
      priority: "Consider deferring to post-MVP"
      story_id: "SETS-018"

    - finding: "MOC linking (SETS-011) depends on MOC Instructions epic delivery. Cross-epic dependency not flagged as blocking."
      impact: "Cannot complete SETS-011 until MOC Instructions schema and endpoints exist. This blocks SETS-019 and SETS-020."
      mitigation: "Confirm MOC Instructions epic timeline. If delayed, SETS-011 becomes 'stub implementation' (UI ready, API waiting). Re-prioritize if MOC timeline is uncertain."
      story_id: "SETS-011"

    - finding: "SETS-016 (Collection Stats) marked as 'low priority' but missing from roadmap's Phase 5. May confuse prioritization."
      impact: "Unclear if this should be in MVP or truly deferred. Stats are nice-to-have but could drive engagement."
      mitigation: "Explicitly state: SETS-016 is post-MVP. If stats become high-value (e.g., for marketing), promote to Phase 4."
      story_id: "SETS-016"

    - finding: "Quantity stepper (SETS-010) defaults to quantity=1 but allows multiple of same set. No guidance on when users would prefer quantity vs. separate entries."
      impact: "Users might create duplicate entries instead of incrementing quantity, leading to data pollution."
      mitigation: "SETS-018 (duplicate detection) addresses this but should include onboarding prompt during first add. Consider tooltip: 'Same set, different price? Create separate entry.'"
      story_id: "SETS-010"

  medium:
    - finding: "Empty states (SETS-017) is marked as 'ready to start' (Phase 2) but depends on understanding all possible empty scenarios. May need input from UX/Design after Phase 4 features finalize."
      impact: "Empty state designs might be incomplete if created too early. Risk of rework."
      mitigation: "SETS-017 can begin with core scenarios (new collection, no results), but defer edge cases (no MOC links, filtered views) until Phase 4 features exist."
      story_id: "SETS-017"

    - finding: "Build status toggle (SETS-009) has 'celebration animation' but no specification of animation type or accessibility implications. Could violate WCAG motion preferences."
      impact: "Animation might distract users or trigger vestibular issues. Needs motion-safe alternative."
      mitigation: "SETS-009 must include prefers-reduced-motion CSS check. Animation optional in preferences."
      story_id: "SETS-009"

    - finding: "Gallery sorting/filtering (SETS-014) depends on 'shared gallery package' which is referenced but not detailed. Implementation risk if package API is unstable."
      impact: "If shared gallery package changes, SETS-014 requires rework. Blocks all sorting/filter UX."
      mitigation: "Document expected gallery package API early (filter types, sort options). Lock interface before SETS-014 starts."
      story_id: "SETS-014"

    - finding: "Tag management (SETS-015) also depends on 'shared tag management package.' Similar integration risk."
      impact: "Could be deferred if shared tag package is unstable or not ready."
      mitigation: "Confirm tag package status and API contract before SETS-015 planning."
      story_id: "SETS-015"

  low:
    - finding: "Mobile responsive (SETS-020) and accessibility (SETS-019) are Phase 5 and not blockers, but should have earlier foundation (responsive layout structure in Phase 2 components)."
      impact: "Risk of architectural rework if mobile/a11y constraints discovered late."
      mitigation: "Ensure Phase 2 components are built mobile-first from the start. SETS-019 and SETS-020 then become polish, not overhauls."
      story_id: "SETS-019, SETS-020"

    - finding: "Keyboard shortcuts (SETS-019) include 'B' for toggle, 'A' for add, 'M' for MOC link. No conflict analysis with browser/OS shortcuts."
      impact: "Users might accidentally trigger browser functions (e.g., Cmd+B for bold in some editors). Minor UX friction."
      mitigation: "SETS-019 should document any shortcut conflicts and provide override mechanism."
      story_id: "SETS-019"

    - finding: "Swipe actions (SETS-020) for mobile build status toggle might conflict with native scroll gestures on some devices."
      impact: "Users might accidentally toggle build status while scrolling. Minor but annoying."
      mitigation: "SETS-020 should require explicit gesture (e.g., long-press first, then swipe) to avoid accidental toggles."
      story_id: "SETS-020"

requirements_gaps:
  - gap: "No explicit requirement for handling set deletion cascades (MOC links, tags, references). SETS-012 mentions 'cleanup' but doesn't detail what happens to related data."
    severity: high
    suggested_story: "Add cascade delete specification to SETS-007 API design; ensure SETS-012 tests all cascade scenarios"
    impact: "Orphaned MOC links or tags could accumulate if delete isn't atomic"

  - gap: "No explicit offline support or optimistic update recovery strategy. What happens if user adds set, loses connection, regains connection?"
    severity: high
    suggested_story: "Add offline support story (post-MVP) or document explicit assumption that app requires constant connectivity"
    impact: "Users on unstable connections could lose data entry"

  - gap: "Conflict resolution not documented when same set is added from different sources (manual vs URL scrape). Will image, title, etc. match or diverge?"
    severity: medium
    suggested_story: "Add conflict resolution to SETS-018 duplicate detection logic"
    impact: "Duplicate detection might fail if data doesn't perfectly match"

  - gap: "No explicit requirement for audit trail or history. Can users see when they marked a set as 'built' or when they edited purchase date?"
    severity: medium
    suggested_story: "Post-MVP: Add set history/activity log feature"
    impact: "Users can't track changes to their collection over time"

  - gap: "Image handling edge cases not documented: what if scrape fails to get image? What if user uploads very large image? S3 storage limits?"
    severity: medium
    suggested_story: "Document image handling strategy in SETS-005/SETS-006 acceptance criteria"
    impact: "Could fail gracefully or create poor UX (missing images, upload hangs)"

  - gap: "Shared scraper service contract not documented. What data fields does it return? What happens if LEGO.com product disappears?"
    severity: high
    suggested_story: "Define scraper service contract as separate work (cross-epic dependency)"
    impact: "SETS-005 implementation could be blocked or require workarounds"

prioritization_concerns:
  - story: "SETS-005"
    current_priority: "Phase 2 (High), ready to start"
    suggested_priority: "Phase 2, but validate scraper service readiness first"
    rationale: "URL scraping is high-value UX (faster than manual entry) but DEPENDS on shared scraper service. Reorder based on scraper availability."

  - story: "SETS-018"
    current_priority: "Phase 4 (Advanced Features)"
    suggested_priority: "Consider deferring to post-MVP phase"
    rationale: "Duplicate detection is nice-to-have but introduces UX complexity. Core value is achieved with simple quantity increment. Defer to avoid MVP complexity."

  - story: "SETS-016"
    current_priority: "Phase 5 (Low), supporting"
    suggested_priority: "Promote to Phase 4 if stats drive engagement metrics"
    rationale: "Collection stats (total sets, total value, total pieces) could be early engagement hook. If data shows users care about this, prioritize sooner."

  - story: "SETS-020"
    current_priority: "Phase 5 (UX & Polish), low priority"
    suggested_priority: "Maintain as Phase 5 but ensure responsive foundation in Phase 2"
    rationale: "Mobile is increasingly important. Phase 2 components must be responsive from start, making Phase 5 polish easier. Current priority is correct but needs earlier groundwork."

  - story: "SETS-011"
    current_priority: "Phase 4 (Advanced Features)"
    suggested_priority: "Make conditional on MOC Instructions epic status"
    rationale: "MOC linking is valuable but blocked by another epic. If MOC Instructions delayed, SETS-011 should be stubbed (UI ready) and deprioritized."

mvp_assessment:
  scope_appropriate: true

  mvp_rationale: |
    The MVP scope (Phases 1-3) is well-balanced:
    - Phase 1 (SETS-007): Foundational API with full CRUD support
    - Phase 2 (SETS-005, SETS-006, SETS-012, SETS-013, SETS-017): Core user flows
      * Add via URL or manual entry
      * Purchase details capture
      * Delete with confirmation
      * Empty state guidance
    - Phase 3 (SETS-008, SETS-021): Wishlist integration with delightful UX

    This delivers core value: users can catalog their collection and transition items from Wishlist.

    Phases 4-5 (advanced features, polish, accessibility) are appropriate as phase-2 work.

  stories_to_defer:
    - story_id: "SETS-018"
      reason: "Duplicate detection adds complexity without blocking MVP value. Users can manually manage if they want multiple of same set."
      defer_to: "Post-MVP phase 6"

    - story_id: "SETS-016"
      reason: "Collection stats are engagement booster, not core functionality. Can be added later."
      defer_to: "Post-MVP phase 6 or feature toggle"

    - story_id: "SETS-015"
      reason: "Tag management depends on shared tag package. If package is unstable, defer."
      defer_to: "Phase 5 or later, pending tag package stabilization"

  stories_to_add:
    - story_id: "SETS-022"
      title: "Set Edit Form - Full Metadata Editing"
      description: "Allow users to edit all set fields after creation (title, set number, purchase details, notes, tags, etc.). Currently only implied in detail view."
      phase: "Phase 4"
      reasoning: "Users will want to correct scraped data or update notes. Explicit edit story ensures complete UX."
      depends_on: "SETS-007"

    - story_id: "SETS-023"
      title: "Bulk Actions (Select Multiple, Batch Update Build Status)"
      description: "Allow users to select multiple sets and batch-update build status or delete."
      phase: "Post-MVP"
      reasoning: "Power users with large collections will want to batch-mark as 'built' after building spree. Enhances experience for collectors."
      depends_on: "SETS-009"

    - story_id: "SETS-024"
      title: "Search and Global Quick Add"
      description: "Global search across all collections (Sets, Wishlist, MOCs). Quick 'Add to Sets' from search."
      phase: "Post-MVP"
      reasoning: "Discovery and cross-collection UX improvement. Lower priority but high value."
      depends_on: "SETS-007"

cross_epic_risks:
  - dependency: "Wishlist 'Got it' integration (SETS-008 depends on Wishlist epic's POST /api/wishlist/:id/purchased endpoint)"
    risk: "Wishlist epic is 'In Progress.' If delayed, SETS-008 blocked. Potential for data loss if transaction handling unclear."
    severity: "High"
    mitigation: |
      1. Establish clear API contract between epics (who owns transaction, rollback logic?)
      2. SETS-008 should NOT start until Wishlist's purchased endpoint is implemented, tested, and atomic
      3. Define undo behavior: is it 'undo Sets creation + restore Wishlist item' or vice versa?
      4. Add integration tests that simulate failure scenarios (network, DB constraint, etc.)

  - dependency: "Shared scraper service (SETS-005 depends on URL scraping capability, shared with Wishlist)"
    risk: "Scraper service not documented as a separate story. May not exist yet. If Wishlist hasn't implemented scraper, SETS-005 has no foundation."
    severity: "High"
    mitigation: |
      1. Confirm scraper service status with architecture/platform team
      2. If scraper is already in Wishlist, document API contract and version stability
      3. If scraper doesn't exist, add as separate foundational story (SETS-0000 or in shared packages)
      4. SETS-005 should have acceptance criteria for scraper integration (specific fields returned, error handling)

  - dependency: "MOC Instructions epic (SETS-011 depends on MOC schema and endpoints for linking)"
    risk: "MOC Instructions epic not detailed. If MOC linking API delayed, SETS-011 blocks SETS-019 and SETS-020."
    severity: "Medium"
    mitigation: |
      1. Get MOC Instructions epic timeline; align Phase 4 and Phase 5 planning
      2. If MOC delayed, stub SETS-011 (UI ready, no backend integration) as post-MVP
      3. Define MOC linking API contract early (SETS-011 acceptance criteria should list expected endpoints)

  - dependency: "Shared gallery package (SETS-014 depends on sorting/filtering capabilities)"
    risk: "Gallery package mentioned but not specified. Package API stability unknown. Could require rework if package changes."
    severity: "Medium"
    mitigation: |
      1. Lock shared gallery package API before SETS-014 starts
      2. Document expected sort/filter options: build status, purchase date, piece count, price, theme, store, tags
      3. SETS-014 acceptance criteria should include gallery package version requirement

  - dependency: "Shared tag management (SETS-015 depends on tag system availability)"
    risk: "Tag system referenced but not detailed. If tag system not ready, SETS-015 delayed."
    severity: "Low"
    mitigation: |
      1. Confirm tag system implementation status
      2. If not ready, defer SETS-015 to post-MVP or stub with local tag management

  - dependency: "S3 image storage (SETS-005, SETS-006, SETS-013 all need S3 for images)"
    risk: "S3 is foundational but not explicitly listed as a dependency story. Assumes already available."
    severity: "Low"
    mitigation: |
      1. Confirm S3 bucket provisioning, IAM policies, and presigned URL support are ready
      2. Document image handling strategy: max file size, dimensions, formats, cleanup policy

user_value_alignment:
  user_value_proposition: |
    "The Sets Gallery enables collectors to manage their physical LEGO collection digitally,
    track what they own, when they bought it, what it cost, and what they've built from it.
    It bridges the gap between wanting sets (Wishlist) and owning them (Sets), providing a
    comprehensive collection management experience."

  value_by_user_segment:
    casual_builders:
      value: "Simple gallery to see all their sets at a glance. Knowing total piece count and value."
      alignment: "High - SETS-007 (gallery view), SETS-016 (stats) deliver this"
      risk: "SETS-018 (duplicate detection) might confuse casual users"

    power_collectors:
      value: "Detailed tracking of purchase details, build status, organizing by theme/tags, bulk operations."
      alignment: "Medium - core CRUD present, but SETS-018 (duplicates) and bulk actions (proposed SETS-023) missing from MVP"
      risk: "Might find MVP limiting. Single quantity field vs. separate entries for different purchases unclear."

    wishlist_to_sets_users:
      value: "Seamless transition from 'want it' to 'got it' with automatic data population and purchase tracking."
      alignment: "High - SETS-008 (integration), SETS-021 (success experience) directly support this"
      risk: "If Wishlist scraper unreliable or 'Got it' flow has bugs, entire value prop compromised"

    moc_builders:
      value: "Link sets to MOC instructions to remember which sets were used in which builds."
      alignment: "Medium - SETS-011 (MOC linking) present but depends on MOC Instructions epic"
      risk: "Feature only valuable if MOC Instructions epic delivers on time"

market_positioning:
  differentiators:
    - "Integrated with Wishlist (want → own workflow)"
    - "Purchase tracking (price, tax, shipping for collection value)"
    - "Build status toggle (quick feedback on progress)"
    - "Linked to MOC Instructions (where did this set get used?)"
    - "Optimistic UI updates with undo (feels fast and safe)"

  competitive_gaps:
    - "BrickLink and Brickset already have set collection features. SETS must differentiate via integration (Wishlist, MOCs) and UX (undo, optimistic updates)."
    - "No explicit requirement for BrickLink value API integration (mentioned as future). Competitor has real-time market data."
    - "No import/export from other platforms. Users locked into manual entry or scraping."

  recommendations:
    - "After MVP, prioritize BrickLink integration (value tracking) as next phase to compete with dedicated services"
    - "Consider social features (share collection, compare with friends) for engagement"
    - "Build time-series analytics (sets collected over time, spending trends)"

dependencies_and_blockers:
  epic_blockers:
    - epic: "Wishlist (Epic 6)"
      status: "In Progress"
      impact_on_sets: "SETS-008, SETS-021, SETS-005 (scraper)"
      action: "Coordinate with Wishlist epic lead. Ensure wishlist 'purchased' endpoint atomic and well-tested before SETS-008 starts."

    - epic: "MOC Instructions (Epic 4)"
      status: "Unknown"
      impact_on_sets: "SETS-011"
      action: "Get MOC epic timeline. If delayed beyond Phase 4, stub SETS-011."

    - epic: "Shared packages (gallery, tag management, scraper)"
      status: "Unclear"
      impact_on_sets: "SETS-005, SETS-014, SETS-015"
      action: "Audit shared package status. Lock APIs early."

  infrastructure_requirements:
    - "Aurora PostgreSQL with proper indexing (userId, setNumber indexes mentioned)"
    - "S3 bucket with presigned URL support for image uploads"
    - "API Gateway routing to Lambda handlers (SETS-007 endpoints)"
    - "Redis or similar for caching (nice-to-have for stats queries)"
    - "Authentication/authorization (assume existing)"

  testing_strategy:
    - "Unit: Zod schemas (data validation), utility functions"
    - "Integration: API endpoints with mocked DB, cascade deletes, transaction rollbacks"
    - "E2E: Happy paths (add, toggle, delete), error scenarios (duplicate detection, undo failure)"
    - "A/A test: SETS-018 (duplicate detection UX) to ensure clarity"

recommendations_for_product:
  immediate_actions:
    - "Confirm scraper service status (SETS-005 blocker). If unavailable, either add to scope or defer URL scraping."
    - "Align with Wishlist epic on 'Got it' transaction design (SETS-008). Ensure rollback logic is sound."
    - "Lock shared gallery and tag package APIs before Phase 2 starts."

  phase_planning:
    - "Phase 1: SETS-007 only. Ensure schema, migrations, and API tests are solid."
    - "Phase 2: SETS-005, SETS-006, SETS-012, SETS-013, SETS-017 in parallel (6 stories max)."
    - "Phase 3: SETS-008, SETS-021 after Phase 2 stabilizes."
    - "Phase 4: SETS-009, SETS-010, SETS-011, SETS-014 (defer SETS-018)."
    - "Phase 5: SETS-019, SETS-020 (accessibility and mobile polish)."

  post_mvp_opportunities:
    - "SETS-018 (duplicate detection) with improved UX"
    - "SETS-016 (collection stats) if data shows engagement value"
    - "SETS-023 (bulk actions) for power users"
    - "SETS-024 (global search and quick add)"
    - "BrickLink integration (real-time value tracking)"
    - "Collection sharing and comparison (social)"
    - "Time-series analytics (spending trends, set acquisition rate)"
    - "Mobile app (iOS/Android companion)"

success_metrics:
  user_engagement:
    - "Sets added per user (daily, weekly, monthly)"
    - "Average collection size (by user segment: casual, power collector)"
    - "Wishlist → Sets conversion rate (did 'Got it' flow actually increase adoption?)"

  feature_adoption:
    - "Build status toggle usage rate (how often users update this?)"
    - "MOC linking adoption (what % of sets linked to MOCs?)"
    - "Tag usage rate (do users organize by tags?)"

  quality:
    - "API error rate (especially for SETS-008 'Got it' transactions)"
    - "Undo action success rate (do rollbacks work?)"
    - "Performance: gallery load time, search latency for large collections (500+ sets)"

  business:
    - "Feature completeness vs. competitors (BrickLink, Brickset)"
    - "User retention: do Sets Gallery users return regularly?"
    - "Cross-feature engagement: do Wishlist users adopt Sets Gallery?"

conclusion: |
  The SETS epic is **READY for implementation**. It is well-designed, user-centric, and strategically aligned with the Wishlist and MOC Instructions epics. The MVP scope is appropriate, and the story prioritization is sound.

  **Key actions before kickoff:**
  1. Confirm scraper service readiness (SETS-005 blocker)
  2. Coordinate with Wishlist epic on atomic transaction design (SETS-008)
  3. Lock shared package APIs (gallery, tags)
  4. Consider deferring SETS-018 (duplicate detection) to post-MVP to simplify Phase 2

  **Risk level:** Medium (primarily cross-epic dependencies and shared service reliability)

  **Confidence level:** High (clear requirements, well-sequenced stories, experienced team)

  Proceed with Phase 1 (SETS-007) immediately, with Phase 2 starting in parallel once API schema is finalized.
