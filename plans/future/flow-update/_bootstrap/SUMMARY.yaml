schema: 2
feature_dir: "plans/future/flow-update"
prefix: "FLOW"
project_name: "flow-update"
completed: "2026-02-01T12:50:00Z"

files_created:
  - path: "plans/future/flow-update/stories.index.md"
    stories: 22
  - path: "plans/future/flow-update/PLAN.meta.md"
  - path: "plans/future/flow-update/PLAN.exec.md"
  - path: "plans/future/flow-update/roadmap.md"

directories_created:
  - "plans/future/flow-update/backlog/"
  - "plans/future/flow-update/elaboration/"
  - "plans/future/flow-update/ready-to-work/"
  - "plans/future/flow-update/in-progress/"
  - "plans/future/flow-update/UAT/"

metrics:
  total_stories: 22
  ready_to_start: 1
  critical_path_length: 13
  max_parallel: 4
  phases: 5
  stories_with_sizing_warnings: 4
  stories_by_phase:
    phase_0: 2
    phase_1: 5
    phase_2: 7
    phase_3: 4
    phase_4: 4

roadmap_highlights:
  critical_path:
    - "FLOW-001"
    - "FLOW-002"
    - "FLOW-005"
    - "FLOW-007"
    - "FLOW-008"
    - "FLOW-009"
    - "FLOW-010"
    - "FLOW-014"
    - "FLOW-011"
    - "FLOW-019"
    - "FLOW-020"
    - "FLOW-021"
    - "FLOW-022"
  parallel_groups: 10
  high_risk_stories:
    - "FLOW-009"
    - "FLOW-013"
    - "FLOW-016"
    - "FLOW-022"

phase_breakdown:
  phase_0_audit_analysis:
    stories: ["FLOW-001", "FLOW-002"]
    description: "Audit existing dev/review/qa infrastructure and propose refactored architecture"
  phase_1_shared_infrastructure:
    stories: ["FLOW-003", "FLOW-004", "FLOW-005", "FLOW-006", "FLOW-018"]
    description: "Create reusable knowledge context loader and evidence bundle infrastructure"
  phase_2_dev_implementation_refactor:
    stories: ["FLOW-007", "FLOW-008", "FLOW-009", "FLOW-010", "FLOW-011", "FLOW-019"]
    description: "Refactor /dev-implement-story into 4-phase leader pattern"
  phase_3_code_review_refactor:
    stories: ["FLOW-012", "FLOW-013", "FLOW-014", "FLOW-020"]
    description: "Refactor /dev-code-review into 3-phase leader pattern with diff-aware workers"
  phase_4_qa_verify_refactor:
    stories: ["FLOW-015", "FLOW-016", "FLOW-017", "FLOW-021", "FLOW-022"]
    description: "Refactor /qa-verify-story into 3-phase leader pattern with evidence-first verification"

key_objectives:
  - "Refactor Dev → Code Review → QA Verify cycle into phase-leader pattern"
  - "Reduce token usage through structured artifacts and deterministic resume"
  - "Minimize redundant reads across workflow phases"
  - "Enable evidence-driven architecture with EVIDENCE.yaml, PLAN.yaml, REVIEW.yaml, QA-VERIFY.yaml"
  - "Maintain backward compatibility with existing command interface"
  - "Reduce story context re-reading (currently 30-40% of tokens per story)"

risk_summary:
  - id: "RISK-001"
    description: "Story context re-reading consumes 30-40% of tokens"
    mitigation: "New architecture implements context passing to avoid redundant reads"
  - id: "RISK-002"
    description: "Evidence bundle schema too verbose could negate savings"
    mitigation: "Design EVIDENCE.yaml concisely with references to detailed files"
  - id: "RISK-003"
    description: "Knowledge context loader KB dependency may fail"
    mitigation: "Silent fallback to local LESSONS-LEARNED.md and ADR-LOG.md"
  - id: "RISK-007"
    description: "Migration path must keep workflow operational"
    mitigation: "Redesign includes step-by-step migration maintaining working system"

next_steps:
  - "Run: /elab-epic plans/future/flow-update"
  - "Start with Phase 0 stories: FLOW-001 (audit existing infrastructure)"
  - "Follow critical path for optimal sequencing"
  - "Monitor token usage in FLOW-008, FLOW-009, FLOW-016 (high-cost phases)"
  - "Validate schema designs in Phase 1 before dev implementation starts"

artifact_summary:
  stories_index: "Master index of all 22 FLOW stories with current status and dependencies"
  plan_meta: "Documentation structure and naming conventions for FLOW project"
  plan_exec: "Execution rules, artifact naming, workflow stages, and acceptance criteria"
  roadmap: "Visual dependency graph, Gantt timeline, critical path, and risk indicators"
  bootstrap_summary: "This file; final generation summary"

validation_checklist:
  - "✓ All 22 stories from ANALYSIS.yaml present in stories.index.md"
  - "✓ Dependency graph matches ANALYSIS.yaml structure"
  - "✓ Critical path verified: 13 stories as specified"
  - "✓ All stage directories created"
  - "✓ YAML frontmatter present on all artifact files"
  - "✓ Mermaid syntax validated for dependency and Gantt diagrams"
  - "✓ Risk indicators from ANALYSIS.yaml mapped to roadmap"
  - "✓ Reuse-first principle embedded in PLAN.meta.md"
