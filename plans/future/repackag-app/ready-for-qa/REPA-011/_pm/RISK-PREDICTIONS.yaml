# RISK-PREDICTIONS.yaml - REPA-011: Standardize GalleryFilterBar Across Apps
# Generated by pm-story-risk-predictor (WKFL-007)

predictions:
  split_risk: 0.1
  review_cycles: 1
  token_estimate: 120000
  confidence: medium
  similar_stories:
    - story_id: WISH-2045
      similarity_score: 0.82
      description: "Wishlist gallery store tabs refactor (used GalleryFilterBar children slot)"
      actual_cycles: 1
      actual_tokens: 115000
      split_occurred: false
    - story_id: REPA-002
      similarity_score: 0.78
      description: "Gallery component consolidation (refactoring story)"
      actual_cycles: 1
      actual_tokens: 130000
      split_occurred: false
    - story_id: INST-031
      similarity_score: 0.71
      description: "Instructions gallery filter bar integration"
      actual_cycles: 2
      actual_tokens: 125000
      split_occurred: false

  # Heuristic calculations
  heuristics:
    ac_count: 16
    estimated_files: 4  # BuildStatusFilter + main page + tests + delete custom
    scope_keywords:
      - frontend
      - refactoring
      - component-consolidation
    base_split_risk: 0.1  # Low - well-scoped refactoring, no backend
    complexity_boost: 0.0  # Frontend-only, no auth/database/multi-domain
    pattern_boost: 0.0  # No high-risk patterns detected

  # Risk factors
  risk_factors:
    low_risk_indicators:
      - "Extension points already exist (children, rightSlot)"
      - "Pattern proven in wishlist-gallery"
      - "No API or database changes"
      - "Small file count (4 files touched)"
      - "Clear acceptance criteria (16 ACs)"
      - "TypeScript provides strong type safety"

    medium_risk_indicators:
      - "Prop name mapping requires careful attention"
      - "Test selectors may need updates"
      - "Responsive layout testing required"

    high_risk_indicators: []

  # Review cycle analysis
  review_cycle_analysis:
    expected_cycles: 1
    rationale: "Simple refactoring with clear requirements. Low complexity (frontend-only). No auth, security, or database changes. Shared components already tested. TypeScript catches most errors."
    potential_cycle_triggers:
      - "Visual regression detected (BuildStatusFilter styling inconsistent)"
      - "Mobile layout issues on edge case viewports"
      - "Test failures requiring selector updates"

  # Token estimate breakdown
  token_estimate_breakdown:
    similar_story_median: 125000
    adjustment_factors:
      - factor: "Simpler than similar stories (no new shared component)"
        impact: -5000
      - factor: "Well-defined scope (seed provides detailed context)"
        impact: -3000
      - factor: "Extension pattern already documented"
        impact: -2000
    final_estimate: 120000
    confidence_range: "100K - 140K tokens"

  # Confidence calculation
  confidence_calculation:
    similar_stories_count: 3
    similarity_threshold: 0.70
    patterns_available: false  # WKFL-006 not yet implemented
    data_quality: "medium"  # 3 similar stories, no patterns
    rationale: "3 similar refactoring stories found with >0.70 similarity. No WKFL-006 patterns yet. Confidence = medium."

# Metadata
generated_at: "2026-02-10T19:30:00Z"
model: "haiku"
wkfl_version: "007-v1"
story_id: "REPA-011"
epic: "REPACK"

# Notes
notes: |
  Risk predictor using heuristics-only mode (WKFL-006 patterns not yet available).

  Split risk is LOW (0.1) because:
  - Small, well-scoped refactoring (4 files)
  - No backend changes
  - Extension points already exist
  - Similar to proven pattern (wishlist store tabs)
  - Clear requirements (16 detailed ACs)

  Review cycles estimate is 1 because:
  - Simple frontend refactoring
  - No security/auth/database complexity
  - TypeScript provides compile-time safety
  - Shared components already tested
  - May need visual QA pass for styling consistency

  Token estimate (120K) is slightly below similar stories because:
  - Simpler scope (no new shared component)
  - Well-documented seed reduces discovery time
  - Extension pattern already proven
  - Refactoring is more predictable than greenfield

  Confidence is MEDIUM (not HIGH) because:
  - Only 3 similar stories found (need 5+ for high confidence)
  - WKFL-006 patterns not yet available
  - Manual testing required (responsive, accessibility)

  Accuracy tracking will be performed after OUTCOME.yaml generation.
