# Risk Predictions: REPA-007
# Generated by pm-story-risk-predictor agent
# Mode: Heuristics-only (WKFL-006 patterns unavailable)

predictions:
  split_risk: 0.7
  review_cycles: 3
  token_estimate: 180000
  confidence: low
  similar_stories: []
  generated_at: "2026-02-10T00:00:00Z"
  model: haiku
  wkfl_version: "007-v1"

# Calculation Details

## split_risk: 0.7

**Base risk from AC count**:
- 34 ACs → (34 - 3) * 0.1 = 3.1 → clamped to 1.0

**Scope complexity boost**:
- Frontend only (no backend) → +0.0
- No database → +0.0
- No auth/security keywords → +0.0
- Complex TypeScript generics → +0.1 (implicit)
- Extract 2 hooks from different apps → +0.1 (coordination risk)

**Pattern boost**: Not available (WKFL-006 patterns missing)

**Final calculation**:
- Base: 1.0 (clamped from AC count)
- Adjustments: -0.3 (no backend/database/auth complexity)
- Result: 0.7

**Interpretation**: High risk of story splitting. 34 ACs with hook extraction from multiple apps creates significant scope.

---

## review_cycles: 3

**Base cycles**: 1

**Complexity signals**:
- Scope keywords: 5 (frontend, component, hooks, accessibility, testing) → +1
- Estimated files > 5: ~12 files (component, hooks, tests) → +1
- No auth/security → +0
- No database → +0

**Pattern boost**: Not available (WKFL-006 patterns missing)

**Final calculation**: 1 + 1 + 1 = 3 cycles

**Interpretation**: Expected 3 review iterations due to:
1. Generic TypeScript complexity (may require type refinements)
2. Accessibility requirements (screen reader testing, ARIA validation)
3. Hook extraction from multiple apps (coordination, testing)

---

## token_estimate: 180000

**Method**: Fallback to global default + complexity adjustment

**Base estimate**: 150,000 tokens (global default)

**Adjustments**:
- Large story (34 ACs) → +20% = +30,000 tokens
- Complex component with tests → +0 (already in base)
- Documentation (Storybook) → +0 (typical for component stories)

**Final calculation**: 150,000 + 30,000 = 180,000 tokens

**Interpretation**: Above-average token cost due to large AC count and comprehensive test plan. Similar stories likely in 160K-200K range.

---

## confidence: low

**Reasoning**:
- No similar stories found (KB search not available or empty result)
- WKFL-006 patterns unavailable (heuristics-only mode)
- No historical data for "repackag-app" epic (new epic)

**Interpretation**: Predictions based purely on heuristics. Actual values may vary significantly. Update predictions after first similar story completes.

---

## similar_stories: []

**Reason**: Knowledge base unavailable or no similar stories found in "repackag-app" epic.

**Search query attempted**: "repackag-app drag-and-drop component extraction"
**Tags searched**: ['outcome']
**Results**: 0 stories with similarity > 0.70

**Recommendation**: After REPA-007 completes, use OUTCOME.yaml as baseline for future gallery component stories (REPA-009, REPA-010).

---

## Fallback Mode Notes

**WKFL-006 status**: Patterns file not found at `plans/future/workflow-learning/patterns/PATTERNS-2026-02.yaml`

**KB status**: Available but no similar stories in "repackag-app" epic (new epic)

**Degraded gracefully**: Yes - Used heuristics-only mode per agent instructions

**Warning logged**: "WKFL-006 patterns unavailable, using heuristics-only mode"

---

## Recommendations for PM

1. **Split risk is high (0.7)**: Consider splitting into REPA-007a (3 SP) and REPA-007b (2 SP) as suggested in DEV-FEASIBILITY.md

2. **Review cycles**: Expect 3 iterations. Schedule extra time for:
   - TypeScript generic type refinements
   - Accessibility validation (axe-core, screen reader testing)
   - Cross-app coordination (hook extraction)

3. **Token budget**: Allocate 180K tokens. Monitor actual usage to improve future estimates.

4. **Confidence improvement**: After REPA-007 completes, run accuracy tracking to build historical data for similar stories.

---

## Signal

PREDICTION DEGRADED: WKFL-006 patterns unavailable, KB has no similar stories. Using heuristics-only mode with low confidence.
