# Deferred Knowledge Base Writes
# These entries should be written to KB when write access is available
# Generated by: elab-autonomous-decider
# Story: WKFL-003
# Generated at: 2026-02-07T18:15:00Z

reason: KB write access not available (read-only MCP connection)
total_entries: 14
status: pending

entries:
  - id: gap-1
    entry_type: finding
    role: system
    story_id: WKFL-003
    source_stage: elab
    category: future-opportunities
    subcategory: statistical_rigor
    title: "No confidence intervals on success rates"
    content: |
      # No confidence intervals on success rates

      **Source**: WKFL-003 Elaboration (Future Opportunities)
      **Category**: Statistical Rigor

      **Finding**: Success rates are computed as point estimates without confidence intervals.

      **Impact**: Low
      **Effort**: Medium

      **Recommendation**: Add statistical confidence (e.g., "97% ± 3%") when sample size allows.
      This would help users understand the reliability of success rate estimates, especially
      for patterns with smaller sample sizes.

      **Related**: Decision outcome tracking, heuristic evolution
    tags: ["statistical-rigor", "enhancement", "future-work", "WKFL-003", "elab"]

  - id: gap-2
    entry_type: finding
    role: system
    story_id: WKFL-003
    source_stage: elab
    category: future-opportunities
    subcategory: statistical_rigor
    title: "Single minimum sample threshold (5)"
    content: |
      # Single minimum sample threshold (5)

      **Source**: WKFL-003 Elaboration (Future Opportunities)
      **Category**: Statistical Rigor

      **Finding**: All patterns use the same minimum sample threshold of 5 decisions.

      **Impact**: Low
      **Effort**: Low

      **Recommendation**: Consider domain-specific thresholds. For example, destructive decisions
      should require more evidence (10+ samples) before tier changes are proposed. Low-risk
      patterns might be acceptable with fewer samples.

      **Quick Win**: Could be added during implementation if time permits.

      **Related**: Heuristic evolution, decision thresholds
    tags: ["statistical-rigor", "enhancement", "future-work", "WKFL-003", "elab", "quick-win"]

  - id: gap-3
    entry_type: finding
    role: system
    story_id: WKFL-003
    source_stage: elab
    category: future-opportunities
    subcategory: performance
    title: "No decay/recency weighting"
    content: |
      # No decay/recency weighting

      **Source**: WKFL-003 Elaboration (Future Opportunities)
      **Category**: Performance

      **Finding**: Success rates treat all historical decisions equally, regardless of age.

      **Impact**: Medium
      **Effort**: Medium

      **Recommendation**: Recent outcomes may be more relevant than old ones, especially if
      codebase patterns evolve. Consider time-weighted success rates (e.g., exponential decay)
      to give more weight to recent decisions.

      **Related**: Pattern evolution, temporal analysis
    tags: ["performance", "optimization", "future-work", "WKFL-003", "elab"]

  - id: gap-4
    entry_type: finding
    role: system
    story_id: WKFL-003
    source_stage: elab
    category: future-opportunities
    subcategory: configuration
    title: "Hard-coded thresholds (95%, 80%)"
    content: |
      # Hard-coded thresholds (95%, 80%)

      **Source**: WKFL-003 Elaboration (Future Opportunities)
      **Category**: Configuration

      **Finding**: Promotion (>95%) and demotion (<80%) thresholds are hard-coded.

      **Impact**: Low
      **Effort**: Low

      **Recommendation**: Make thresholds configurable per tier or pattern category. For example,
      destructive patterns might need 98% success for promotion, while low-risk patterns could
      promote at 90%. This adds flexibility without adding complexity.

      **Quick Win**: Could be added during implementation if time permits.

      **Related**: Heuristic evolution, configuration management
    tags: ["statistical-rigor", "configuration", "quick-win", "WKFL-003", "elab"]

  - id: gap-5
    entry_type: finding
    role: system
    story_id: WKFL-003
    source_stage: elab
    category: future-opportunities
    subcategory: edge_case
    title: "No handling of pattern evolution"
    content: |
      # No handling of pattern evolution

      **Source**: WKFL-003 Elaboration (Future Opportunities)
      **Category**: Edge Case

      **Finding**: If a pattern's regex definition changes, historical decision data may become
      misaligned with the new pattern.

      **Impact**: Low
      **Effort**: High

      **Recommendation**: Add pattern versioning to track when patterns change. Historical
      decisions should reference the pattern version they matched against. This prevents stale
      data from influencing tier changes.

      **Suggested Follow-up**: WKFL-003-A: Pattern Evolution & Versioning

      **Related**: Pattern versioning, data integrity
    tags: ["edge-case", "future-work", "versioning", "WKFL-003", "elab"]

  - id: gap-6
    entry_type: finding
    role: system
    story_id: WKFL-003
    source_stage: elab
    category: future-opportunities
    subcategory: edge_case
    title: "Missing rollback mechanism"
    content: |
      # Missing rollback mechanism

      **Source**: WKFL-003 Elaboration (Future Opportunities)
      **Category**: Edge Case

      **Finding**: If a promoted pattern causes production issues, there's no documented
      procedure to demote it and revert proposals.

      **Impact**: Low
      **Effort**: Medium

      **Recommendation**: Document a rollback procedure:
      1. Manually revert tier in decision-classification.yaml
      2. Create override entry to prevent re-promotion
      3. Optionally purge recent decision outcomes if contaminated

      **Related**: Operations runbook, incident response
    tags: ["edge-case", "rollback", "future-work", "WKFL-003", "elab"]

  - id: enh-1
    entry_type: finding
    role: system
    story_id: WKFL-003
    source_stage: elab
    category: future-opportunities
    subcategory: ux_polish
    title: "Interactive proposal review UI"
    content: |
      # Interactive proposal review UI

      **Source**: WKFL-003 Elaboration (Future Opportunities)
      **Category**: UX Polish

      **Finding**: Proposal review requires manual editing of HEURISTIC-PROPOSALS.yaml and
      decision-classification.yaml files.

      **Impact**: Medium
      **Effort**: High

      **Recommendation**: CLI-based proposal review could be enhanced with interactive prompts
      (approve/reject/defer each proposal) or a web UI showing success rate trends, example
      stories, and one-click approval. This would streamline the human review process.

      **Related**: Developer experience, workflow automation
    tags: ["ux-polish", "enhancement", "future-work", "WKFL-003", "elab"]

  - id: enh-2
    entry_type: finding
    role: system
    story_id: WKFL-003
    source_stage: elab
    category: future-opportunities
    subcategory: integration
    title: "A/B test tier changes"
    content: |
      # A/B test tier changes

      **Source**: WKFL-003 Elaboration (Future Opportunities)
      **Category**: Integration

      **Finding**: Tier changes apply to all future decisions once approved.

      **Impact**: High
      **Effort**: High

      **Recommendation**: Before fully promoting a pattern, run an A/B test: 50% of decisions
      auto-accept (new tier), 50% escalate (old tier). Compare outcomes to validate the tier
      change before full rollout. This reduces risk of over-promotion.

      **Integration**: Requires WKFL-008 experimentation framework.

      **Related**: Experimentation, risk mitigation
    tags: ["integration", "experimentation", "future-work", "WKFL-003", "elab"]

  - id: enh-3
    entry_type: finding
    role: system
    story_id: WKFL-003
    source_stage: elab
    category: future-opportunities
    subcategory: performance
    title: "Pattern similarity clustering"
    content: |
      # Pattern similarity clustering

      **Source**: WKFL-003 Elaboration (Future Opportunities)
      **Category**: Performance

      **Finding**: Similar patterns (e.g., "loading.*state" and "skeleton.*loading") are
      analyzed independently, leading to redundant proposals.

      **Impact**: Medium
      **Effort**: Medium

      **Recommendation**: Group similar patterns before analysis using regex similarity or
      semantic clustering. Generate a single proposal for the cluster rather than individual
      proposals per pattern. This reduces noise and improves proposal quality.

      **Related**: Pattern mining, clustering algorithms
    tags: ["performance", "optimization", "future-work", "WKFL-003", "elab"]

  - id: enh-4
    entry_type: finding
    role: system
    story_id: WKFL-003
    source_stage: elab
    category: future-opportunities
    subcategory: observability
    title: "Success rate trending"
    content: |
      # Success rate trending

      **Source**: WKFL-003 Elaboration (Future Opportunities)
      **Category**: Observability

      **Finding**: Success rates are computed as a single aggregate metric, with no visibility
      into trends over time.

      **Impact**: Medium
      **Effort**: Low

      **Recommendation**: Track success rate over time (e.g., 30-day rolling window) to detect
      degradation before it hits the demotion threshold. Early warning allows for investigation
      before patterns fail. Could visualize as a sparkline in proposals.

      **Related**: Monitoring, early warning systems
    tags: ["observability", "monitoring", "future-work", "WKFL-003", "elab"]

  - id: enh-5
    entry_type: finding
    role: system
    story_id: WKFL-003
    source_stage: elab
    category: future-opportunities
    subcategory: ux_polish
    title: "Auto-generate rationale improvements"
    content: |
      # Auto-generate rationale improvements

      **Source**: WKFL-003 Elaboration (Future Opportunities)
      **Category**: UX Polish

      **Finding**: Proposal rationale is generic (e.g., "Users consistently accept loading state
      additions").

      **Impact**: Low
      **Effort**: Medium

      **Recommendation**: Use an LLM to generate more detailed rationale text from example
      stories. For instance: "Analysis of 23 decisions shows users prefer explicit loading states
      in async components (WISH-2045, WISH-2046). Common pattern: skeleton UI + aria-busy."

      **Related**: LLM integration, proposal quality
    tags: ["ux-polish", "llm", "future-work", "WKFL-003", "elab"]

  - id: enh-6
    entry_type: finding
    role: system
    story_id: WKFL-003
    source_stage: elab
    category: future-opportunities
    subcategory: integration
    title: "Integration with WKFL-008 experiments"
    content: |
      # Integration with WKFL-008 experiments

      **Source**: WKFL-003 Elaboration (Future Opportunities)
      **Category**: Integration

      **Finding**: Tier changes are binary proposals (promote/demote/no change).

      **Impact**: High
      **Effort**: Medium

      **Recommendation**: Instead of direct proposals, tier changes could be framed as
      experiments. WKFL-008 experimentation framework could orchestrate A/B tests, gradual
      rollouts, and rollback on failure. This aligns tier evolution with experimentation best
      practices.

      **Integration**: Requires WKFL-008 to be implemented first.

      **Related**: Experimentation framework, controlled rollout
    tags: ["integration", "experimentation", "future-work", "WKFL-003", "elab"]

  - id: enh-7
    entry_type: finding
    role: system
    story_id: WKFL-003
    source_stage: elab
    category: future-opportunities
    subcategory: observability
    title: "Pattern lifecycle tracking"
    content: |
      # Pattern lifecycle tracking

      **Source**: WKFL-003 Elaboration (Future Opportunities)
      **Category**: Observability

      **Finding**: No visibility into a pattern's full lifecycle from creation to deprecation.

      **Impact**: Medium
      **Effort**: High

      **Recommendation**: Track pattern lifecycle stages: creation → calibration → promotion →
      maturity → degradation → deprecation. This provides observability into pattern health and
      enables lifecycle-based policies (e.g., auto-archive patterns with no decisions in 6 months).

      **Related**: Lifecycle management, observability
    tags: ["observability", "lifecycle", "future-work", "WKFL-003", "elab"]

  - id: enh-8
    entry_type: finding
    role: system
    story_id: WKFL-003
    source_stage: elab
    category: future-opportunities
    subcategory: statistical_rigor
    title: "Multi-dimensional success metrics"
    content: |
      # Multi-dimensional success metrics

      **Source**: WKFL-003 Elaboration (Future Opportunities)
      **Category**: Statistical Rigor

      **Finding**: Success is binary (confirmed vs overridden), ignoring quality signals.

      **Impact**: Medium
      **Effort**: High

      **Recommendation**: Current success is binary (confirm/override). Could track multiple
      dimensions: rework_needed (was fix required?), quality_score (code review rating),
      time_to_confirm (how long until user confirmed?). Multi-dimensional success provides
      richer signal for tier changes.

      **Related**: Quality metrics, decision analytics
    tags: ["statistical-rigor", "enhancement", "future-work", "WKFL-003", "elab"]

# Instructions for KB write
instructions: |
  When KB write access becomes available, process these entries using the standard
  kb-writer agent or manual INSERT statements. Each entry should:

  1. Generate embedding from content field
  2. Set verified=false (requires human verification)
  3. Use provided tags array
  4. Set created_at and updated_at to current timestamp
  5. Generate UUID for id field

  After successful write, update DECISIONS.yaml with kb_entry_id values.
