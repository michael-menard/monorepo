# Cache Directory

This directory contains cached context to reduce redundant loading and improve agent efficiency.

## Structure

```
.claude/cache/
├── README.md              # This file
├── static-cache.yaml      # Project structure, guidelines (24h TTL)
├── domain-cache.yaml      # Story index, ADRs (4h TTL)
├── session/               # Per-story session context (30min TTL)
│   └── {STORY_ID}.yaml
├── context7/              # Library documentation cache
│   └── {library}.yaml
└── CACHE-METRICS.yaml     # Cache performance metrics
```

## Cache Tiers

| Tier | TTL | Contents |
|------|-----|----------|
| Static | 24h | Project config, agent definitions, structure |
| Domain | 4h | Story index, ADRs, shared patterns |
| Session | 30min | Active story context, partial results |

## Generated Files

These files are auto-generated and should not be manually edited:

- `static-cache.yaml` - Generated by `pnpm cache:generate:static`
- `domain-cache.yaml` - Generated by `pnpm cache:generate:domain`
- `session/*.yaml` - Generated during story execution
- `CACHE-METRICS.yaml` - Updated after each cache operation

## Commands

```bash
# Generate all caches
pnpm cache:generate:all

# Generate specific tier
pnpm cache:generate:static
pnpm cache:generate:domain
pnpm cache:generate:session STORY-ID

# Invalidate caches
pnpm cache:invalidate:domain
pnpm cache:invalidate:session STORY-ID

# View metrics
pnpm cache:metrics
```

## Git Ignore

Cache files should be git-ignored except for this README:
- `*.yaml` files in this directory are ignored
- `session/` contents are ignored
- `context7/` contents are ignored

## Reference

See: `docs/FULL_WORKFLOW.md` → Context Caching System section
