# Model Assignments
#
# Single source of truth for agent-to-model assignments.
# Strategy: Ollama for routine tasks, Claude for gap analysis & decision making
#
# This file is consumed by:
# - LangGraph orchestrator (via model-assignments.ts)
# - Claude agents (reference directly)
# - Generated documentation (via generate-workflow-docs.ts)
#
# MODEL STRATEGY:
#   Ollama Models (local, fast, free):
#     - ollama:qwen2.5-coder:7b         → Fast routine tasks (lint, syntax)
#     - ollama:codellama:13b            → Mid-complexity code tasks
#     - ollama:deepseek-coder-v2:33b    → Best coding model for complex generation (~20GB RAM)
#     - ollama:deepseek-coder-v2:16b    → Lighter alternative for complex code (~10GB RAM)
#     - ollama:llama3.2:8b              → General purpose analysis
#
#   Claude Models (powerful reasoning, external):
#     - haiku  → Simple validation (fallback for Ollama)
#     - sonnet → Gap analysis, decision making, synthesis
#     - opus   → Critical strategic decisions (rarely used)
#
# See MODEL_STRATEGY.md for detailed rationale

# ==============================================================================
# Setup Leaders - Simple Validation
# Use Ollama for speed, fallback to haiku if unavailable
# ==============================================================================
elab-setup-leader: ollama:qwen2.5-coder:7b
dev-setup-leader: ollama:qwen2.5-coder:7b
qa-verify-setup-leader: ollama:qwen2.5-coder:7b
pm-bootstrap-setup-leader: ollama:qwen2.5-coder:7b
pm-harness-setup-leader: ollama:qwen2.5-coder:7b
elab-epic-setup-leader: ollama:qwen2.5-coder:7b

# ==============================================================================
# Work Leaders - Gap Analysis & Strategic Planning
# KEEP ON CLAUDE SONNET - Requires deep reasoning and judgment
# ==============================================================================
pm-story-generation-leader: sonnet
pm-story-seed-agent: sonnet
pm-story-fix-leader: sonnet
pm-story-adhoc-leader: sonnet
pm-story-bug-leader: sonnet
pm-story-followup-leader: sonnet
pm-story-split-leader: sonnet
pm-triage-leader: sonnet
pm-bootstrap-analysis-leader: sonnet
elab-analyst: sonnet
elab-epic-interactive-leader: sonnet
dev-implement-planning-leader: sonnet
dev-implement-implementation-leader: sonnet
qa-verify-verification-leader: sonnet

# ==============================================================================
# Story Workflow Nodes - Gap Analysis & Decision Making
# KEEP ON CLAUDE SONNET - Core reasoning tasks that define quality
# ==============================================================================

# Gap Analysis - Requires multi-perspective reasoning
story-fanout-pm: sonnet          # PM gap analysis - strategic product thinking
story-fanout-ux: sonnet          # UX gap analysis - user empathy & design reasoning
story-fanout-qa: sonnet          # QA gap analysis - risk assessment & test strategy

# Attack Analysis - Adversarial reasoning to challenge assumptions
story-attack: sonnet             # Red team analysis - creative critical thinking

# Readiness Scoring - Multi-factor decision making with judgment calls
story-readiness-score: sonnet    # Complex scoring with weighted factors

# Synthesis - Combine multiple analyses into coherent narrative
story-synthesize: sonnet         # Synthesize PM, UX, QA insights with conflict resolution

# Gap Hygiene - Quality checks (can use mid-tier Ollama)
story-gap-hygiene: ollama:codellama:13b

# Commitment Gate - Critical go/no-go decisions
commitment-gate: sonnet

# ==============================================================================
# PM Workers - Routine Tasks
# Use Ollama for speed
# ==============================================================================
pm-draft-test-plan: ollama:qwen2.5-coder:7b
pm-dev-feasibility-review: ollama:codellama:13b
pm-uiux-recommendations: ollama:llama3.2:8b

# ==============================================================================
# Code Review Workers - Routine Code Analysis
# Use Ollama for pattern-based checks, Claude for security
# ==============================================================================
code-review-lint: ollama:qwen2.5-coder:7b
code-review-syntax: ollama:qwen2.5-coder:7b
code-review-style-compliance: ollama:qwen2.5-coder:7b
code-review-security: sonnet                    # KEEP ON CLAUDE - security requires deep analysis
code-review-typecheck: ollama:qwen2.5-coder:7b
code-review-build: ollama:qwen2.5-coder:7b

# ==============================================================================
# Dev Implementation Workers
# Mix: Ollama for routine, Claude for strategic, DeepSeek for complex code
# ==============================================================================
dev-implement-planner: sonnet                              # Strategic planning requires reasoning
dev-implement-plan-validator: ollama:codellama:13b         # Structural validation
dev-implement-backend-coder: ollama:deepseek-coder-v2:33b  # Best coding model (use :16b if <20GB RAM)
dev-implement-frontend-coder: ollama:deepseek-coder-v2:33b # Best coding model (use :16b if <20GB RAM)
dev-implement-contracts: ollama:qwen2.5-coder:7b           # Interface definitions
dev-implement-verifier: ollama:codellama:13b               # Verification logic
dev-implement-playwright: ollama:qwen2.5-coder:7b          # E2E test generation
dev-implement-proof-writer: ollama:llama3.2:8b             # Documentation writing
dev-implement-learnings: ollama:llama3.2:8b                # Extract learnings

# ==============================================================================
# Epic Elaboration Workers - Routine Analysis
# Use Ollama except for security
# ==============================================================================
elab-epic-engineering: ollama:codellama:13b
elab-epic-product: ollama:llama3.2:8b
elab-epic-qa: ollama:qwen2.5-coder:7b
elab-epic-ux: ollama:llama3.2:8b
elab-epic-platform: ollama:codellama:13b
elab-epic-security: sonnet                      # KEEP ON CLAUDE - security analysis

# ==============================================================================
# Completion Leaders - Status Updates & Formatting
# Use Ollama for speed
# ==============================================================================
elab-completion-leader: ollama:qwen2.5-coder:7b
dev-documentation-leader: ollama:llama3.2:8b
qa-verify-completion-leader: ollama:qwen2.5-coder:7b
pm-bootstrap-generation-leader: ollama:qwen2.5-coder:7b
pm-harness-generation-leader: ollama:qwen2.5-coder:7b
elab-epic-aggregation-leader: ollama:llama3.2:8b
elab-epic-updates-leader: ollama:qwen2.5-coder:7b

# ==============================================================================
# Utility Agents - Routine Tasks
# Use Ollama
# ==============================================================================
knowledge-context-loader: ollama:qwen2.5-coder:7b
kb-writer: ollama:llama3.2:8b

# ==============================================================================
# Fix Agents - Problem Diagnosis
# KEEP ON CLAUDE - Requires diagnostic reasoning
# ==============================================================================
dev-fix-fix-leader: sonnet
