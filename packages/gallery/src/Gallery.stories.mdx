import { Meta, Story, Canvas, ArgsTable, Description } from '@storybook/addon-docs';
import { Gallery } from './components/Gallery/Gallery';

<Meta title="Gallery/Documentation" component={Gallery} />

# Gallery Component System

The Gallery component system provides a comprehensive, flexible solution for displaying collections of items with various layouts, interactions, and data types.

## Overview

The Gallery system consists of:

- **Gallery Component**: Main component that orchestrates everything
- **Layout Components**: Grid, Masonry, List, Table, Carousel
- **Data Adapters**: Transform any data type to gallery format
- **Presets**: Pre-configured setups for common use cases
- **Interactive Features**: Selection, filtering, sorting, batch operations

## Quick Start

```tsx
import { Gallery, GalleryAdapters } from '@monorepo/gallery';

// Basic usage with preset
<Gallery
  items={items}
  preset="inspiration"
  adapter={GalleryAdapters.inspiration}
  actions={{
    onItemClick: (item) => console.log('Clicked:', item),
    onItemLike: (id, liked) => console.log('Liked:', id, liked),
  }}
/>

// Custom configuration
<Gallery
  items={items}
  config={{
    layout: 'grid',
    viewMode: 'comfortable',
    selectable: true,
    filterConfig: {
      searchable: true,
      tagFilter: true,
    },
  }}
  actions={actions}
/>
```

## Layouts

### Grid Layout
Perfect for consistent card-based displays with responsive columns.

```tsx
<Gallery
  items={items}
  config={{
    layout: 'grid',
    columns: { xs: 1, sm: 2, md: 3, lg: 4, xl: 5 },
    gap: 4,
  }}
/>
```

### Masonry Layout
Ideal for items with varying heights, like Pinterest-style galleries.

```tsx
<Gallery
  items={items}
  config={{
    layout: 'masonry',
    columns: { xs: 1, sm: 2, md: 3, lg: 4 },
    gap: 6,
  }}
/>
```

### List Layout
Compact vertical layout for space-constrained areas.

```tsx
<Gallery
  items={items}
  config={{
    layout: 'list',
    viewMode: 'compact',
  }}
/>
```

### Table Layout
Data-focused layout for management interfaces.

```tsx
<Gallery
  items={items}
  config={{
    layout: 'table',
    selectable: true,
    sortable: true,
  }}
/>
```

### Carousel Layout
Horizontal scrolling for featured content.

```tsx
<Gallery
  items={items}
  config={{
    layout: 'carousel',
    itemsPerPage: 3,
    viewMode: 'spacious',
  }}
/>
```

## Data Adapters

Data adapters transform your data into the standard gallery format:

### Built-in Adapters

```tsx
import { GalleryAdapters } from '@monorepo/gallery';

// For image galleries
<Gallery adapter={GalleryAdapters.image} />

// For MOC inspiration
<Gallery adapter={GalleryAdapters.inspiration} />

// For building instructions
<Gallery adapter={GalleryAdapters.instruction} />

// For wishlists
<Gallery adapter={GalleryAdapters.wishlist} />
```

### Custom Adapters

```tsx
import { createAdapter } from '@monorepo/gallery';

const customAdapter = createAdapter({
  idField: 'uuid',
  titleField: 'name',
  imageField: 'photo',
  descriptionField: 'info',
  authorField: 'creator',
  tagsField: 'keywords',
  categoryField: 'type',
  createdAtField: 'timestamp',
  type: 'custom',
  searchFields: ['name', 'info', 'creator'],
  metadataFields: ['extra1', 'extra2'],
});
```

## Presets

Presets provide optimized configurations for common use cases:

### Available Presets

- **`inspiration`**: Masonry layout for creative browsing
- **`instructions`**: Grid layout with selection for management
- **`wishlist`**: Grid layout with priority sorting
- **`compact`**: List layout for sidebars and modals
- **`table`**: Table layout for data management
- **`carousel`**: Carousel layout for featured content

### Using Presets

```tsx
// Use preset as-is
<Gallery preset="inspiration" />

// Customize preset
<Gallery
  preset="inspiration"
  config={{
    columns: { lg: 5, xl: 6 }, // Override columns
    itemsPerPage: 30, // Override pagination
  }}
/>
```

## Interactive Features

### Selection

```tsx
<Gallery
  config={{
    selectable: true,
    multiSelect: true,
  }}
  selectedItems={selectedIds}
  actions={{
    onItemsSelected: (ids) => setSelectedIds(ids),
  }}
/>
```

### Search and Filtering

```tsx
<Gallery
  config={{
    filterConfig: {
      searchable: true,
      searchFields: ['title', 'description', 'author'],
      tagFilter: true,
      categoryFilter: true,
      customFilters: [
        {
          key: 'difficulty',
          label: 'Difficulty',
          type: 'select',
          options: [
            { value: 'beginner', label: 'Beginner' },
            { value: 'intermediate', label: 'Intermediate' },
            { value: 'advanced', label: 'Advanced' },
          ],
        },
      ],
    },
  }}
/>
```

### Sorting

```tsx
<Gallery
  config={{
    sortable: true,
    sortOptions: [
      { field: 'createdAt', direction: 'desc', label: 'Newest First' },
      { field: 'title', direction: 'asc', label: 'Title A-Z' },
      { field: 'author', direction: 'asc', label: 'Author A-Z' },
    ],
  }}
/>
```

### Batch Operations

```tsx
<Gallery
  config={{ selectable: true, multiSelect: true }}
  actions={{
    onBatchDelete: (ids) => deleteItems(ids),
    onBatchDownload: (ids) => downloadItems(ids),
    onBatchShare: (ids) => shareItems(ids),
  }}
/>
```

## View Modes

Control the density and detail level of item display:

- **`compact`**: Minimal information, high density
- **`comfortable`**: Balanced information and spacing
- **`spacious`**: Maximum information and spacing

```tsx
<Gallery
  config={{
    viewMode: 'comfortable', // or 'compact' | 'spacious'
  }}
/>
```

## Animations

Configure smooth transitions and animations:

```tsx
<Gallery
  config={{
    animations: {
      enabled: true,
      duration: 0.3,
      stagger: true,
      staggerDelay: 0.05,
    },
  }}
/>
```

## Responsive Design

The gallery is mobile-first and fully responsive:

```tsx
<Gallery
  config={{
    columns: {
      xs: 1,    // Mobile
      sm: 2,    // Small tablets
      md: 3,    // Tablets
      lg: 4,    // Desktop
      xl: 5,    // Large desktop
    },
    gap: 4,     // Consistent spacing
  }}
/>
```

## Error Handling

Handle loading and error states gracefully:

```tsx
<Gallery
  items={items}
  loading={isLoading}
  error={error}
  actions={{
    onRefresh: () => refetchData(),
  }}
/>
```

## Performance

The gallery includes several performance optimizations:

- **Virtual Scrolling**: For large datasets (coming soon)
- **Image Lazy Loading**: Load images as they come into view
- **Pagination**: Limit items per page
- **Infinite Scroll**: Load more items on demand

```tsx
<Gallery
  config={{
    itemsPerPage: 20,
    infiniteScroll: true,
  }}
  actions={{
    onLoadMore: () => loadMoreItems(),
  }}
/>
```

## Accessibility

The gallery includes comprehensive accessibility features:

- **Keyboard Navigation**: Full keyboard support
- **Screen Reader Support**: ARIA labels and descriptions
- **Focus Management**: Proper focus handling
- **High Contrast**: Supports high contrast mode

## TypeScript Support

Full TypeScript support with comprehensive type definitions:

```tsx
import type { 
  GalleryItem, 
  GalleryConfig, 
  GalleryActions,
  DataAdapter 
} from '@monorepo/gallery';

const config: GalleryConfig = {
  layout: 'grid',
  viewMode: 'comfortable',
  // ... fully typed
};

const actions: GalleryActions = {
  onItemClick: (item: GalleryItem) => void,
  // ... fully typed
};
```

## Best Practices

1. **Choose the Right Layout**: Grid for consistency, Masonry for varied content, List for compact spaces
2. **Use Presets**: Start with presets and customize as needed
3. **Optimize Images**: Use appropriate image sizes and formats
4. **Handle Loading States**: Always provide loading and error states
5. **Consider Performance**: Use pagination for large datasets
6. **Test Accessibility**: Ensure keyboard navigation and screen reader support

## Migration Guide

If migrating from individual gallery implementations:

```tsx
// Before: Custom gallery implementation
<div className="grid grid-cols-1 md:grid-cols-3 gap-4">
  {items.map(item => (
    <CustomCard key={item.id} item={item} />
  ))}
</div>

// After: Gallery component
<Gallery
  items={items}
  preset="inspiration" // or custom config
  actions={actions}
/>
```

This reduces code by ~80% while adding more features and better UX.
