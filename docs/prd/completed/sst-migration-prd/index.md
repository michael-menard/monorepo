# LEGO Projects API - Serverless Migration to SST (Ion v3)

## Table of Contents

- [LEGO Projects API - Serverless Migration to SST (Ion v3)](#table-of-contents)
  - [Product Requirements Document (PRD)](product-requirements-document-prd.md)
  - [Goals and Background Context](goals-and-background-context.md)
    - [Goals](goals-and-background-context.md#goals)
    - [Background Context](goals-and-background-context.md#background-context)
    - [Change Log](goals-and-background-context.md#change-log)
  - [Requirements](requirements.md)
    - [Functional Requirements](requirements.md#functional-requirements)
    - [Non-Functional Requirements](requirements.md#non-functional-requirements)
  - [Technical Assumptions](technical-assumptions.md)
    - [Repository Structure: Monorepo (Existing Turborepo)](technical-assumptions.md#repository-structure-monorepo-existing-turborepo)
    - [Service Architecture: Serverless (Lambda + API Gateway)](technical-assumptions.md#service-architecture-serverless-lambda-api-gateway)
    - [Testing Requirements: Full Testing Pyramid](technical-assumptions.md#testing-requirements-full-testing-pyramid)
    - [Language & Framework Stack](technical-assumptions.md#language-framework-stack)
    - [Database Configuration](technical-assumptions.md#database-configuration)
    - [Additional Technical Assumptions and Requests](technical-assumptions.md#additional-technical-assumptions-and-requests)
  - [Epic List](epic-list.md)
    - [Epic 1: SST Infrastructure Foundation & Database Migration](epic-list.md#epic-1-sst-infrastructure-foundation-database-migration)
    - [Epic 2: Core MOC Instructions API Migration](epic-list.md#epic-2-core-moc-instructions-api-migration)
    - [Epic 3: Gallery & Wishlist APIs Migration](epic-list.md#epic-3-gallery-wishlist-apis-migration)
    - [Epic 4: User Profile & Advanced Features Migration](epic-list.md#epic-4-user-profile-advanced-features-migration)
    - [Epic 5: Production Deployment, Monitoring & Cutover](epic-list.md#epic-5-production-deployment-monitoring-cutover)
  - [Epic 1: SST Infrastructure Foundation & Database Migration](epic-1-sst-infrastructure-foundation-database-migration.md)
    - [Story 1.1: Initialize SST v3 Project Structure](epic-1-sst-infrastructure-foundation-database-migration.md#story-11-initialize-sst-v3-project-structure)
    - [Story 1.2: Configure VPC Networking Infrastructure](epic-1-sst-infrastructure-foundation-database-migration.md#story-12-configure-vpc-networking-infrastructure)
    - [Story 1.3: Provision PostgreSQL RDS with RDS Proxy](epic-1-sst-infrastructure-foundation-database-migration.md#story-13-provision-postgresql-rds-with-rds-proxy)
    - [Story 1.4: Configure ElastiCache Redis Cluster](epic-1-sst-infrastructure-foundation-database-migration.md#story-14-configure-elasticache-redis-cluster)
    - [Story 1.5: Provision OpenSearch Domain](epic-1-sst-infrastructure-foundation-database-migration.md#story-15-provision-opensearch-domain)
    - [Story 1.6: Configure S3 Buckets and Lifecycle Policies](epic-1-sst-infrastructure-foundation-database-migration.md#story-16-configure-s3-buckets-and-lifecycle-policies)
    - [Story 1.7: Implement Drizzle ORM Schema and Migrations](epic-1-sst-infrastructure-foundation-database-migration.md#story-17-implement-drizzle-orm-schema-and-migrations)
    - [Story 1.8: Create Health Check Lambda Function](epic-1-sst-infrastructure-foundation-database-migration.md#story-18-create-health-check-lambda-function)
  - [Epic 2: Core MOC Instructions API Migration](epic-2-core-moc-instructions-api-migration.md)
    - [Story 2.1: Create MOC Instructions Lambda Handler Foundation](epic-2-core-moc-instructions-api-migration.md#story-21-create-moc-instructions-lambda-handler-foundation)
    - [Story 2.2: Implement GET /api/mocs - List All MOCs](epic-2-core-moc-instructions-api-migration.md#story-22-implement-get-apimocs-list-all-mocs)
    - [Story 2.3: Implement GET /api/mocs/:id - Retrieve MOC Detail](epic-2-core-moc-instructions-api-migration.md#story-23-implement-get-apimocsid-retrieve-moc-detail)
    - [Story 2.4: Implement POST /api/mocs - Create New MOC](epic-2-core-moc-instructions-api-migration.md#story-24-implement-post-apimocs-create-new-moc)
    - [Story 2.5: Implement PATCH /api/mocs/:id - Update MOC](epic-2-core-moc-instructions-api-migration.md#story-25-implement-patch-apimocsid-update-moc)
    - [Story 2.6: Implement DELETE /api/mocs/:id - Delete MOC](epic-2-core-moc-instructions-api-migration.md#story-26-implement-delete-apimocsid-delete-moc)
    - [Story 2.7: Implement MOC File Upload Handler](epic-2-core-moc-instructions-api-migration.md#story-27-implement-moc-file-upload-handler)
    - [Story 2.8: Implement MOC Search with Elasticsearch](epic-2-core-moc-instructions-api-migration.md#story-28-implement-moc-search-with-elasticsearch)
  - [Epic 3: Gallery & Wishlist APIs Migration](epic-3-gallery-wishlist-apis-migration.md)
    - [Story 3.1: Create Gallery Images Lambda Handler](epic-3-gallery-wishlist-apis-migration.md#story-31-create-gallery-images-lambda-handler)
    - [Story 3.2: Implement POST /api/images - Upload Gallery Image](epic-3-gallery-wishlist-apis-migration.md#story-32-implement-post-apiimages-upload-gallery-image)
    - [Story 3.3: Implement Gallery Image CRUD Operations](epic-3-gallery-wishlist-apis-migration.md#story-33-implement-gallery-image-crud-operations)
    - [Story 3.4: Implement Album Management Operations](epic-3-gallery-wishlist-apis-migration.md#story-34-implement-album-management-operations)
    - [Story 3.5: Create Wishlist Lambda Handler](epic-3-gallery-wishlist-apis-migration.md#story-35-create-wishlist-lambda-handler)
    - [Story 3.6: Implement Wishlist CRUD Operations](epic-3-gallery-wishlist-apis-migration.md#story-36-implement-wishlist-crud-operations)
    - [Story 3.7: Implement Wishlist Image Upload](epic-3-gallery-wishlist-apis-migration.md#story-37-implement-wishlist-image-upload)
    - [Story 3.8: Implement Gallery and Wishlist Search](epic-3-gallery-wishlist-apis-migration.md#story-38-implement-gallery-and-wishlist-search)
  - [Epic 4: User Profile & Advanced Features Migration](epic-4-user-profile-advanced-features-migration.md)
    - [Story 4.1: Create User Profile Lambda Handler](epic-4-user-profile-advanced-features-migration.md#story-41-create-user-profile-lambda-handler)
    - [Story 4.2: Implement GET /api/users/:id - Retrieve User Profile](epic-4-user-profile-advanced-features-migration.md#story-42-implement-get-apiusersid-retrieve-user-profile)
    - [Story 4.3: Implement PATCH /api/users/:id - Update User Profile](epic-4-user-profile-advanced-features-migration.md#story-43-implement-patch-apiusersid-update-user-profile)
    - [Story 4.4: Implement POST /api/users/:id/avatar - Upload Avatar](epic-4-user-profile-advanced-features-migration.md#story-44-implement-post-apiusersidavatar-upload-avatar)
    - [Story 4.5: Implement DELETE /api/users/:id/avatar - Remove Avatar](epic-4-user-profile-advanced-features-migration.md#story-45-implement-delete-apiusersidavatar-remove-avatar)
    - [Story 4.6: Implement CSV Parts List Parser Lambda](epic-4-user-profile-advanced-features-migration.md#story-46-implement-csv-parts-list-parser-lambda)
    - [Story 4.7: Implement Multi-File Upload for MOCs](epic-4-user-profile-advanced-features-migration.md#story-47-implement-multi-file-upload-for-mocs)
    - [Story 4.8: Implement Advanced Error Handling and Retry Logic](epic-4-user-profile-advanced-features-migration.md#story-48-implement-advanced-error-handling-and-retry-logic)
  - [Epic 5: Production Deployment, Monitoring & Cutover](epic-5-production-deployment-monitoring-cutover.md)
    - [Story 5.1: Implement CloudWatch Dashboards](epic-5-production-deployment-monitoring-cutover.md#story-51-implement-cloudwatch-dashboards)
    - [Story 5.2: Configure CloudWatch Alarms and SNS Notifications](epic-5-production-deployment-monitoring-cutover.md#story-52-configure-cloudwatch-alarms-and-sns-notifications)
    - [Story 5.3: Enable AWS X-Ray Distributed Tracing](epic-5-production-deployment-monitoring-cutover.md#story-53-enable-aws-x-ray-distributed-tracing)
    - [Story 5.4: Configure CI/CD Pipeline for Automated Deployments](epic-5-production-deployment-monitoring-cutover.md#story-54-configure-cicd-pipeline-for-automated-deployments)
    - [Story 5.5: Implement Blue/Green Deployment Strategy](epic-5-production-deployment-monitoring-cutover.md#story-55-implement-bluegreen-deployment-strategy)
    - [Story 5.6: Validate Performance and Cost Metrics](epic-5-production-deployment-monitoring-cutover.md#story-56-validate-performance-and-cost-metrics)
    - [Story 5.7: Configure Cost Monitoring and Budgets](epic-5-production-deployment-monitoring-cutover.md#story-57-configure-cost-monitoring-and-budgets)
    - [Story 5.8: Decommission Legacy ECS Infrastructure](epic-5-production-deployment-monitoring-cutover.md#story-58-decommission-legacy-ecs-infrastructure)
  - [Checklist Results Report](checklist-results-report.md)
  - [Next Steps](next-steps.md)
    - [UX Expert Prompt](next-steps.md#ux-expert-prompt)
    - [Architect Prompt](next-steps.md#architect-prompt)
  - [Document Metadata](document-metadata.md)
