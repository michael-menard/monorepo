# Story 5.6: Delete Item Endpoint

## Status

Approved

## Story

**As a** user,
**I want** to remove items from my wishlist,
**so that** I can clean up purchased items.

## Acceptance Criteria

1. â¬œ `useDeleteWishlistItemMutation` hook available
2. â¬œ DELETE /wishlist/:id
3. â¬œ Optimistic removal from list
4. â¬œ Rollback on error
5. ðŸ”„ Backend: DELETE /wishlist/:id endpoint required

## Tasks / Subtasks

- [ ] **Task 1: Define Mutation**
  - [ ] Add deleteWishlistItem mutation
  - [ ] Configure optimistic update

## Dev Notes

```typescript
deleteWishlistItem: builder.mutation<void, string>({
  query: (id) => ({
    url: `/wishlist/${id}`,
    method: 'DELETE',
  }),
  invalidatesTags: ['WishlistItems'],
  async onQueryStarted(id, { dispatch, queryFulfilled }) {
    const patchResult = dispatch(
      wishlistApi.util.updateQueryData('getWishlist', undefined, (draft) => {
        const index = draft.findIndex(item => item.id === id)
        if (index !== -1) draft.splice(index, 1)
      })
    )
    try {
      await queryFulfilled
    } catch {
      patchResult.undo()
    }
  },
}),
```

## Change Log

| Date       | Version | Description   | Author   |
| ---------- | ------- | ------------- | -------- |
| 2025-11-28 | 0.1     | Initial draft | SM Agent |
