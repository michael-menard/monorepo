# Story insp-1023: Delete Album UI (two-option modal)

## Status

Draft

## Story

**As a** user,
**I want** a clear choice when deleting an album,
**so that** I can decide whether to keep or delete the contents.

## Acceptance Criteria

1. Delete button in album view opens confirmation modal
2. Modal shows two radio options: "Delete album only" vs "Delete album and contents"
3. Modal shows content count (images and sub-albums)
4. Default selection is "Delete album only" (safer option)
5. Confirm triggers appropriate delete mode
6. Cancel closes modal
7. Redirects to gallery after delete

## Tasks / Subtasks

- [ ] **Task 1: Add Delete Button** (AC: 1)
  - [ ] Add "Delete" button to album header
  - [ ] Use destructive variant
  - [ ] Opens DeleteAlbumModal

- [ ] **Task 2: Create Confirmation Modal** (AC: 2, 3, 4)
  - [ ] Create DeleteAlbumModal component
  - [ ] Show album name in title
  - [ ] Show content counts
  - [ ] Add two radio options
  - [ ] Default to "Delete album only"

- [ ] **Task 3: Implement Delete Actions** (AC: 5, 7)
  - [ ] Call delete mutation with deleteContents param
  - [ ] Show loading state
  - [ ] Navigate to gallery on success

- [ ] **Task 4: Handle Cancel** (AC: 6)
  - [ ] Close modal on cancel

## Dev Notes

### Component Location
`apps/web/main-app/src/routes/inspiration/-components/DeleteAlbumModal/index.tsx`

### Modal Design (from PRD)

```
┌─────────────────────────────────────────────────────┐
│  Delete "Diorama Ideas"?                            │
│                                                     │
│  This album contains 12 images and 2 sub-albums.    │
│                                                     │
│  ○ Delete album only                                │
│    Images and sub-albums will remain in the gallery │
│                                                     │
│  ○ Delete album and all contents                    │
│    12 images and 2 sub-albums will be permanently   │
│    deleted. This cannot be undone.                  │
│                                                     │
│              [Cancel]  [Delete]                     │
└─────────────────────────────────────────────────────┘
```

### Implementation

```tsx
function DeleteAlbumModal({ album, contentCounts, onClose }) {
  const navigate = useNavigate()
  const [deleteContents, setDeleteContents] = useState(false)
  const [deleteAlbum, { isLoading }] = useDeleteAlbumMutation()

  const { inspirationCount, nestedAlbumCount } = contentCounts

  async function handleDelete() {
    try {
      await deleteAlbum({
        id: album.id,
        deleteContents,
      }).unwrap()
      navigate({ to: '/inspiration' })
      toast.success('Album deleted')
    } catch {
      toast.error('Failed to delete. Please try again.')
    }
  }

  return (
    <AlertDialog open onOpenChange={onClose}>
      <AlertDialogContent>
        <AlertDialogHeader>
          <AlertDialogTitle>Delete "{album.title}"?</AlertDialogTitle>
          <AlertDialogDescription>
            This album contains {inspirationCount} images and {nestedAlbumCount} sub-albums.
          </AlertDialogDescription>
        </AlertDialogHeader>

        <RadioGroup
          value={deleteContents ? 'all' : 'album-only'}
          onValueChange={(v) => setDeleteContents(v === 'all')}
        >
          <div className="flex items-start space-x-3 p-3 rounded border">
            <RadioGroupItem value="album-only" id="album-only" />
            <div>
              <Label htmlFor="album-only" className="font-medium">
                Delete album only
              </Label>
              <p className="text-sm text-muted-foreground">
                Images and sub-albums will remain in the gallery
              </p>
            </div>
          </div>
          <div className="flex items-start space-x-3 p-3 rounded border border-destructive/50">
            <RadioGroupItem value="all" id="all" />
            <div>
              <Label htmlFor="all" className="font-medium">
                Delete album and all contents
              </Label>
              <p className="text-sm text-destructive">
                {inspirationCount} images and {nestedAlbumCount} sub-albums will be
                permanently deleted. This cannot be undone.
              </p>
            </div>
          </div>
        </RadioGroup>

        <AlertDialogFooter>
          <AlertDialogCancel>Cancel</AlertDialogCancel>
          <AlertDialogAction
            onClick={handleDelete}
            disabled={isLoading}
            className="bg-destructive hover:bg-destructive/90"
          >
            {isLoading ? 'Deleting...' : 'Delete'}
          </AlertDialogAction>
        </AlertDialogFooter>
      </AlertDialogContent>
    </AlertDialog>
  )
}
```

### Dependencies
- insp-1022: Delete Album Endpoint

## Testing

- [ ] Delete button opens modal
- [ ] Modal shows content counts
- [ ] Default is "Delete album only"
- [ ] "Album only" orphans contents
- [ ] "Delete all" removes everything
- [ ] Cancel closes modal
- [ ] Redirects to gallery after delete

## Change Log

| Date       | Version | Description   | Author   |
| ---------- | ------- | ------------- | -------- |
| 2025-12-27 | 0.1     | Initial draft | SM Agent |
