# Story insp-1019: Album View Page

## Status

Draft

## Story

**As a** user,
**I want** to view an album's contents,
**so that** I can browse inspirations organized within a collection.

## Acceptance Criteria

1. Route /inspiration/albums/:id renders album view
2. Shows album header with title and metadata
3. Shows "Also in:" badges if album has multiple parents
4. Displays mixed grid of inspirations and nested albums
5. Back button returns to previous location
6. Shows empty state if album is empty

## Tasks / Subtasks

- [ ] **Task 1: Create Route** (AC: 1)
  - [ ] Create `routes/inspiration/albums/$id.tsx`
  - [ ] Configure route with id parameter
  - [ ] Add lazy loading

- [ ] **Task 2: Create Album Header** (AC: 2, 3)
  - [ ] Display album title
  - [ ] Show description if present
  - [ ] Show tags
  - [ ] Show "Also in:" parent album badges

- [ ] **Task 3: Display Contents** (AC: 4)
  - [ ] Fetch album contents using hook
  - [ ] Render AlbumCard for nested albums
  - [ ] Render InspirationCard for inspirations
  - [ ] Maintain sortOrder

- [ ] **Task 4: Add Navigation** (AC: 5)
  - [ ] Add back button
  - [ ] Use router history for navigation

- [ ] **Task 5: Handle Empty State** (AC: 6)
  - [ ] Show empty state component
  - [ ] Include action to add images

## Dev Notes

### Route Location
`apps/web/main-app/src/routes/inspiration/albums/$id.tsx`

### Page Structure

```tsx
function AlbumViewPage() {
  const { id } = Route.useParams()
  const navigate = useNavigate()
  const { data, isLoading } = useGetAlbumContentsQuery(id)

  if (isLoading) return <AlbumViewSkeleton />

  const { album, parentAlbums, inspirations, nestedAlbums } = data

  return (
    <div className="container mx-auto py-6">
      {/* Back navigation */}
      <Button variant="ghost" onClick={() => navigate({ to: '..' })}>
        <ArrowLeft className="w-4 h-4 mr-2" />
        Back
      </Button>

      {/* Album header */}
      <div className="mt-4 mb-6">
        <h1 className="text-2xl font-bold">{album.title}</h1>
        {album.description && (
          <p className="text-muted-foreground mt-2">{album.description}</p>
        )}
        {album.tags.length > 0 && (
          <div className="flex gap-2 mt-3">
            {album.tags.map(tag => <Badge key={tag}>{tag}</Badge>)}
          </div>
        )}
        {parentAlbums.length > 0 && (
          <div className="mt-4">
            <span className="text-sm text-muted-foreground">Also in: </span>
            {parentAlbums.map(parent => (
              <Badge
                key={parent.id}
                variant="outline"
                className="cursor-pointer ml-1"
                onClick={() => navigate({
                  to: '/inspiration/albums/$id',
                  params: { id: parent.id }
                })}
              >
                {parent.title}
              </Badge>
            ))}
          </div>
        )}
      </div>

      {/* Contents */}
      {nestedAlbums.length === 0 && inspirations.length === 0 ? (
        <EmptyAlbumState albumId={id} />
      ) : (
        <GalleryGrid>
          {nestedAlbums.map(nested => (
            <AlbumCard key={nested.id} album={nested} />
          ))}
          {inspirations.map(item => (
            <InspirationCard key={item.id} inspiration={item} />
          ))}
        </GalleryGrid>
      )}
    </div>
  )
}
```

### Empty State (from PRD)
"This album is empty. Drag images here or click to upload."

### Dependencies
- insp-1018: Get Album Contents Endpoint
- insp-1006: InspirationCard
- insp-1017: AlbumCard

## Testing

- [ ] Route renders with valid ID
- [ ] Shows 404 for invalid ID
- [ ] Header shows album metadata
- [ ] "Also in:" shows parent albums
- [ ] Contents display correctly
- [ ] Empty state shows for empty album
- [ ] Back button works

## Change Log

| Date       | Version | Description   | Author   |
| ---------- | ------- | ------------- | -------- |
| 2025-12-27 | 0.1     | Initial draft | SM Agent |
