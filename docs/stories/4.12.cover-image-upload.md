# Story 4.12: Cover Image Upload

## Status

Approved

## Story

**As a** user,
**I want** to upload a cover image for my MOC,
**so that** it displays in the gallery.

## Acceptance Criteria

1. ⬜ Image upload dropzone
2. ⬜ Drag and drop support
3. ⬜ Click to browse files
4. ⬜ Image type validation (jpg, png, webp)
5. ⬜ Max size validation (5MB)
6. ⬜ Preview before upload

## Tasks / Subtasks

- [ ] **Task 1: Create Dropzone**
  - [ ] Use react-dropzone or similar
  - [ ] Style drop area

- [ ] **Task 2: Validation**
  - [ ] File type check
  - [ ] File size check
  - [ ] Error messages

## Dev Notes

```typescript
interface CoverImageUploadProps {
  value: File | null
  onChange: (file: File | null) => void
}

const ACCEPTED_TYPES = ['image/jpeg', 'image/png', 'image/webp']
const MAX_SIZE = 5 * 1024 * 1024 // 5MB

export function CoverImageUpload({ value, onChange }: CoverImageUploadProps) {
  const onDrop = useCallback((acceptedFiles: File[]) => {
    const file = acceptedFiles[0]
    if (file) onChange(file)
  }, [onChange])

  const { getRootProps, getInputProps, isDragActive } = useDropzone({
    onDrop,
    accept: { 'image/*': ['.jpg', '.jpeg', '.png', '.webp'] },
    maxSize: MAX_SIZE,
    multiple: false,
  })

  return (
    <div
      {...getRootProps()}
      className={cn(
        'border-2 border-dashed rounded-lg p-8 text-center cursor-pointer',
        isDragActive && 'border-primary bg-primary/5'
      )}
    >
      <input {...getInputProps()} />
      <ImagePlus className="mx-auto h-12 w-12 text-muted-foreground" />
      <p className="mt-2">Drop cover image here or click to browse</p>
      <p className="text-sm text-muted-foreground">JPG, PNG, WebP up to 5MB</p>
    </div>
  )
}
```

## Change Log

| Date       | Version | Description   | Author   |
| ---------- | ------- | ------------- | -------- |
| 2025-11-28 | 0.1     | Initial draft | SM Agent |
