# Story 4.26: Delete Individual File

## Status

Approved

## Story

**As a** user,
**I want** to delete individual files,
**so that** I can remove unwanted attachments.

## Acceptance Criteria

1. ⬜ Delete button per file
2. ⬜ Confirmation before delete
3. ⬜ Calls deleteFile mutation
4. ⬜ Removes from list on success
5. ⬜ Cannot delete last/only cover image

## Tasks / Subtasks

- [ ] **Task 1: Delete Button**
  - [ ] Add to file item
  - [ ] Open confirmation

- [ ] **Task 2: Delete Flow**
  - [ ] Confirm dialog
  - [ ] API call
  - [ ] Update UI

## Dev Notes

```typescript
interface FileItemProps {
  file: MocFile
  mocId: string
  canDelete?: boolean
}

function FileItem({ file, mocId, canDelete = true }: FileItemProps) {
  const [open, setOpen] = useState(false)
  const [deleteFile, { isLoading }] = useDeleteFileMutation()

  const handleDelete = async () => {
    try {
      await deleteFile({ mocId, fileId: file.id }).unwrap()
      toast.success('File deleted')
      setOpen(false)
    } catch {
      toast.error('Failed to delete file')
    }
  }

  return (
    <div className="flex items-center justify-between">
      <FileInfo file={file} />
      {canDelete && (
        <>
          <Button variant="ghost" size="icon" onClick={() => setOpen(true)}>
            <Trash2 className="h-4 w-4 text-destructive" />
          </Button>
          <AlertDialog open={open} onOpenChange={setOpen}>
            {/* Confirmation content */}
          </AlertDialog>
        </>
      )}
    </div>
  )
}
```

## Change Log

| Date       | Version | Description   | Author   |
| ---------- | ------- | ------------- | -------- |
| 2025-11-28 | 0.1     | Initial draft | SM Agent |
