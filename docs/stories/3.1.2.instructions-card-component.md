# Story 3.1.2: Instructions Card Component

## Status

Draft

## Story

**As a** user,
**I want** instruction items displayed in informative cards,
**so that** I can see key details at a glance.

## Acceptance Criteria

1. ⬜ InstructionCard component extends GalleryCard
2. ⬜ Displays thumbnail image
3. ⬜ Shows instruction name/title
4. ⬜ Shows piece count badge
5. ⬜ Shows theme tag
6. ⬜ Click navigates to instruction detail page
7. ⬜ Hover shows additional actions (favorite, edit)

## Tasks / Subtasks

- [ ] **Task 1: Create InstructionCard Component**
  - [ ] Create `routes/instructions/-components/InstructionCard.tsx`
  - [ ] Extend/compose with GalleryCard from @repo/gallery
  - [ ] Define Instruction type or import from API types

- [ ] **Task 2: Card Content**
  - [ ] Thumbnail image with aspect ratio
  - [ ] Title text (truncate if long)
  - [ ] Piece count as Badge
  - [ ] Theme as subtle tag

- [ ] **Task 3: Card Actions**
  - [ ] onClick navigates to detail
  - [ ] Hover overlay with action buttons
  - [ ] Favorite heart icon
  - [ ] Edit pencil icon

## Dev Notes

### Component API

```typescript
interface Instruction {
  id: string
  name: string
  thumbnail: string
  pieceCount: number
  theme: string
  tags: string[]
  createdAt: string
  isFavorite?: boolean
}

interface InstructionCardProps {
  instruction: Instruction
  onFavorite?: (id: string) => void
  onEdit?: (id: string) => void
}

function InstructionCard({ instruction, onFavorite, onEdit }: InstructionCardProps) {
  const navigate = useNavigate()

  return (
    <GalleryCard
      image={{
        src: instruction.thumbnail,
        alt: instruction.name,
        aspectRatio: '4/3',
      }}
      title={instruction.name}
      onClick={() => navigate({ to: '/instructions/$instructionId', params: { instructionId: instruction.id } })}
      metadata={
        <div className="flex items-center gap-2">
          <Badge variant="secondary">{instruction.pieceCount} pieces</Badge>
          <span className="text-sm text-muted-foreground">{instruction.theme}</span>
        </div>
      }
      actions={
        <div className="flex gap-1">
          <Button
            variant="ghost"
            size="icon"
            onClick={(e) => {
              e.stopPropagation()
              onFavorite?.(instruction.id)
            }}
          >
            <Heart className={cn(instruction.isFavorite && 'fill-current text-red-500')} />
          </Button>
          <Button
            variant="ghost"
            size="icon"
            onClick={(e) => {
              e.stopPropagation()
              onEdit?.(instruction.id)
            }}
          >
            <Pencil />
          </Button>
        </div>
      }
    />
  )
}
```

### Hover State Actions

```typescript
// Actions only visible on hover
<div className="absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-2">
  <Button variant="secondary" size="sm">
    <Heart className="w-4 h-4 mr-1" />
    Favorite
  </Button>
  <Button variant="secondary" size="sm">
    <Pencil className="w-4 h-4 mr-1" />
    Edit
  </Button>
</div>
```

## Testing

- [ ] Unit test: renders instruction data correctly
- [ ] Unit test: click calls navigation
- [ ] Unit test: favorite button calls onFavorite
- [ ] Unit test: edit button calls onEdit
- [ ] Unit test: buttons stop propagation

## Change Log

| Date       | Version | Description   | Author   |
| ---------- | ------- | ------------- | -------- |
| 2025-11-30 | 0.1     | Initial draft | SM Agent |
