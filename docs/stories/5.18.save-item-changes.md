# Story 5.18: Save Item Changes

## Status

Approved

## Story

**As a** user,
**I want** to save my edits,
**so that** changes are persisted.

## Acceptance Criteria

1. ⬜ Save calls updateWishlistItem
2. ⬜ Shows success toast
3. ⬜ Closes modal
4. ⬜ List updates immediately
5. ⬜ Handles errors

## Tasks / Subtasks

- [ ] **Task 1: Update Handler**
  - [ ] Check mode is edit
  - [ ] Call update mutation

- [ ] **Task 2: Success Flow**
  - [ ] Toast notification
  - [ ] Close modal

## Dev Notes

```typescript
const [updateItem, { isLoading: isUpdating }] = useUpdateWishlistItemMutation()

const onSubmit = async (values: WishlistItemInput) => {
  try {
    if (mode === 'edit' && defaultValues?.id) {
      await updateItem({ id: defaultValues.id, ...values }).unwrap()
      toast.success('Item updated!')
    } else {
      await addItem(values).unwrap()
      toast.success('Item added!')
    }
    onSuccess()
  } catch (error) {
    toast.error(mode === 'edit' ? 'Failed to update item' : 'Failed to add item')
  }
}

const isLoading = isAdding || isUpdating
```

## Change Log

| Date       | Version | Description   | Author   |
| ---------- | ------- | ------------- | -------- |
| 2025-11-28 | 0.1     | Initial draft | SM Agent |
