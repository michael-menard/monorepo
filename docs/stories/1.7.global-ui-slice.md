# Story 1.7: Global UI Slice

## Status

Approved

## Story

**As a** developer,
**I want** a globalUISlice for sidebar state and loading flags,
**so that** UI state is centralized and consistent.

## Acceptance Criteria

1. ⬜ globalUISlice created with createSlice
2. ⬜ Sidebar state: isOpen, isCollapsed
3. ⬜ Loading flags: isNavigating, isPageLoading
4. ⬜ Modal state: activeModal, modalProps
5. ⬜ Actions: toggleSidebar, setSidebarOpen, setNavigating, openModal, closeModal
6. ⬜ Selectors for all state properties
7. ⬜ Integrated into store

## Tasks / Subtasks

- [ ] **Task 1: Check for Existing Implementation**
  - [ ] Search for globalUISlice or similar
  - [ ] Check navigationSlice for related state
  - [ ] Document what exists vs needs creation

- [ ] **Task 2: Create or Enhance Slice** (AC: 1-5)
  - [ ] Create globalUISlice if not exists
  - [ ] Add sidebar state (isOpen, isCollapsed)
  - [ ] Add loading flags (isNavigating, isPageLoading)
  - [ ] Add modal state (activeModal, modalProps)
  - [ ] Export all actions

- [ ] **Task 3: Create Selectors** (AC: 6)
  - [ ] selectSidebarOpen
  - [ ] selectSidebarCollapsed
  - [ ] selectIsNavigating
  - [ ] selectActiveModal

- [ ] **Task 4: Integrate into Store** (AC: 7)
  - [ ] Add reducer to store configuration
  - [ ] Verify RootState type includes globalUI

## Dev Notes

### Existing Related Code

**File:** `apps/web/main-app/src/store/slices/navigationSlice.ts`

May contain some of this functionality. Need to check.

### Proposed State Shape

```typescript
interface GlobalUIState {
  sidebar: {
    isOpen: boolean
    isCollapsed: boolean
  }
  loading: {
    isNavigating: boolean
    isPageLoading: boolean
  }
  modal: {
    activeModal: string | null
    modalProps: Record<string, unknown>
  }
}
```

### Actions

- toggleSidebar()
- setSidebarOpen(boolean)
- setSidebarCollapsed(boolean)
- setNavigating(boolean)
- setPageLoading(boolean)
- openModal(name, props)
- closeModal()

### Integration Points

- Sidebar component reads isOpen, isCollapsed
- Page transitions set isNavigating
- Modal system uses activeModal, modalProps

### Testing

- Unit test each action
- Test sidebar toggle logic
- Test modal open/close flow

## Change Log

| Date       | Version | Description                       | Author   |
| ---------- | ------- | --------------------------------- | -------- |
| 2025-11-28 | 0.1     | Initial draft - may need creation | SM Agent |
