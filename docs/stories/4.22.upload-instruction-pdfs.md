# Story 4.22: Upload Instruction PDFs

## Status

Approved

## Story

**As a** user,
**I want** to upload PDF instruction files,
**so that** I can store my building guides.

## Acceptance Criteria

1. ⬜ Upload button in Instructions section
2. ⬜ PDF file type filter
3. ⬜ Single or multi-file upload
4. ⬜ Max file size validation (20MB)
5. ⬜ Progress indication

## Tasks / Subtasks

- [ ] **Task 1: PDF Upload**
  - [ ] Accept .pdf files only
  - [ ] Size validation

- [ ] **Task 2: Integration**
  - [ ] Call uploadFile mutation
  - [ ] Refresh file list

## Dev Notes

```typescript
function PdfUploader({ mocId }: { mocId: string }) {
  const [uploadFile] = useUploadFileMutation()
  const inputRef = useRef<HTMLInputElement>(null)

  const handleFile = async (e: React.ChangeEvent<HTMLInputElement>) => {
    const file = e.target.files?.[0]
    if (!file) return

    if (file.size > 20 * 1024 * 1024) {
      toast.error('PDF must be under 20MB')
      return
    }

    try {
      await uploadFile({ mocId, file }).unwrap()
      toast.success('PDF uploaded')
    } catch {
      toast.error('Failed to upload PDF')
    }
  }

  return (
    <>
      <Button variant="outline" onClick={() => inputRef.current?.click()}>
        <FileText className="mr-2 h-4 w-4" />
        Upload PDF
      </Button>
      <input
        type="file"
        ref={inputRef}
        accept=".pdf"
        onChange={handleFile}
        hidden
      />
    </>
  )
}
```

## Change Log

| Date       | Version | Description   | Author   |
| ---------- | ------- | ------------- | -------- |
| 2025-11-28 | 0.1     | Initial draft | SM Agent |
