# Story 3.1.14: Slug Generation — Deterministic + Suffixing

## Status

Implemented

## Story

As a creator,
I want reliable slugs for my instructions,
so links are stable and conflict-free per user.

## Acceptance Criteria

1. Deterministic slugify

- Lowercase, trim, spaces→-, collapse dashes, remove disallowed chars; max length 80; preserve unicode letters/numbers.

2. Uniqueness per user

- Unique index (ownerId, slug). On conflict: 409 with `suggestedSlug` using -2, -3… suffixing; reserve suffix slots atomically.

3. Tests

- Unit: slugify transforms, suffix behavior, max length edge cases, multilingual input.
- Integration: conflict handling during finalize (3.1.12) and initialize UI (3.1.19).

## Tasks / Subtasks

- [x] slugify utility with Zod schema and tests
- [x] DB uniqueness and migration if needed
- [x] Integrate in finalize; return suggestion on 409

## Dev Notes

- Suffix separator is `-`; start at -2; stop before exceeding max length by trimming base.

## Change Log

| Date       | Version | Description          | Author |
| ---------- | ------- | -------------------- | ------ |
| 2025-12-06 | 0.1     | Initial draft (slug) | SM     |
