# Story 3.0.9: Gallery Empty & Loading States

## Status

Draft

## Story

**As a** user,
**I want** clear feedback when galleries are loading or empty,
**so that** I understand the current state and what actions to take.

## Acceptance Criteria

1. ⬜ GalleryEmptyState component for when no items exist
2. ⬜ GalleryNoResults component for when filters return no matches
3. ⬜ GallerySkeleton component for loading states
4. ⬜ Empty state includes call-to-action when appropriate
5. ⬜ No results state suggests clearing filters
6. ⬜ Skeleton matches grid layout structure

## Tasks / Subtasks

- [ ] **Task 1: Empty State Component**
  - [ ] Create `src/components/GalleryEmptyState.tsx`
  - [ ] Configurable icon, title, description
  - [ ] Optional action button slot

- [ ] **Task 2: No Results Component**
  - [ ] Create `src/components/GalleryNoResults.tsx`
  - [ ] "No results found" messaging
  - [ ] "Clear filters" button

- [ ] **Task 3: Loading Skeleton**
  - [ ] Create `src/components/GallerySkeleton.tsx`
  - [ ] Match GalleryGrid responsive columns
  - [ ] Configurable item count
  - [ ] Use @repo/ui Skeleton primitives

## Dev Notes

### Empty State Component

```typescript
interface GalleryEmptyStateProps {
  icon?: React.ComponentType<{ className?: string }>
  title: string
  description?: string
  action?: {
    label: string
    onClick: () => void
  }
  className?: string
}

// Usage
<GalleryEmptyState
  icon={ImageIcon}
  title="No instructions yet"
  description="Upload your first MOC instructions to get started."
  action={{
    label: "Upload Instructions",
    onClick: () => navigate('/upload')
  }}
/>
```

### No Results Component

```typescript
interface GalleryNoResultsProps {
  searchTerm?: string
  hasFilters: boolean
  onClearFilters: () => void
  onClearSearch?: () => void
}

// Usage
<GalleryNoResults
  searchTerm={search}
  hasFilters={selectedTags.length > 0 || selectedTheme !== null}
  onClearFilters={handleClearFilters}
  onClearSearch={() => setSearch('')}
/>

// Renders:
// "No results found for 'castle'"
// "Try adjusting your search or filters"
// [Clear Search] [Clear Filters]
```

### Skeleton Component

```typescript
interface GallerySkeletonProps {
  count?: number        // default: 8
  columns?: {           // match GalleryGrid
    sm?: number
    md?: number
    lg?: number
    xl?: number
  }
  showFilters?: boolean // show filter bar skeleton too
}

// Usage
{isLoading ? (
  <GallerySkeleton count={12} showFilters />
) : items.length === 0 ? (
  <GalleryEmptyState {...emptyProps} />
) : (
  <GalleryGrid>{items.map(...)}</GalleryGrid>
)}
```

### Skeleton Card Structure

```typescript
function GalleryCardSkeleton() {
  return (
    <div className="rounded-lg border bg-card">
      <Skeleton className="aspect-[4/3] rounded-t-lg" />
      <div className="p-4 space-y-2">
        <Skeleton className="h-4 w-3/4" />
        <Skeleton className="h-3 w-1/2" />
      </div>
    </div>
  )
}
```

## Testing

- [ ] Unit test: empty state renders icon, title, description
- [ ] Unit test: action button calls onClick
- [ ] Unit test: no results shows search term
- [ ] Unit test: clear filters button works
- [ ] Unit test: skeleton renders correct count
- [ ] Visual test: skeleton matches card dimensions

## Change Log

| Date       | Version | Description   | Author   |
| ---------- | ------- | ------------- | -------- |
| 2025-11-30 | 0.1     | Initial draft | SM Agent |
