# Story 4.25: File Size Validation

## Status

Approved

## Story

**As a** user,
**I want** oversized files rejected,
**so that** uploads complete reasonably.

## Acceptance Criteria

1. ⬜ Max 5MB for images
2. ⬜ Max 20MB for PDFs
3. ⬜ Max 5MB for parts lists
4. ⬜ Clear error with limit shown
5. ⬜ Check before upload starts

## Tasks / Subtasks

- [ ] **Task 1: Size Limits**
  - [ ] Define per file type
  - [ ] Validation function

- [ ] **Task 2: Error Message**
  - [ ] Show current size
  - [ ] Show max allowed

## Dev Notes

```typescript
const MAX_FILE_SIZES = {
  image: 5 * 1024 * 1024, // 5MB
  pdf: 20 * 1024 * 1024, // 20MB
  parts: 5 * 1024 * 1024, // 5MB
}

function validateFileSize(file: File, type: keyof typeof MAX_FILE_SIZES): boolean {
  const maxSize = MAX_FILE_SIZES[type]

  if (file.size > maxSize) {
    const maxMb = maxSize / (1024 * 1024)
    const fileMb = (file.size / (1024 * 1024)).toFixed(1)
    toast.error(`File too large (${fileMb}MB). Maximum is ${maxMb}MB`)
    return false
  }

  return true
}

// Combined validation
function validateFile(file: File, type: FileType): boolean {
  return validateFileType(file, type) && validateFileSize(file, type)
}
```

## Change Log

| Date       | Version | Description   | Author   |
| ---------- | ------- | ------------- | -------- |
| 2025-11-28 | 0.1     | Initial draft | SM Agent |
