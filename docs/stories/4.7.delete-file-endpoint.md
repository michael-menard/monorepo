# Story 4.7: Delete File Endpoint

## Status

Approved

## Story

**As a** user,
**I want** to delete individual files from my MOC,
**so that** I can manage my attachments.

## Acceptance Criteria

1. â¬œ `useDeleteFileMutation` hook available
2. â¬œ DELETE /mocs/:id/files/:fileId
3. â¬œ Invalidates file cache
4. â¬œ Handles errors gracefully
5. ðŸ”„ Backend: File delete endpoint required

## Tasks / Subtasks

- [ ] **Task 1: Define Mutation**
  - [ ] Add deleteFile mutation
  - [ ] Accept mocId and fileId

## Dev Notes

```typescript
deleteFile: builder.mutation<void, DeleteFileInput>({
  query: ({ mocId, fileId }) => ({
    url: `/mocs/${mocId}/files/${fileId}`,
    method: 'DELETE',
  }),
  invalidatesTags: (result, error, { mocId }) => [
    { type: 'MocDetail', id: mocId },
    { type: 'MocFiles', id: mocId },
  ],
}),

interface DeleteFileInput {
  mocId: string
  fileId: string
}
```

## Change Log

| Date       | Version | Description   | Author   |
| ---------- | ------- | ------------- | -------- |
| 2025-11-28 | 0.1     | Initial draft | SM Agent |
