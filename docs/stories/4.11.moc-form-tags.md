# Story 4.11: MOC Form - Tags Input

## Status

Approved

## Story

**As a** user,
**I want** to add tags to my MOC,
**so that** I can organize and find it easily.

## Acceptance Criteria

1. â¬œ Multi-select tag input
2. â¬œ Can select existing tags
3. â¬œ Can create new tags
4. â¬œ Tags displayed as pills
5. â¬œ Remove tag by clicking X
6. ðŸ”„ Backend: Tags endpoint or inline creation

## Tasks / Subtasks

- [ ] **Task 1: Tags Field**
  - [ ] Add tags to form schema
  - [ ] Create multi-select component

- [ ] **Task 2: Tag Pills**
  - [ ] Display selected tags
  - [ ] Remove functionality

## Dev Notes

```typescript
// Add to schema
tags: z.array(z.string()).default([]),

function TagsInput({ form }: { form: UseFormReturn<MocFormValues> }) {
  const { data: existingTags } = useGetTagsQuery()
  const tags = form.watch('tags')

  const addTag = (tag: string) => {
    if (!tags.includes(tag)) {
      form.setValue('tags', [...tags, tag])
    }
  }

  const removeTag = (tag: string) => {
    form.setValue('tags', tags.filter((t) => t !== tag))
  }

  return (
    <FormField
      control={form.control}
      name="tags"
      render={() => (
        <FormItem>
          <FormLabel>Tags</FormLabel>
          <div className="flex flex-wrap gap-2 mb-2">
            {tags.map((tag) => (
              <Badge key={tag} variant="secondary">
                {tag}
                <button onClick={() => removeTag(tag)} className="ml-1">
                  <X className="h-3 w-3" />
                </button>
              </Badge>
            ))}
          </div>
          <Combobox options={existingTags} onSelect={addTag} allowCreate />
        </FormItem>
      )}
    />
  )
}
```

## Change Log

| Date       | Version | Description   | Author   |
| ---------- | ------- | ------------- | -------- |
| 2025-11-28 | 0.1     | Initial draft | SM Agent |
