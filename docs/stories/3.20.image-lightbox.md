# Story 3.20: Image Lightbox

## Status

Approved

## Story

**As a** user,
**I want** to view images in full-screen lightbox,
**so that** I can see maximum detail.

## Acceptance Criteria

1. ⬜ Lightbox component created
2. ⬜ Full-screen overlay
3. ⬜ Navigate between images
4. ⬜ Close on click outside or ESC
5. ⬜ Keyboard navigation (arrows)
6. ⬜ Zoom capability optional

## Tasks / Subtasks

- [ ] **Task 1: Create Component**
  - [ ] Create ImageLightbox.tsx
  - [ ] Use Dialog from @repo/ui

- [ ] **Task 2: Navigation**
  - [ ] Previous/Next buttons
  - [ ] Keyboard handlers
  - [ ] Image counter

- [ ] **Task 3: Close Behavior**
  - [ ] ESC key
  - [ ] Click backdrop
  - [ ] Close button

## Dev Notes

```typescript
interface ImageLightboxProps {
  images: MocImage[]
  initialIndex: number
  open: boolean
  onClose: () => void
}

export function ImageLightbox({ images, initialIndex, open, onClose }: ImageLightboxProps) {
  const [index, setIndex] = useState(initialIndex)

  useEffect(() => {
    const handleKeyDown = (e: KeyboardEvent) => {
      if (e.key === 'ArrowLeft') setIndex((i) => Math.max(0, i - 1))
      if (e.key === 'ArrowRight') setIndex((i) => Math.min(images.length - 1, i + 1))
      if (e.key === 'Escape') onClose()
    }
    window.addEventListener('keydown', handleKeyDown)
    return () => window.removeEventListener('keydown', handleKeyDown)
  }, [images.length, onClose])

  return (
    <Dialog open={open} onOpenChange={onClose}>
      <DialogContent className="max-w-[90vw] max-h-[90vh] p-0">
        <img src={images[index].url} className="w-full h-full object-contain" />
        <div className="absolute bottom-4 left-1/2 -translate-x-1/2">
          {index + 1} / {images.length}
        </div>
      </DialogContent>
    </Dialog>
  )
}
```

## Change Log

| Date       | Version | Description   | Author   |
| ---------- | ------- | ------------- | -------- |
| 2025-11-28 | 0.1     | Initial draft | SM Agent |
