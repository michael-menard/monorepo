# Story 1.13.1: OTP Input Component

## Status

Ready for Review

## Story

**As a** user,
**I want** a polished OTP input component with individual digit fields,
**so that** I can easily enter verification codes during MFA and email verification.

## Acceptance Criteria

1. ✅ 6-digit input with individual boxes
2. ✅ Auto-focus moves to next field on input
3. ✅ Backspace navigates to previous field
4. ✅ Paste support for full code
5. ✅ Arrow key navigation between fields
6. ✅ Only numeric input allowed
7. ✅ Error state styling
8. ✅ Disabled state support
9. ✅ Accessible with ARIA labels
10. ✅ Unit tests exist

## Tasks / Subtasks

- [x] **Task 1: Component Structure** (AC: 1, 9)
  - [x] Create OTPInput component with 6 individual inputs
  - [x] Add proper ARIA labels for each digit
  - [x] Export from components/Auth/OTPInput.tsx

- [x] **Task 2: Auto-Focus Behavior** (AC: 2-3)
  - [x] Auto-advance to next input on digit entry
  - [x] Backspace clears current or moves to previous
  - [x] Initial focus on first empty field

- [x] **Task 3: Keyboard Navigation** (AC: 4-5)
  - [x] Left/Right arrow key navigation
  - [x] Paste handler for full 6-digit code
  - [x] Handle paste at any position

- [x] **Task 4: Input Validation** (AC: 6)
  - [x] Filter non-numeric characters
  - [x] Prevent invalid input

- [x] **Task 5: States** (AC: 7-8)
  - [x] Error state with red border styling
  - [x] Disabled state with reduced opacity

- [x] **Task 6: Testing** (AC: 10)
  - [x] Unit tests for input behavior
  - [x] Tests for keyboard navigation
  - [x] Tests for paste handling

## Implementation Details

**File:** `apps/web/main-app/src/components/Auth/OTPInput.tsx`

### Props Interface

```typescript
interface OTPInputProps {
  value: string
  onChange: (value: string) => void
  length?: number // Default: 6
  disabled?: boolean
  error?: boolean
  className?: string
  autoFocus?: boolean
  'data-testid'?: string
}
```

### Usage

```tsx
<OTPInput
  value={otpCode}
  onChange={setOtpCode}
  length={6}
  disabled={isSubmitting}
  error={!!error}
  autoFocus
/>
```

## Change Log

| Date       | Version | Description                         | Author      |
| ---------- | ------- | ----------------------------------- | ----------- |
| 2025-11-28 | 1.0     | Story created - already implemented | Claude Code |
