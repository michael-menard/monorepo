# Story 1.10: Sidebar Mobile

## Status

Approved

## Story

**As a** mobile user,
**I want** a slide-out navigation drawer,
**so that** I can access navigation on smaller screens.

## Acceptance Criteria

1. ⬜ Mobile drawer component for sidebar
2. ⬜ Triggered by hamburger menu in Header
3. ⬜ Slide-in animation from left
4. ⬜ Overlay/backdrop when open
5. ⬜ Close on navigation
6. ⬜ Close on backdrop click
7. ⬜ Close on escape key
8. ⬜ Hidden on desktop (md: breakpoint and up)

## Tasks / Subtasks

- [ ] **Task 1: Create Mobile Drawer** (AC: 1, 3)
  - [ ] Create MobileSidebar or SidebarDrawer component
  - [ ] Use Framer Motion for slide animation
  - [ ] Animate from x: -100% to x: 0

- [ ] **Task 2: Header Integration** (AC: 2)
  - [ ] Add hamburger button to Header (mobile only)
  - [ ] Connect to globalUISlice.sidebar.isOpen
  - [ ] Toggle drawer open/close

- [ ] **Task 3: Backdrop & Close Behaviors** (AC: 4-7)
  - [ ] Add semi-transparent backdrop
  - [ ] Close on backdrop click
  - [ ] Close on Escape key press
  - [ ] Close after navigation (useEffect on route change)

- [ ] **Task 4: Responsive Visibility** (AC: 8)
  - [ ] Show drawer trigger only on mobile (< md)
  - [ ] Show regular sidebar only on desktop (≥ md)
  - [ ] Use Tailwind responsive classes

## Dev Notes

### Component Structure

```typescript
export function MobileSidebar() {
  const isOpen = useAppSelector(selectSidebarOpen)
  const dispatch = useAppDispatch()

  return (
    <AnimatePresence>
      {isOpen && (
        <>
          {/* Backdrop */}
          <motion.div
            className="fixed inset-0 bg-black/50 z-40 md:hidden"
            onClick={() => dispatch(setSidebarOpen(false))}
          />
          {/* Drawer */}
          <motion.aside
            initial={{ x: '-100%' }}
            animate={{ x: 0 }}
            exit={{ x: '-100%' }}
            className="fixed left-0 top-0 h-full w-64 z-50 md:hidden"
          >
            <Sidebar />
          </motion.aside>
        </>
      )}
    </AnimatePresence>
  )
}
```

### Close on Navigation

```typescript
const location = useLocation()

useEffect(() => {
  dispatch(setSidebarOpen(false))
}, [location.pathname])
```

### Close on Escape

```typescript
useEffect(() => {
  const handler = (e: KeyboardEvent) => {
    if (e.key === 'Escape') dispatch(setSidebarOpen(false))
  }
  document.addEventListener('keydown', handler)
  return () => document.removeEventListener('keydown', handler)
}, [])
```

### Testing

- Test drawer opens on hamburger click
- Test drawer closes on backdrop click
- Test drawer closes on navigation
- Test drawer closes on Escape
- Test hidden on desktop

## Change Log

| Date       | Version | Description   | Author   |
| ---------- | ------- | ------------- | -------- |
| 2025-11-28 | 0.1     | Initial draft | SM Agent |
