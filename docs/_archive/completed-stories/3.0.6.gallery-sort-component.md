# Story 3.0.6: Gallery Sort Component

## Status

Done

## Story

**As a** user,
**I want** to sort gallery items by different criteria,
**so that** I can view items in my preferred order.

## Acceptance Criteria

1. ✅ GallerySort component created in @repo/gallery
2. ✅ Dropdown with configurable sort options
3. ✅ Visual indicator of current sort direction (asc/desc)
4. ✅ Common sort options: name, date, piece count
5. ✅ Accessible dropdown with proper ARIA attributes

## Tasks / Subtasks

- [x] **Task 1: Create Sort Component**
  - [x] Create `src/components/GallerySort.tsx`
  - [x] Use @repo/ui Select component
  - [x] Add sort direction toggle

- [x] **Task 2: Sort Options Configuration**
  - [x] Define SortOption type
  - [x] Support label and value
  - [x] Support direction (asc/desc) toggle

- [x] **Task 3: Visual Indicators**
  - [x] Arrow icon for direction
  - [x] Animate direction change

## Dev Notes

### Component API

```typescript
interface SortOption {
  value: string
  label: string
  defaultDirection?: 'asc' | 'desc'
}

interface GallerySortProps {
  options: SortOption[]
  value: string
  direction: 'asc' | 'desc'
  onChange: (value: string, direction: 'asc' | 'desc') => void
  className?: string
}

// Common sort options
const defaultSortOptions: SortOption[] = [
  { value: 'name', label: 'Name', defaultDirection: 'asc' },
  { value: 'dateAdded', label: 'Date Added', defaultDirection: 'desc' },
  { value: 'dateModified', label: 'Date Modified', defaultDirection: 'desc' },
  { value: 'pieceCount', label: 'Piece Count', defaultDirection: 'desc' },
]

// Usage
<GallerySort
  options={sortOptions}
  value={sortBy}
  direction={sortDirection}
  onChange={(value, dir) => {
    setSortBy(value)
    setSortDirection(dir)
  }}
/>
```

### Sort State Management

```typescript
// In gallery page
const [sortBy, setSortBy] = useState('dateAdded')
const [sortDirection, setSortDirection] = useState<'asc' | 'desc'>('desc')

// Pass to API query
const { data } = useGetItemsQuery({
  sort: sortBy,
  order: sortDirection,
  // ...other params
})
```

## Testing

- [x] Unit test: selecting option updates value
- [x] Unit test: clicking direction toggles asc/desc
- [x] Unit test: onChange called with both value and direction
- [x] Accessibility test: proper ARIA attributes on select

## Dev Agent Record

### Agent Model Used

Claude Opus 4.5

### File List

| File                                                      | Action   |
| --------------------------------------------------------- | -------- |
| packages/core/gallery/src/components/GallerySort.tsx      | Created  |
| packages/core/gallery/src/__tests__/GallerySort.test.tsx  | Created  |
| packages/core/gallery/src/index.ts                        | Modified |

### Debug Log References

None

### Completion Notes

- GallerySort: Sort dropdown with direction toggle button
- Uses AppSelect from @repo/app-component-library for dropdown
- Direction toggle button with rotating arrow icon (CSS transition)
- Exports `defaultGallerySortOptions` with common sort options (name, dateAdded, dateModified, pieceCount)
- When changing sort option, uses option's `defaultDirection` to set initial direction
- Accessible with proper ARIA labels on direction button
- 14 unit tests passing (136 total in package)
- Build and lint verified

## Change Log

| Date       | Version | Description             | Author      |
| ---------- | ------- | ----------------------- | ----------- |
| 2025-11-30 | 0.1     | Initial draft           | SM Agent    |
| 2025-12-05 | 1.0     | Implementation complete | Dev (James) |
