# Story 3.0.3: Gallery Card Base Component

## Status

Done

## Story

**As a** developer,
**I want** a base gallery card component,
**so that** all galleries have a consistent card structure that can be extended.

## Acceptance Criteria

1. â¬œ GalleryCard base component created in @repo/gallery
2. â¬œ Displays image with proper aspect ratio (4:3 or configurable)
3. â¬œ Supports title and optional subtitle/description
4. â¬œ Hover state with subtle scale/shadow effect
5. â¬œ Click handler for selection/navigation
6. â¬œ Accessible with proper role and keyboard navigation
7. â¬œ Extensible via composition pattern for gallery-specific cards

## Tasks / Subtasks

- [x] **Task 1: Create Base Card Component**
  - [x] Create `src/components/GalleryCard.tsx`
  - [x] Use @repo/ui Card as foundation
  - [x] Implement image container with aspect ratio

- [x] **Task 2: Card Content Areas**
  - [x] Image area with lazy loading
  - [x] Title area (required)
  - [x] Subtitle/metadata area (optional)
  - [x] Action slot for buttons/icons

- [x] **Task 3: Interactions**
  - [x] Hover effects (scale, shadow)
  - [x] onClick handler
  - [x] Keyboard navigation (Enter/Space to activate)
  - [x] Focus ring styling

- [x] **Task 4: Exports**
  - [x] Export GalleryCard component
  - [x] Export GalleryCardProps type
  - [x] Export sub-components for composition (GalleryCardSkeleton)

## Dev Notes

### Component API

```typescript
interface GalleryCardProps {
  image: {
    src: string
    alt: string
    aspectRatio?: '4/3' | '16/9' | '1/1' | 'auto'
  }
  title: string
  subtitle?: string
  metadata?: React.ReactNode
  actions?: React.ReactNode
  onClick?: () => void
  href?: string
  selected?: boolean
  className?: string
}

// Base usage
<GalleryCard
  image={{ src: '/image.jpg', alt: 'Description' }}
  title="Item Title"
  subtitle="Subtitle text"
  onClick={() => handleClick(item)}
/>

// Extended usage with slots
<GalleryCard
  image={imageProps}
  title="MOC Title"
  metadata={<Badge>500 pieces</Badge>}
  actions={
    <Button variant="ghost" size="icon">
      <Heart />
    </Button>
  }
/>
```

### Composition Pattern

```typescript
// Gallery-specific cards extend the base
export function InstructionCard({ instruction }: { instruction: Instruction }) {
  return (
    <GalleryCard
      image={{ src: instruction.thumbnail, alt: instruction.name }}
      title={instruction.name}
      metadata={
        <>
          <Badge>{instruction.pieceCount} pieces</Badge>
          <span>{instruction.theme}</span>
        </>
      }
    />
  )
}
```

## Testing

- [x] Unit test: renders image, title, subtitle
- [x] Unit test: onClick fires on click and Enter key
- [x] Unit test: hover classes applied correctly
- [x] Unit test: selected state renders correctly
- [x] Accessibility test: proper ARIA attributes

## Dev Agent Record

### Agent Model Used

Claude Opus 4.5

### File List

| File                                                     | Action   |
| -------------------------------------------------------- | -------- |
| packages/core/gallery/src/components/GalleryCard.tsx     | Created  |
| packages/core/gallery/src/index.ts                       | Modified |
| packages/core/gallery/src/__tests__/GalleryCard.test.tsx | Created  |

### Debug Log References

None

### Completion Notes

- GalleryCard component implements a composable card structure for galleries
- Supports image with configurable aspect ratios (4/3, 16/9, 1/1, auto)
- Image lazy loading with skeleton and error fallback states
- Title (required), subtitle (optional), metadata slot, actions slot
- Interactive mode with onClick or href support
- Keyboard navigation (Enter/Space to activate)
- Focus ring styling and hover effects (scale, shadow)
- Selected state with ring highlight
- Loading state with pulse animation
- GalleryCardSkeleton for loading placeholders
- 39 unit tests passing
- Build and lint verified

## Change Log

| Date       | Version | Description             | Author      |
| ---------- | ------- | ----------------------- | ----------- |
| 2025-11-30 | 0.1     | Initial draft           | SM Agent    |
| 2025-12-05 | 1.0     | Implementation complete | Dev (James) |


Copy-Paste Ready Prompt for v0, Lovable, or Similar Tools

   # LEGO MOC Organization App - Stats Cards Component
   ## Project Context
   You are building a component for a LEGO MOC (My Own Creation) organization application. This is a modern React
   application using a LEGO-inspired design system with a focus on playful professionalism, accessibility, and delightful
   micro-interactions.
   **Tech Stack:**
   - React 19.0.0 (functional components only, no classes)
   - TypeScript (strict mode)
   - Tailwind CSS 4.1.11
   - Lucide React 0.476.0 (for icons)
   - Framer Motion 12.23.24 (for animations)
   - Functional programming paradigm (no classes except Error boundaries)
   **Design System - LEGO-Inspired Color Palette:**
   /* Primary Colors */
   --primary: hsl(178, 79%, 32%);           /* Vibrant Teal */
   --primary-foreground: hsl(0, 0%, 100%);  /* White */

   /* Secondary Colors */
   --secondary: hsl(45, 67%, 90%);          /* Warm Cream */
   --secondary-foreground: hsl(178, 79%, 20%); /* Dark Teal */

   /* Accent Colors */
   --accent: hsl(168, 18%, 43%);            /* Muted Sage Teal */
   --accent-foreground: hsl(0, 0%, 100%);   /* White */

   /* Semantic Colors */
   --muted: hsl(0, 17%, 96%);               /* Surface color */
   --muted-foreground: hsl(168, 18%, 35%);  /* Secondary text */
   --card: hsl(0, 17%, 96%);                /* Card background */
   --card-foreground: hsl(178, 79%, 15%);   /* Card text */
   ## High-Level Goal
   Create a responsive, accessible stats cards component that displays dashboard statistics (Total MOCs, Wishlist Items,
   Themes) with LEGO-inspired micro-interactions, proper accessibility, and delightful animations.
   ## Detailed Step-by-Step Instructions
   ### 1. Component Structure
   Create a functional React component named `StatsCards` that:
   1. Accepts a `stats` prop with type `DashboardStats` containing:
      - `totalMocs: number`
      - `wishlistCount: number`
      - `themeCount: number`
      - `lastUpdated: string`
   2. Renders three stat cards in a responsive grid:
      - **Mobile (default)**: 1 column, full width
      - **Tablet (md: 768px+)**: 2 columns
      - **Desktop (lg: 1024px+)**: 3 columns
   3. Each card displays:
      - An icon (top-left or centered)
      - A large, bold number (the stat value)
      - A descriptive label below the number
      - A subtle background color that matches the icon theme
   ### 2. Visual Design Requirements
   **Card Layout (Mobile-First):**
   - Padding: `p-6` (24px)
   - Border radius: `rounded-xl` (12px)
   - Background: `bg-card` with subtle shadow `shadow-sm`
   - Border: `border border-border`
   - Minimum height: Ensure all cards have equal height in grid
   **Typography:**
   - Stat value: `text-4xl font-bold` (36px, bold)
   - Label: `text-sm font-medium text-muted-foreground` (14px, medium weight)
   - Use `toLocaleString()` to format numbers with commas (e.g., 1,234)
   **Icon Styling:**
   - Size: `h-8 w-8` (32px Ã— 32px) on mobile, `h-10 w-10` (40px Ã— 40px) on desktop
   - Icon container: Rounded background with 10% opacity of the icon color
   - Container padding: `p-3`
   - Container border radius: `rounded-lg`
   **Color Assignments:**
   1. **Total MOCs**:
      - Icon: `Blocks` from lucide-react
      - Color: `text-primary` (Vibrant Teal)
      - Background: `bg-primary/10`
   2. **Wishlist Items**:
      - Icon: `Heart` from lucide-react
      - Color: `text-accent` (Sage Teal)
      - Background: `bg-accent/10`
   3. **Themes**:
      - Icon: `Palette` from lucide-react
      - Color: `text-secondary-foreground` (Dark Teal)
      - Background: `bg-secondary/50`
   ### 3. Micro-Interactions & Animations
   **Hover State (Desktop Only):**
   - Add `hover:shadow-lg` for elevated shadow
   - Add `hover:scale-[1.02]` for subtle "LEGO brick pop" effect
   - Transition: `transition-all duration-200 ease-in-out`
   - Add `cursor-default` (cards are informational, not clickable)
   **Number Animation (Using Framer Motion):**
   - When the component mounts or stats change, animate the numbers counting up from 0
   - Duration: 800ms with easing `ease-out`
   - Use `motion.div` wrapper around the stat value
   - Animation variant:
     initial={{ opacity: 0, y: 20 }}
     animate={{ opacity: 1, y: 0 }}
     transition={{ duration: 0.5, delay: index * 0.1 }}
   **Stagger Effect:**
   - Cards should animate in with a stagger delay
   - First card: 0ms delay
   - Second card: 100ms delay
   - Third card: 200ms delay
   ### 4. Accessibility Requirements (WCAG 2.1 AA)
   1. **Semantic HTML:**
      - Wrap each card in `<article>` tag
      - Use proper heading hierarchy (`<h3>` for labels)
   2. **ARIA Labels:**
      - Add `aria-label` to each card: `"Statistic: {label} - {value}"`
      - Add `role="region"` to the grid container
      - Add `aria-live="polite"` to stat values for screen reader updates
   3. **Color Contrast:**
      - Ensure all text meets 4.5:1 contrast ratio
      - Don't rely on color alone to convey information
   4. **Keyboard Navigation:**
      - Cards are not interactive, so no focus states needed
      - Ensure proper tab order if cards become clickable in future
   ### 5. Loading & Error States
   **Loading State:**
   - Show skeleton cards with pulsing animation
   - Use `animate-pulse` utility
   - Display placeholder rectangles for icon, number, and label
   - Maintain same grid layout
   **Empty State:**
   - If all stats are 0, show a friendly message
   - Icon: `Package` from lucide-react
   - Message: "No data yet. Start adding MOCs to see your stats!"
   **Error State:**
   - If stats fail to load, show error card
   - Icon: `AlertCircle` from lucide-react
   - Message: "Unable to load statistics"
   - Color: `text-destructive`
   ## Code Examples & Constraints
   ### TypeScript Interface
   interface DashboardStats {
     totalMocs: number
     wishlistCount: number
     themeCount: number
     lastUpdated: string
   }

   interface StatsCardsProps {
     stats: DashboardStats
     isLoading?: boolean
     error?: Error | null
   }
   ### Card Component Import
   // Use the existing Card components from the design system
   import { Card, CardContent, CardHeader, CardTitle } from '@repo/ui/card'
   import { Blocks, Heart, Palette, Package, AlertCircle } from 'lucide-react'
   import { motion } from 'framer-motion'
   ### Grid Layout Example
   <div
     className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 w-full"
     role="region"
     aria-label="Dashboard statistics"
   >
     {/* Cards go here */}
   </div>
   ### Constraints & Requirements
   **DO:**
   - Use functional components with arrow functions
   - Use TypeScript with proper type annotations
   - Use Tailwind CSS classes only (no inline styles)
   - Format numbers with `toLocaleString()`
   - Add proper ARIA labels for accessibility
   - Use Framer Motion for animations
   - Follow mobile-first responsive design
   **DO NOT:**
   - Use class components
   - Use inline styles or CSS-in-JS
   - Use console.log (use proper logging if needed)
   - Create barrel imports (import directly from files)
   - Use hardcoded colors (use design system tokens)
   - Make cards clickable without explicit requirement
   - Use `lego-red`, `lego-blue`, `lego-yellow` classes (they don't exist)
   ## Strict Scope
   **Files to Create/Modify:**
   - Create or update: `apps/web/main-app/src/components/Dashboard/StatsCards.tsx`
   - This is a standalone component
   **Files to NOT Touch:**
   - Do NOT modify any Card component files in `@repo/ui`
   - Do NOT modify the dashboard API or data fetching logic
   - Do NOT modify any routing or page-level components
   - Do NOT create new test files (tests will be added separately)
   ## Expected Output
   A complete, production-ready React component that:
   1. âœ… Displays three stat cards in a responsive grid
   2. âœ… Uses the LEGO-inspired design system colors correctly
   3. âœ… Includes delightful micro-interactions (hover, stagger animations)
   4. âœ… Meets WCAG 2.1 AA accessibility standards
   5. âœ… Handles loading and error states gracefully
   6. âœ… Uses proper TypeScript types
   7. âœ… Follows functional programming paradigm
   8. âœ… Is mobile-first and fully responsive
   ## Visual Reference
   **Desktop Layout (3 columns):**
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ ğŸ§± Total    â”‚  â”‚ â¤ï¸  Wishlistâ”‚  â”‚ ğŸ¨ Themes   â”‚
   â”‚             â”‚  â”‚             â”‚  â”‚             â”‚
   â”‚    1,234    â”‚  â”‚     156     â”‚  â”‚     42      â”‚
   â”‚  Total MOCs â”‚  â”‚Wishlist Itemsâ”‚ â”‚   Themes    â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   **Mobile Layout (1 column):**
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ ğŸ§± Total MOCs   â”‚
   â”‚                 â”‚
   â”‚      1,234      â”‚
   â”‚   Total MOCs    â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ â¤ï¸  Wishlist    â”‚
   â”‚                 â”‚
   â”‚       156       â”‚
   â”‚ Wishlist Items  â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ ğŸ¨ Themes       â”‚
   â”‚                 â”‚
   â”‚        42       â”‚
   â”‚     Themes      â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   ## Design Philosophy
   Remember: This component should feel like a **"Premium LEGO Collection Display"** - clean, organized, with subtle
   playfulness. The animations should be smooth and delightful, like snapping LEGO bricks together. The colors should evoke
    the joy of building while maintaining professional polish.

    ## Card Component

    interface ImageCardProps {
  image: string
  title: string
  description: string
  tags?: string[]
  details?: {
    label: string
    value: string
  }[]
}

export function ImageCard({ image, title, description, tags = [], details = [] }: ImageCardProps) {
  const [isHovered, setIsHovered] = useState(false)
  const [isFocused, setIsFocused] = useState(false)
  const isExpanded = isHovered || isFocused

  return (
    <div
      className="relative w-full h-80 rounded-lg overflow-hidden cursor-pointer outline-none ring-2 ring-transparent focus-visible:ring-blue-400/50 transition-all"
      onMouseEnter={() => setIsHovered(true)}
      onMouseLeave={() => setIsHovered(false)}
      onFocus={() => setIsFocused(true)}
      onBlur={() => setIsFocused(false)}
      tabIndex={0}
      role="button"
      aria-label={`${title} - ${description}`}
    >
      {/* Image */}
      <img
        src={image || "/placeholder.svg"}
        alt={title}
        className="w-full h-full object-cover transition-transform duration-300"
      />

      <div
        className={`absolute inset-0 backdrop-blur-md bg-gradient-to-t from-black/40 to-transparent transition-all duration-300 ${isExpanded ? "opacity-100" : "opacity-0"}`}
      />

      <div className="absolute inset-0 flex flex-col justify-end">
        {/* Bottom Drawer - Always visible with title only */}
        <div className="bg-blue-950/35 dark:bg-blue-950/40 border-t border-blue-200/20 dark:border-blue-100/10 p-6 backdrop-blur-md">
          {/* Title */}
          <h3 className="text-xl font-semibold text-white mb-0 text-balance">{title}</h3>

          <div
            className={`overflow-hidden transition-all duration-300 ease-out ${isExpanded ? "max-h-96 opacity-100 mt-4" : "max-h-0 opacity-0"}`}
          >
            <p className="text-white/90 text-sm mb-4">{description}</p>

            {tags.length > 0 && (
              <div className="flex flex-wrap gap-2 mb-4">
                {tags.map((tag, index) => (
                  <span
                    key={index}
                    className="px-3 py-1 bg-white/20 hover:bg-white/30 rounded-full text-xs text-white transition-colors duration-200"
                  >
                    {tag}
                  </span>
                ))}
              </div>
            )}

            {details.length > 0 && (
              <div className="grid grid-cols-2 gap-3 text-xs">
                {details.map((detail, index) => (
                  <div key={index}>
                    <p className="text-white/70 mb-1">{detail.label}</p>
                    <p className="text-white font-medium">{detail.value}</p>
                  </div>
                ))}
              </div>
            )}
          </div>
        </div>
      </div>
    </div>
  )
}
