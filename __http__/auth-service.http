### Auth Service API Test Requests
### Base URL: http://localhost:5000

@baseUrl = http://localhost:5000
@email = testuser@example.com
@password = SecurePassword123!

###
### Health Check
GET {{baseUrl}}/api/auth/health

###
### Step 1: Get CSRF Token (required for POST requests)
# @name getCSRF
GET {{baseUrl}}/api/auth/csrf

###
### Step 2: User Registration
# Run Step 1 first to get the CSRF token
POST {{baseUrl}}/api/auth/sign-up
Content-Type: application/json
X-CSRF-Token: {{getCSRF.response.body.token}}

{
  "email": "{{email}}",
  "password": "{{password}}",
  "name": "Test User"
}

###
### Step 3: User Login
# @name login
POST {{baseUrl}}/api/auth/login
Content-Type: application/json
X-CSRF-Token: {{getCSRF.response.body.token}}

{
  "email": "{{email}}",
  "password": "{{password}}"
}

###
### Step 4: Check Authentication Status (requires login first)
GET {{baseUrl}}/api/auth/check-auth

###
### Email Verification (use code from email)
POST {{baseUrl}}/api/auth/verify-email
Content-Type: application/json
X-CSRF-Token: {{getCSRF.response.body.token}}

{
  "code": "123456"
}

###
### Resend Verification Email
POST {{baseUrl}}/api/auth/resend-verification
Content-Type: application/json
X-CSRF-Token: {{getCSRF.response.body.token}}

{
  "email": "{{email}}"
}

###
### Forgot Password Request
POST {{baseUrl}}/api/auth/forgot-password
Content-Type: application/json
X-CSRF-Token: {{getCSRF.response.body.token}}

{
  "email": "{{email}}"
}

###
### Reset Password (replace your-reset-token-here with actual token from email)
POST {{baseUrl}}/api/auth/reset-password/your-reset-token-here
Content-Type: application/json
X-CSRF-Token: {{getCSRF.response.body.token}}

{
  "password": "NewSecurePassword123!"
}

###
### User Logout
POST {{baseUrl}}/api/auth/log-out
Content-Type: application/json
X-CSRF-Token: {{getCSRF.response.body.token}}

###
### Test Flow Examples
### 

### Complete Registration Flow:
### 1. Get CSRF token
### 2. Register user
### 3. Verify email (check your email for code)
### 4. Login
### 5. Check auth status

### Password Reset Flow:
### 1. Get CSRF token
### 2. Request password reset
### 3. Check email for reset link
### 4. Use reset token to set new password
### 5. Login with new password

###
### Error Testing Examples
###

### Invalid Registration (missing fields)
POST {{baseUrl}}/api/auth/sign-up
Content-Type: application/json
X-CSRF-Token: {{getCSRF.response.body.token}}

{
  "email": "invalid@example.com"
}

### Invalid Login (wrong credentials)
POST {{baseUrl}}/api/auth/login
Content-Type: application/json
X-CSRF-Token: {{getCSRF.response.body.token}}

{
  "email": "nonexistent@example.com",
  "password": "WrongPassword"
}

### Invalid Email Verification Code
POST {{baseUrl}}/api/auth/verify-email
Content-Type: application/json
X-CSRF-Token: {{getCSRF.response.body.token}}

{
  "code": "000000"
}
