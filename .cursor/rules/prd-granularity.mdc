---
description: Generate many small vertical-slice tasks from PRDs with explicit dependencies and two-phase DoD
globs: **/*
alwaysApply: true
---

- **Task Granularity Contract**
  - Size: ≤ 2 hours per task; ≤ 3 files changed; ≤ 80 net LoC; ≤ 1 new file
  - Vertical slices only; if wider, split into follow-ups with explicit dependencies
  - Prefer updating existing files over creating new ones

- **Two-Phase Definition of Done**
  - Phase A: Build Green (compile + type-check; minimal smoke); do not auto-enable/generate tests until this is met
  - Phase B: Tests Green (Unit + E2E)

- **Parsing Directives**
  - For each slice, create subtasks: `Build Green`, `Unit Tests Green`, `E2E Smoke Green`
  - Output a flat list with priorities

- **Reuse & Imports**
  - Prefer canonical shared components and path aliases (e.g., `@features/gallery`, `@ui/*`, `packages/**`)

- **Reference**
  - See [cursor_rules.mdc](mdc:.cursor/rules/cursor_rules.mdc)
