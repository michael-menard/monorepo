# <!-- Powered by BMADâ„¢ Core -->
# Task Assignment Template
# Used by coordinators to assign tasks to worker/specialist sub-agents

message_type: task_assignment
version: 1.0

metadata:
  from_agent_id: "{{coordinator_id}}"
  from_agent_type: "{{coordinator_type}}"  # e.g., dev-coordinator, sm-coordinator
  to_agent_id: "{{worker_id}}"
  to_agent_type: "{{worker_type}}"  # e.g., dev-worker, security-specialist
  session_id: "{{session_id}}"
  timestamp: "{{timestamp}}"
  message_id: "{{message_id}}"

task:
  task_type: "{{task_type}}"  # implement-story, create-story, analyze-security, run-tests
  task_id: "{{task_id}}"  # Unique identifier for this specific task
  priority: "{{priority}}"  # high, medium, low
  
  # Primary work item
  work_item:
    type: "{{work_item_type}}"  # story, epic, file, codebase-section
    id: "{{work_item_id}}"  # e.g., story-1.1, epic-user-auth
    file_path: "{{work_item_file_path}}"  # e.g., .bmad-stories/story-1.1.md
    
  # Context and constraints
  context:
    description: "{{task_description}}"
    acceptance_criteria: "{{acceptance_criteria}}"
    technical_context: "{{technical_context}}"
    related_files: "{{related_files}}"  # Files worker should be aware of
    
  constraints:
    time_limit: "{{time_limit}}"  # e.g., "30 minutes"
    scope_boundaries: "{{scope_boundaries}}"  # What worker should NOT do
    quality_gates: "{{quality_gates}}"  # Tests must pass, lint must pass, etc.
    
  dependencies:
    required_tasks: "{{required_tasks}}"  # Tasks that must complete first
    optional_tasks: "{{optional_tasks}}"  # Tasks that would be helpful if complete
    shared_resources: "{{shared_resources}}"  # Files/resources other workers may access
    
  expected_outputs:
    artifacts: "{{expected_artifacts}}"  # Files to create/modify
    documentation: "{{expected_documentation}}"  # Docs to update
    tests: "{{expected_tests}}"  # Tests to write
    
coordination:
  # How worker should communicate back
  progress_reporting:
    frequency: "{{progress_frequency}}"  # e.g., "every 5 minutes", "on milestone"
    milestones: "{{milestones}}"  # Key checkpoints to report
    
  conflict_handling:
    file_conflicts: "{{file_conflict_strategy}}"  # report, auto-merge, queue
    dependency_conflicts: "{{dependency_conflict_strategy}}"  # wait, report, proceed
    
  escalation:
    conditions: "{{escalation_conditions}}"  # When to escalate to coordinator
    contact: "{{coordinator_contact}}"  # How to reach coordinator

instructions:
  # Specific instructions for this task
  steps: "{{task_steps}}"
  special_considerations: "{{special_considerations}}"
  examples: "{{examples}}"
  
  # Agent-specific guidance
  persona_override: "{{persona_override}}"  # Any persona adjustments for this task
  tools_available: "{{tools_available}}"  # Specific tools worker can use
  
# Validation
validation:
  required_fields:
    - task_type
    - work_item
    - expected_outputs
  optional_fields:
    - dependencies
    - persona_override

