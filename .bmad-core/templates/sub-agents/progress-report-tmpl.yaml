# <!-- Powered by BMADâ„¢ Core -->
# Progress Report Template
# Used by worker/specialist sub-agents to report progress to coordinator

message_type: progress_report
version: 1.0

metadata:
  from_agent_id: "{{worker_id}}"
  from_agent_type: "{{worker_type}}"
  to_agent_id: "{{coordinator_id}}"
  to_agent_type: "{{coordinator_type}}"
  session_id: "{{session_id}}"
  timestamp: "{{timestamp}}"
  message_id: "{{message_id}}"
  in_reply_to: "{{task_assignment_message_id}}"

task_reference:
  task_id: "{{task_id}}"
  task_type: "{{task_type}}"
  work_item_id: "{{work_item_id}}"

status:
  current_state: "{{current_state}}"  # not_started, in_progress, blocked, complete, failed
  completion_percentage: "{{completion_pct}}"  # 0-100
  estimated_time_remaining: "{{time_remaining}}"  # e.g., "15 minutes"
  
progress:
  current_step: "{{current_step}}"
  
  steps_completed:
    - step: "{{step_name}}"
      completed_at: "{{timestamp}}"
      notes: "{{step_notes}}"
      
  steps_in_progress:
    - step: "{{step_name}}"
      started_at: "{{timestamp}}"
      progress: "{{step_progress}}"
      
  steps_remaining:
    - step: "{{step_name}}"
      estimated_duration: "{{duration}}"

artifacts:
  created:
    - path: "{{file_path}}"
      type: "{{file_type}}"  # source, test, documentation
      status: "{{status}}"  # draft, complete, needs_review
      
  modified:
    - path: "{{file_path}}"
      changes: "{{change_description}}"
      
  deleted:
    - path: "{{file_path}}"
      reason: "{{deletion_reason}}"

blockers:
  - blocker_id: "{{blocker_id}}"
    type: "{{blocker_type}}"  # dependency, conflict, technical, clarification_needed
    severity: "{{severity}}"  # critical, high, medium, low
    description: "{{blocker_description}}"
    detected_at: "{{timestamp}}"
    resolution_needed: "{{resolution_description}}"
    
dependencies:
  waiting_for:
    - task_id: "{{dependency_task_id}}"
      reason: "{{dependency_reason}}"
      
  provided_to:
    - task_id: "{{dependent_task_id}}"
      artifact: "{{provided_artifact}}"

quality_metrics:
  tests_written: "{{test_count}}"
  tests_passing: "{{passing_test_count}}"
  lint_status: "{{lint_status}}"  # passing, failing, not_run
  type_check_status: "{{type_check_status}}"
  coverage_percentage: "{{coverage_pct}}"

notes:
  observations: "{{observations}}"
  decisions_made: "{{decisions}}"
  questions: "{{questions}}"
  recommendations: "{{recommendations}}"

next_steps:
  immediate: "{{immediate_next_step}}"
  planned: "{{planned_steps}}"
  
# Validation
validation:
  required_fields:
    - task_reference
    - status
    - progress
  optional_fields:
    - blockers
    - quality_metrics

